(function(e){function t(t){for(var n,o,r=t[0],l=t[1],c=t[2],u=0,p=[];u<r.length;u++)o=r[u],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&p.push(i[o][0]),i[o]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);d&&d(t);while(p.length)p.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],n=!0,r=1;r<a.length;r++){var l=a[r];0!==i[l]&&(n=!1)}n&&(s.splice(t--,1),e=o(o.s=a[0]))}return e}var n={},i={app:0},s=[];function o(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=n,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(a,n,function(t){return e[t]}.bind(null,n));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=t,r=r.slice();for(var c=0;c<r.length;c++)t(r[c]);var d=l;s.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";var n=a("64a9"),i=a.n(n);i.a},"03f3":function(e){e.exports=JSON.parse('{"roguephotoncannon":{"output":[{"internalName":"metalscrap","quantity":4}]},"devcannon":{"output":[{"internalName":"metalscrap","quantity":20}]}}')},"0438":function(e){e.exports=JSON.parse('{"capsule":{"modelpath":"ships/capsule.gltf"},"corvette":{"modelpath":"ships/LPSP_Frigate_fixed.gltf"},"frigateA":{"modelpath":"ships/LPSP_Frigate2_fixed.gltf"},"interceptorA":{"modelpath":"ships/LPSP_Frigate3_fixed.gltf"},"haulerA":{"modelpath":"ships/LPSP_CargoFreighter_fixed.gltf"},"destroyerA":{"modelpath":"ships/LPSP_DestroyerA_fixed.gltf"},"destroyerB":{"modelpath":"ships/LPSP_DestroyerB_fixed.gltf"},"cruiserA":{"modelpath":"ships/LPSP_CruiserA_fixed.gltf"},"probe":{"modelpath":"ships/probeship.gltf"},"lightDroneOrange":{"modelpath":"ships/drone_10_0.gltf"},"attackDroneRed":{"modelpath":"ships/drone_9_1.gltf"},"scoutDroneRed":{"modelpath":"ships/drone_7_1.gltf"},"shipDebrisA":{"modelpath":"debris/DebrisShipA_sm.gltf"},"structureDebrisA":{"modelpath":"debris/DebrisStructureA_sm.gltf"},"asteroidsA":{"modelpath":"planets/RingAsteroid.gltf"},"rocksA":{"modelpath":"planets/RingAsteroid.gltf"},"planetA":{"modelpath":"planets/PlanetA.gltf"},"planetB":{"modelpath":"planets/PlanetB.gltf"},"planetC":{"modelpath":"planets/PlanetC.gltf"},"planetD":{"modelpath":"planets/PlanetD.gltf"},"planetE":{"modelpath":"planets/PlanetE.gltf"},"planetF":{"modelpath":"planets/PlanetF.gltf"},"planetH":{"modelpath":"planets/PlanetH.gltf"},"planetI":{"modelpath":"planets/PlanetI.gltf"},"planetL":{"modelpath":"planets/PlanetL.gltf"},"warpgateA":{"modelpath":"structures/WarpGate3_sm.gltf"},"warpgateB":{"modelpath":"structures/WarpGate5_sm.gltf"},"warpgateC":{"modelpath":"structures/WarpGate11_sm.gltf"},"warpgateD":{"modelpath":"structures/WarpGate21_sm.gltf"},"warpgateE":{"modelpath":"structures/WarpGate25_sm.gltf"},"warpgateF":{"modelpath":"structures/WarpGate29_sm.gltf"},"warpgateG":{"modelpath":"structures/WarpGate29b_sm.gltf"},"warpgateH":{"modelpath":"structures/WarpGate32_sm.gltf"},"stationB":{"modelpath":"structures/StationB_sm.gltf"},"stationD":{"modelpath":"structures/StationD_sm.gltf"},"stationC":{"modelpath":"structures/StationC_sm.gltf"},"stationA":{"modelpath":"structures/StationC2_sm.gltf"},"artifact1":{"modelpath":"structures/artifact1.gltf"},"artifact2":{"modelpath":"structures/artifact2.gltf"},"artifact3":{"modelpath":"structures/artifact3.gltf"},"artifact4":{"modelpath":"structures/artifact4.gltf"},"artifact5":{"modelpath":"structures/artifact5.gltf"},"shipyard1":{"modelpath":"structures/ShipyardA.gltf"},"ruinedshipyard1":{"modelpath":"structures/ruinedshipyard1.gltf"},"ruinedshipyard2":{"modelpath":"structures/ruinedshipyard2.gltf"},"chunkyblock":{"modelpath":"structures/chunkyblock.gltf"},"spine":{"modelpath":"structures/spine.gltf"},"ancientgate":{"modelpath":"structures/ancientgate.gltf"},"ancientgate2":{"modelpath":"structures/ancientgate2.gltf"},"trianglething":{"modelpath":"structures/trianglething.gltf"},"solararray":{"modelpath":"structures/solararray.gltf"}}')},"06b6":function(e,t,a){const n=a("7767");a("3431"),a("37e8"),a("a2cc");e.exports=class e{static getSlotType(e){return e.slotId<10?"high":e.slotId<20?"mid":(e.slotId,"low")}static async equipmentSlotIsAvailable(t,a,n){let i=await e.findItemEquippedToShip(t,a,n);return!i}static async findNextAvailableSlotToEquipItem(t,a,i){let s=0,o=9,r=n.getUnitBaseTypeData(a),l=r.slots,c=n.getEquipmentTypeData(t.internalName),d=c.equipment_slot;if(!l[d]||l[d]<1)return null;"high"==d&&(s=0),"mid"==d&&(s=10),"low"==d&&(s=20),o=s+(l[d]-1);let u=s,p=null;while(u<=o){let t=await e.equipmentSlotIsAvailable(a,u,i);if(t){p=u;break}u++}return console.log("avail",p),p}static async findItemEquippedToShip(e,t,a){return await a.findOne("items",{equippedToUnit:e._id,equippedToSlot:t})}static async findOneEquipmentOnShip(e,t,a){return await a.findOne("equipmentSlots",{unitId:e._id,slotId:t})}static equipmentRequiresPrimaryTarget(e){let t=n.getEquipmentTypeData(e.equipmenttype);return"self"!=t.target_type&&"passive"!=t.target_type}static equipmentOfTypeCanBeEngaged(e){let t=n.getEquipmentTypeData(e.equipmenttype);return"passive"!=t.target_type}static async getEquipmentSlotsOnGrid(e,t){let a=[],n=await t.findAll("units",{grid:e,active:!0,dead:!1,dockedInStation:null});for(var i of n){let e=await t.findAll("equipmentSlots",{unitId:i._id});a=a.concat(e)}return a}static async rebuildEquipmentSlotsForUnit(t,a){if(!t)return void console.log("WARN: rebuilding slots for null unit ?");let n=await a.findById("units",t._id),i=await a.findAll("items",{equippedToUnit:n._id});for(var s of(console.log("rebuilding equipment slots for unit ",t,i),await e.clearAllEquipmentSlotsForUnit(n,a),i))await a.insertOne("equipmentSlots",{unitId:n._id,slotId:s.equippedToSlot,equipmenttype:s.internalName,active:!0,engaged:!1})}static async clearAllEquipmentSlotsForUnit(e,t){let a=await t.deleteMany("equipmentSlots",{unitId:e._id});return a}}},"0764":function(e,t){e.exports=class{static getRandomHash(){let e=Math.floor(Math.random()*Math.pow(16,16)).toString(16);return e}}},"0f27":function(e,t,a){"use strict";a.r(t);var n=a("5a89");console.warn("THREE.OrbitControls: As part of the transition to ES6 Modules, the files in 'examples/js' were deprecated in May 2020 (r117) and will be deleted in December 2020 (r124). You can find more information about developing using ES6 Modules in https://threejs.org/docs/#manual/en/introduction/Installation."),n["OrbitControls"]=function(e,t){void 0===t&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=e,this.domElement=t,this.enabled=!0,this.target=new n["Vector3"],this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!1,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:n["MOUSE"].ROTATE,MIDDLE:n["MOUSE"].DOLLY,RIGHT:n["MOUSE"].PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.setPolarAngle=function(e){d.phi=e},this.setAzimuthalAngle=function(e){d.theta=e},this.getPolarAngle=function(){return d.phi},this.getAzimuthalAngle=function(){return d.theta},this.handleMouseDown=function(e){return ne(e)},this.updatePosition=function(e){return q(e)},this.saveState=function(){a.target0.copy(a.target),a.position0.copy(a.object.position),a.zoom0=a.object.zoom},this.reset=function(){a.target.copy(a.target0),a.object.position.copy(a.position0),a.object.zoom=a.zoom0,a.object.updateProjectionMatrix(),a.dispatchEvent(i),a.update(),l=r.NONE},this.update=function(){var t=new n["Vector3"],s=(new n["Quaternion"]).setFromUnitVectors(e.up,new n["Vector3"](0,1,0)),o=s.clone().inverse(),y=new n["Vector3"],g=new n["Quaternion"],f=2*Math.PI;return function(){var e=a.object.position;t.copy(e).sub(a.target),t.applyQuaternion(s),d.setFromVector3(t),a.autoRotate&&l===r.NONE&&S(k()),a.enableDamping?(d.theta+=u.theta*a.dampingFactor,d.phi+=u.phi*a.dampingFactor):(d.theta+=u.theta,d.phi+=u.phi);var n=a.minAzimuthAngle,b=a.maxAzimuthAngle;return isFinite(n)&&isFinite(b)&&(n<-Math.PI?n+=f:n>Math.PI&&(n-=f),b<-Math.PI?b+=f:b>Math.PI&&(b-=f),d.theta=n<b?Math.max(n,Math.min(b,d.theta)):d.theta>(n+b)/2?Math.max(n,d.theta):Math.min(b,d.theta)),d.phi=Math.max(a.minPolarAngle,Math.min(a.maxPolarAngle,d.phi)),d.makeSafe(),d.radius*=p,d.radius=Math.max(a.minDistance,Math.min(a.maxDistance,d.radius)),!0===a.enableDamping?a.target.addScaledVector(m,a.dampingFactor):a.target.add(m),t.setFromSpherical(d),t.applyQuaternion(o),e.copy(a.target).add(t),a.object.lookAt(a.target),!0===a.enableDamping?(u.theta*=1-a.dampingFactor,u.phi*=1-a.dampingFactor,m.multiplyScalar(1-a.dampingFactor)):(u.set(0,0,0),m.set(0,0,0)),p=1,!!(h||y.distanceToSquared(a.object.position)>c||8*(1-g.dot(a.object.quaternion))>c)&&(a.dispatchEvent(i),y.copy(a.object.position),g.copy(a.object.quaternion),h=!1,!0)}}(),this.dispose=function(){a.domElement.removeEventListener("contextmenu",ue,!1),a.domElement.removeEventListener("pointerdown",ee,!1),a.domElement.removeEventListener("wheel",oe,!1),a.domElement.removeEventListener("touchstart",le,!1),a.domElement.removeEventListener("touchend",de,!1),a.domElement.removeEventListener("touchmove",ce,!1),a.domElement.ownerDocument.removeEventListener("pointermove",te,!1),a.domElement.ownerDocument.removeEventListener("pointerup",ae,!1),a.domElement.removeEventListener("keydown",re,!1)};var a=this,i={type:"change"},s={type:"start"},o={type:"end"},r={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},l=r.NONE,c=1e-6,d=new n["Spherical"],u=new n["Spherical"],p=1,m=new n["Vector3"],h=!1,y=new n["Vector2"],g=new n["Vector2"],f=new n["Vector2"],b=new n["Vector2"],v=new n["Vector2"],_=new n["Vector2"],w=new n["Vector2"],C=new n["Vector2"],x=new n["Vector2"];function k(){return 2*Math.PI/60/60*a.autoRotateSpeed}function T(){return Math.pow(.95,a.zoomSpeed)}function S(e){u.theta-=e}function I(e){u.phi-=e}var A=function(){var e=new n["Vector3"];return function(t,a){e.setFromMatrixColumn(a,0),e.multiplyScalar(-t),m.add(e)}}(),P=function(){var e=new n["Vector3"];return function(t,n){!0===a.screenSpacePanning?e.setFromMatrixColumn(n,1):(e.setFromMatrixColumn(n,0),e.crossVectors(a.object.up,e)),e.multiplyScalar(t),m.add(e)}}(),D=function(){var e=new n["Vector3"];return function(t,n){var i=a.domElement;if(a.object.isPerspectiveCamera){var s=a.object.position;e.copy(s).sub(a.target);var o=e.length();o*=Math.tan(a.object.fov/2*Math.PI/180),A(2*t*o/i.clientHeight,a.object.matrix),P(2*n*o/i.clientHeight,a.object.matrix)}else a.object.isOrthographicCamera?(A(t*(a.object.right-a.object.left)/a.object.zoom/i.clientWidth,a.object.matrix),P(n*(a.object.top-a.object.bottom)/a.object.zoom/i.clientHeight,a.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),a.enablePan=!1)}}();function M(e){a.object.isPerspectiveCamera?p/=e:a.object.isOrthographicCamera?(a.object.zoom=Math.max(a.minZoom,Math.min(a.maxZoom,a.object.zoom*e)),a.object.updateProjectionMatrix(),h=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),a.enableZoom=!1)}function U(e){a.object.isPerspectiveCamera?p*=e:a.object.isOrthographicCamera?(a.object.zoom=Math.max(a.minZoom,Math.min(a.maxZoom,a.object.zoom/e)),a.object.updateProjectionMatrix(),h=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),a.enableZoom=!1)}function N(e){y.set(e.clientX,e.clientY)}function E(e){w.set(e.clientX,e.clientY)}function O(e){b.set(e.clientX,e.clientY)}function R(e){g.set(e.clientX,e.clientY),f.subVectors(g,y).multiplyScalar(a.rotateSpeed);var t=a.domElement;S(2*Math.PI*f.x/t.clientHeight),I(2*Math.PI*f.y/t.clientHeight),y.copy(g),a.update()}function L(e){C.set(e.clientX,e.clientY),x.subVectors(C,w),x.y>0?M(T()):x.y<0&&U(T()),w.copy(C),a.update()}function q(e){console.log("pan",e),v.set(e.x,e.y),_.subVectors(v,b).multiplyScalar(a.panSpeed),D(_.x,_.y),b.copy(v),a.update()}function V(e){v.set(e.clientX,e.clientY),_.subVectors(v,b).multiplyScalar(a.panSpeed),D(_.x,_.y),b.copy(v),a.update()}function F(){}function z(e){e.deltaY<0?U(T()):e.deltaY>0&&M(T()),a.update()}function j(e){var t=!1;switch(e.keyCode){case a.keys.UP:D(0,a.keyPanSpeed),t=!0;break;case a.keys.BOTTOM:D(0,-a.keyPanSpeed),t=!0;break;case a.keys.LEFT:D(a.keyPanSpeed,0),t=!0;break;case a.keys.RIGHT:D(-a.keyPanSpeed,0),t=!0;break}t&&(e.preventDefault(),a.update())}function B(e){if(1==e.touches.length)y.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),a=.5*(e.touches[0].pageY+e.touches[1].pageY);y.set(t,a)}}function H(e){if(1==e.touches.length)b.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),a=.5*(e.touches[0].pageY+e.touches[1].pageY);b.set(t,a)}}function G(e){var t=e.touches[0].pageX-e.touches[1].pageX,a=e.touches[0].pageY-e.touches[1].pageY,n=Math.sqrt(t*t+a*a);w.set(0,n)}function W(e){a.enableZoom&&G(e),a.enablePan&&H(e)}function $(e){a.enableZoom&&G(e),a.enableRotate&&B(e)}function Y(e){if(1==e.touches.length)g.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);g.set(t,n)}f.subVectors(g,y).multiplyScalar(a.rotateSpeed);var i=a.domElement;S(2*Math.PI*f.x/i.clientHeight),I(2*Math.PI*f.y/i.clientHeight),y.copy(g)}function Q(e){if(1==e.touches.length)v.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);v.set(t,n)}_.subVectors(v,b).multiplyScalar(a.panSpeed),D(_.x,_.y),b.copy(v)}function J(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,i=Math.sqrt(t*t+n*n);C.set(0,i),x.set(0,Math.pow(C.y/w.y,a.zoomSpeed)),M(x.y),w.copy(C)}function Z(e){a.enableZoom&&J(e),a.enablePan&&Q(e)}function X(e){a.enableZoom&&J(e),a.enableRotate&&Y(e)}function K(){}function ee(e){if(!1!==a.enabled)switch(e.pointerType){case"mouse":ne(e);break}}function te(e){if(!1!==a.enabled)switch(e.pointerType){case"mouse":ie(e);break}}function ae(e){if(!1!==a.enabled)switch(e.pointerType){case"mouse":se(e);break}}function ne(e){var t;switch(e.preventDefault(),a.domElement.focus?a.domElement.focus():window.focus(),e.button){case 0:t=a.mouseButtons.LEFT;break;case 1:t=a.mouseButtons.MIDDLE;break;case 2:t=a.mouseButtons.RIGHT;break;default:t=-1}switch(t){case n["MOUSE"].DOLLY:if(!1===a.enableZoom)return;E(e),l=r.DOLLY;break;case n["MOUSE"].ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===a.enablePan)return;O(e),l=r.PAN}else{if(!1===a.enableRotate)return;N(e),l=r.ROTATE}break;case n["MOUSE"].PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===a.enableRotate)return;N(e),l=r.ROTATE}else{if(!1===a.enablePan)return;O(e),l=r.PAN}break;default:l=r.NONE}l!==r.NONE&&(a.domElement.ownerDocument.addEventListener("pointermove",te,!1),a.domElement.ownerDocument.addEventListener("pointerup",ae,!1),a.dispatchEvent(s))}function ie(e){if(!1!==a.enabled)switch(e.preventDefault(),l){case r.ROTATE:if(!1===a.enableRotate)return;R(e);break;case r.DOLLY:if(!1===a.enableZoom)return;L(e);break;case r.PAN:if(!1===a.enablePan)return;V(e);break}}function se(e){!1!==a.enabled&&(F(e),a.domElement.ownerDocument.removeEventListener("pointermove",te,!1),a.domElement.ownerDocument.removeEventListener("pointerup",ae,!1),a.dispatchEvent(o),l=r.NONE)}function oe(e){!1===a.enabled||!1===a.enableZoom||l!==r.NONE&&l!==r.ROTATE||(e.preventDefault(),e.stopPropagation(),a.dispatchEvent(s),z(e),a.dispatchEvent(o))}function re(e){!1!==a.enabled&&!1!==a.enableKeys&&!1!==a.enablePan&&j(e)}function le(e){if(!1!==a.enabled){switch(e.preventDefault(),e.touches.length){case 1:switch(a.touches.ONE){case n["TOUCH"].ROTATE:if(!1===a.enableRotate)return;B(e),l=r.TOUCH_ROTATE;break;case n["TOUCH"].PAN:if(!1===a.enablePan)return;H(e),l=r.TOUCH_PAN;break;default:l=r.NONE}break;case 2:switch(a.touches.TWO){case n["TOUCH"].DOLLY_PAN:if(!1===a.enableZoom&&!1===a.enablePan)return;W(e),l=r.TOUCH_DOLLY_PAN;break;case n["TOUCH"].DOLLY_ROTATE:if(!1===a.enableZoom&&!1===a.enableRotate)return;$(e),l=r.TOUCH_DOLLY_ROTATE;break;default:l=r.NONE}break;default:l=r.NONE}l!==r.NONE&&a.dispatchEvent(s)}}function ce(e){if(!1!==a.enabled)switch(e.preventDefault(),e.stopPropagation(),l){case r.TOUCH_ROTATE:if(!1===a.enableRotate)return;Y(e),a.update();break;case r.TOUCH_PAN:if(!1===a.enablePan)return;Q(e),a.update();break;case r.TOUCH_DOLLY_PAN:if(!1===a.enableZoom&&!1===a.enablePan)return;Z(e),a.update();break;case r.TOUCH_DOLLY_ROTATE:if(!1===a.enableZoom&&!1===a.enableRotate)return;X(e),a.update();break;default:l=r.NONE}}function de(e){!1!==a.enabled&&(K(e),a.dispatchEvent(o),l=r.NONE)}function ue(e){!1!==a.enabled&&e.preventDefault()}a.domElement.addEventListener("wheel",oe,!1),-1===a.domElement.tabIndex&&(a.domElement.tabIndex=0),this.update()},n["OrbitControls"].prototype=Object.create(n["EventDispatcher"].prototype),n["OrbitControls"].prototype.constructor=n["OrbitControls"],n["MapControls"]=function(e,t){n["OrbitControls"].call(this,e,t),this.screenSpacePanning=!1,this.mouseButtons.LEFT=n["MOUSE"].PAN,this.mouseButtons.RIGHT=n["MOUSE"].ROTATE,this.touches.ONE=n["TOUCH"].PAN,this.touches.TWO=n["TOUCH"].DOLLY_ROTATE},n["MapControls"].prototype=Object.create(n["EventDispatcher"].prototype),n["MapControls"].prototype.constructor=n["MapControls"]},1:function(e,t){},10:function(e,t){},11:function(e,t){},12:function(e,t){},13:function(e,t){},14:function(e,t){},15:function(e,t){},16:function(e,t){},17:function(e,t){},1711:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAA1CAMAAAD4fXLQAAAAb1BMVEVHcEy/abO+bLO5i7O5j7O+brPBWLO+bLO9cbPDTbPCUrO/Z7PDT7PCVLPESLPBW7O6hLO8ebO4krPDT7PAYbPESbO+a7O6h7O7fLO8d7PAX7O4kbO6hrPAYbO4k7O7e7O7gLPES7PCTrO6nrbCVrO00RqtAAAAJXRSTlMAlCGVWla3AhVYOguXdroqRLG8h0umuW+ghqSrNmuG18L94OzSOh2EJwAAAmJJREFUOMt9leeCgjAQhBcwhYQWehBEvXv/Z7zdUI6i8AMwGWe/2QQA2B4CboGAy0PmPze41DQ/eS4v5kV/bx6Px5XifssCP++/1UHMO5Li+atA5hkp4H77VoMIKG3/GVZAlvvgPOARfCRBTNcx15Xsk4QAZwXe67PAhZwVQrTNmSJ4zOviLv3TP2PKfwVerT14aIe5KhDWHGCb+7r6sysz+oTpFCxYCrfD1gQxxX4HIWztHzHdbWnXUevtMN0YArZjNt3jQtblUqdp5/nUmudo2lJT05Cp1hPdjCmywFjJPM2MGaT7SxdPJq6bmrWmwXGGxUXp1TFhpjwlSZZrkI1pb5LWhU14vVd7KUAcOcyM5jMx4TkFWfsx95TsSsR8WhP0sPRj9nC5Bh51XMI4Nv5mBZn3fw+65K8OPRoBS+6dAscUpzJpa9gi2ShwII14SNUwoWn7gweViHkhQUvILF6a2spDlpJHGDeMcbYdmQDfq5lYPNYCafVWVGYcW1ytrOvoF/NwXsY8xjYWycvtEVHWg/F8EEONZ/IIpwJJEUVzBGulrQcNfsFZ6KmOY0JVVUol/txIXTPoO0quut83HxCrSAahk3BtgsINJxintQoLqpfgGaJi0+uhW/koZ0XMYaI3W1lMewUzlpSTGpMmaisAnyu3ECX/jafeVfHuiRKYULq9GUbTHo2r07PvFZMycq1dg25fYtjmxQPkGnQrUUkKk8IF/fSaiqvZ4xD034TwHcc+6FZCM+hxDLqLnAhUYLXvL/aoCItz0N3npaqqD0F3kd+v4vILhN1O9OVHDE3C49gfZJIhMflsAi0AAAAASUVORK5CYII="},18:function(e,t){},19:function(e,t){},2:function(e,t){},20:function(e,t){},21:function(e,t){},22:function(e,t){},23:function(e,t){},24:function(e,t){},25:function(e,t){},26:function(e,t){},2912:function(e){e.exports=JSON.parse('{"warpgate1":{"celestialtype":"warpgate","entities":[{"basetype":"warpgateA","locationVector":{"x":0,"y":0,"z":100}}]},"warpgate2":{"celestialtype":"warpgate","entities":[{"basetype":"warpgateB","locationVector":{"x":0,"y":0,"z":100}}]},"warpgate3":{"celestialtype":"warpgate","entities":[{"basetype":"warpgateC","locationVector":{"x":0,"y":0,"z":100}}]},"warpgate4":{"celestialtype":"warpgate","entities":[{"basetype":"warpgateD","locationVector":{"x":0,"y":0,"z":100}}]},"warpgate5":{"celestialtype":"warpgate","entities":[{"basetype":"warpgateE","locationVector":{"x":0,"y":0,"z":100}}]},"warpgate6":{"celestialtype":"warpgate","entities":[{"basetype":"warpgateF","locationVector":{"x":0,"y":0,"z":200}}]},"warpgate7":{"celestialtype":"warpgate","entities":[{"basetype":"warpgateG","locationVector":{"x":0,"y":0,"z":100}}]},"warpgate8":{"celestialtype":"warpgate","entities":[{"basetype":"warpgateH","locationVector":{"x":0,"y":0,"z":100}}]},"asteroids1":{"celestialtype":"anomaly","entities":[{"basetype":"rocksA","locationVector":{"x":0,"y":0,"z":300}}]},"largewaterplanet":{"celestialtype":"planet","entities":[{"basetype":"planetA","locationVector":{"x":0,"y":0,"z":800}}]},"iceplanet":{"celestialtype":"planet","entities":[{"basetype":"planetB","locationVector":{"x":0,"y":0,"z":800}}]},"waterplanet":{"celestialtype":"planet","entities":[{"basetype":"planetC","locationVector":{"x":0,"y":0,"z":800}}]},"barrenplanet":{"celestialtype":"planet","entities":[{"basetype":"planetD","locationVector":{"x":0,"y":0,"z":800}}]},"brokenplanet":{"celestialtype":"planet","entities":[{"basetype":"planetE","locationVector":{"x":0,"y":0,"z":800}}]},"smallmoon":{"celestialtype":"planet","entities":[{"basetype":"planetF","locationVector":{"x":0,"y":0,"z":800}}]},"largemoon":{"celestialtype":"planet","entities":[{"basetype":"planetH","locationVector":{"x":0,"y":0,"z":800}}]},"islandplanet":{"celestialtype":"planet","entities":[{"basetype":"planetI","locationVector":{"x":0,"y":0,"z":800}}]},"icecomet":{"celestialtype":"planet","entities":[{"basetype":"planetL","locationVector":{"x":0,"y":0,"z":500}}]},"stationA":{"celestialtype":"structure","entities":[{"basetype":"stationA","locationVector":{"x":0,"y":0,"z":150}}]},"stationB":{"celestialtype":"structure","entities":[{"basetype":"stationB","locationVector":{"x":0,"y":0,"z":150}}]},"stationC":{"celestialtype":"structure","entities":[{"basetype":"stationC","locationVector":{"x":0,"y":0,"z":150}}]},"stationD":{"celestialtype":"structure","entities":[{"basetype":"stationD","locationVector":{"x":0,"y":0,"z":150}}]},"minordronehideout":{"celestialtype":"anomaly","entities":[{"basetype":"rocksA","locationVector":{"x":0,"y":0,"z":60}}],"mobgangs":[{"gangtype":"minor_roguedrone_squad","locationVector":{"x":100,"y":0,"z":50}}]},"creepingdronehideout":{"celestialtype":"anomaly","entities":[{"basetype":"artifactA","locationVector":{"x":0,"y":0,"z":60}}],"mobgangs":[{"gangtype":"roguedrone_spies","locationVector":{"x":100,"y":0,"z":50}}]},"droneoutpost":{"celestialtype":"anomaly","entities":[{"basetype":"ancientGateA","locationVector":{"x":-100,"y":-10,"z":60}},{"basetype":"ruinedShipyardB","locationVector":{"x":120,"y":15,"z":360}}],"mobgangs":[{"gangtype":"roguedrone_horde","locationVector":{"x":100,"y":0,"z":50}}]},"ancientrelic":{"celestialtype":"anomaly","entities":[{"basetype":"ancientGateA","locationVector":{"x":0,"y":0,"z":10}}],"mobgangs":[]},"abandonedshipyard":{"celestialtype":"anomaly","entities":[{"basetype":"ruinedShipyardA","locationVector":{"x":-80,"y":0,"z":10}},{"basetype":"ruinedShipyardB","locationVector":{"x":90,"y":0,"z":-30}}],"mobgangs":[]},"abandonedwreckage":{"celestialtype":"anomaly","entities":[{"basetype":"ruinedStructure","locationVector":{"x":-80,"y":0,"z":10}},{"basetype":"ruinedShip","locationVector":{"x":90,"y":0,"z":-30}},{"basetype":"ruinedShip","locationVector":{"x":90,"y":20,"z":-90}},{"basetype":"ruinedShip","locationVector":{"x":40,"y":-10,"z":30}}],"mobgangs":[]}}')},"2ba3":function(e,t){e.exports={contracts:{ethereum_network:{},matic_network:{TippingJar:{address:"0x91cdF51E0B06fd0e30A4199a5D572c89FDB9A4ee"}}}}},"2bd2":function(e){e.exports=JSON.parse('{"roguedrone":{"basetype":"minordrone","name":"rogue drone","faction":"drones","aggro_radius":300,"preferred_radius":100,"modules":{"high_slots":["roguephotoncannon"],"mid_slots":[],"low_slots":[]},"loot_tables":[{"table_name":"minor_scrap","roll_multiplier":10}]},"scoutdrone":{"basetype":"scoutdrone","name":"scout drone","faction":"drones","aggro_radius":500,"preferred_radius":200,"modules":{"high_slots":["roguephotoncannon"],"mid_slots":[],"low_slots":[]},"loot_tables":[{"table_name":"minor_scrap","roll_multiplier":10}]},"eliminatordrone":{"basetype":"attackdrone","name":"eliminator drone","faction":"drones","aggro_radius":500,"preferred_radius":70,"modules":{"high_slots":["roguebarragecannon"],"mid_slots":[],"low_slots":[]},"loot_tables":[{"table_name":"minor_scrap","roll_multiplier":10}]},"darkchildraider":{"basetype":"scoutdrone","name":"darkchild raider","faction":"childrenofethereum","aggro_radius":500,"preferred_radius":200,"modules":{"high_slots":["roguerailgun"],"mid_slots":[],"low_slots":[]},"loot_tables":[{"table_name":"minor_scrap","roll_multiplier":10}]},"darkchildhorror":{"basetype":"darkchildhorror","name":"darkchild horror","faction":"childrenofethereum","aggro_radius":500,"preferred_radius":200,"modules":{"high_slots":["roguebomblauncher"],"mid_slots":[],"low_slots":[]},"loot_tables":[{"table_name":"minor_scrap","roll_multiplier":10}]},"imperialscout":{"basetype":"renegadelancer","name":"imperial scout","faction":"satoshislegion","aggro_radius":500,"preferred_radius":200,"modules":{"high_slots":["roguerailgun"],"mid_slots":[],"low_slots":[]},"loot_tables":[{"table_name":"minor_scrap","roll_multiplier":10}]},"legionnaire":{"basetype":"renegadewingleader","name":"legionnaire","faction":"satoshislegion","aggro_radius":400,"preferred_radius":240,"modules":{"high_slots":["vectormissilebay"],"mid_slots":[],"low_slots":[]},"loot_tables":[{"table_name":"minor_scrap","roll_multiplier":10}]},"renegadelancer":{"basetype":"renegadelancer","name":"renegade lancer","faction":"renegades","aggro_radius":500,"preferred_radius":200,"modules":{"high_slots":["roguerailgun"],"mid_slots":[],"low_slots":[]},"loot_tables":[{"table_name":"minor_scrap","roll_multiplier":10}]},"renegadebomber":{"basetype":"renegadebomber","name":"renegade bomber","faction":"renegades","aggro_radius":500,"preferred_radius":70,"modules":{"high_slots":["roguebomblauncher"],"mid_slots":[],"low_slots":[]},"loot_tables":[{"table_name":"minor_scrap","roll_multiplier":10}]},"renegadewingleader":{"basetype":"renegadewingleader","name":"renegade wingleader","faction":"renegades","aggro_radius":500,"preferred_radius":300,"modules":{"high_slots":["vectormissilebay"],"mid_slots":[],"low_slots":[]},"loot_tables":[{"table_name":"minor_scrap","roll_multiplier":10}]},"synthetichunter":{"basetype":"synthetichunter","name":"synthetic hunter","faction":"synthetics","aggro_radius":500,"preferred_radius":340,"modules":{"high_slots":["roguerailgun","smallstasiswebifier"],"mid_slots":[],"low_slots":[]},"loot_tables":[{"table_name":"minor_scrap","roll_multiplier":10}]},"syntheticassimilator":{"basetype":"syntheticassimilator","name":"synthetic assimilator","faction":"synthetics","aggro_radius":500,"preferred_radius":60,"modules":{"high_slots":["roguebarragecannon","smallstasiswebifier"],"mid_slots":[],"low_slots":[]},"loot_tables":[{"table_name":"minor_scrap","roll_multiplier":10}]}}')},"2c02":function(e,t,a){const n=a("5a89");var i=a("6a87");a("dfbc");const s=a("7767"),o=a("a2cc");a("a284");e.exports=class e{constructor(){}static getBaseTypeData(e){return e?i[e.basetype]:null}static getUnitType(t){return t?e.getBaseTypeData(t).unittype:null}static async findUnitById(e,t){return await t.findById("units",e)}static async refreshUnitData(e,t){return await t.updateAndFindOne("units",{_id:e},{active:!0,warpStartTick:void 0,warpDestinationGridUUID:void 0,jumpStartTick:void 0,jumpDestinationGridUUID:void 0})}static getTicksToStartWarp(e){return e?e.stats.mass/10:(console.log("WARN: ticks to start warp for null unit "),0)}static getTicksToFinishWarp(t){let a=0;return 2*e.getTicksToStartWarp(t)+a}static getDistanceBetweenUnits(e,t){var a=new n.Vector3(e.locationVector.x,e.locationVector.y,e.locationVector.z);return a.distanceTo(t.locationVector)}static collidingWithAnyEntity(e,t){var a=new n.Vector3(e.x,e.y,e.z);for(var s in t){var o=i[t[s].basetype],r=a.distanceTo(t[s].locationVector);if(r<o.collisionRadius)return t[s]}return null}static unitHasArtificialIntelligence(e){return e.aiFaction&&!e.isStatic}static getFacingVectorFromLocationToLocation(e,t){var a=new n.Vector3(e.x,e.y,e.z),i=a.sub(t).normalize().negate();return i}static getFacingVectorFromUnitToLocation(e,t){var a=new n.Vector3(e.locationVector.x,e.locationVector.y,e.locationVector.z),i=a.sub(t).normalize().negate();return i}static getFacingVectorFromUnitToUnit(t,a){return e.getFacingVectorFromUnitToLocation(t,a.locationVector)}static unitHasJumpDestination(e){return null!=e.jumpDestinationGridUUID}static unitHasWarpDestination(e){return null!=e.warpDestinationGridUUID}static unitPreparingToWarp(e){return null!=e.warpDestinationGridUUID}static unitsWithinServiceRange(t,a){var n=e.getDistanceBetweenUnits(t,a);let i=e.getBaseTypeData(a);var s=i.interactRadius;return n<=s}static unitIsActiveInSpace(e){return e.active&&!e.dead&&null==e.dockedInStation}static unitIsDockedAtStation(e){return e?e.dockedInStation:null}static unitHasService(t,a){if(t){let n=e.getBaseTypeData(t);if(n.services&&n.services.length>0)return n.services.includes(a)}return console.log("WARN: unitHasService(null) "),!1}static getWreckTypeForUnit(t){return"ship"==e.getUnitType(t)?"shipwreck":null}static async spawnNewUnit(e,t){let a=s.getUnitBaseTypeData(e),n=null;a&&(n=a.unittype),e.owningPlayerAddress||console.trace("WARN: Cannot spawn without owning player address");var i={grid:e.location.griduuid,locationVector:e.location.locationVector,velocityVector:e.location.velocityVector,basetype:e.basetype,unittype:n,stats:o.getInitialStatsForEntityType(e.basetype),vitals:o.getInitialVitalsForEntityType(e.basetype),active:!0,invisible:!1,isStatic:e.isStatic,dead:!1,owningPlayerAddress:e.owningPlayerAddress.toLowerCase(),aiFaction:e.aiFaction,mobtype:e.mobtype,mobSpawnLocationVector:e.mobSpawnLocationVector,deathrattleIntoGangType:e.deathrattleIntoGangType,warpStartTick:void 0,warpDestinationGridUUID:void 0,jumpStartTick:void 0,jumpDestinationGridUUID:void 0,dockedInStation:e.dockedInStation,lootingUnitWithId:void 0,spawnedAtTick:e.spawnedAtTick},r=await t.insertOne("units",i),l=r.insertedId;return l}static unitIsInvulnerable(t){let a=e.getBaseTypeData(t);return a.invulnerable}static async setUnitActiveAction(e,t){let a=await s.findUnitById(e.unitId,t),n=await s.findUnitById(e.targetUnitId,t);return a?(e.unitId=a._id,n&&(e.targetUnitId=n._id),e.unitId?(await t.upsertOne("activeUnitAction",{unitId:a._id},e),{success:!0}):(console.log("WARN: could not set unit active action",e),{success:!1,error:"Could not set unit active action "})):{success:!1,error:"Could not set unit active action, unit null "}}static async clearUnitActiveAction(e,t){if(e&&e._id){var a=await t.deleteMany("activeUnitAction",{unitId:e._id});if(a&&a.deletedCount>0)return!0}return console.log("WARN: could not clear unit active action",e),!1}static async setUnitVelocityToZero(e,t){var a=await t.findOne("units",{_id:e._id});a.velocityVector=new n.Vector3(0,0,0),await t.updateOne("units",{_id:a._id},{velocityVector:a.velocityVector})}static async setUnitVelocityToOrbitLocation(t,a,i,s){let o=new n.Vector3(t.locationVector.x,t.locationVector.y,t.locationVector.z),r=new n.Vector3(a.x,a.y,a.z),l=new n.Vector3(0,1,0),c=r.clone();c.y=o.y;let d=e.getFacingVectorFromLocationToLocation(a,o);d.applyAxisAngle(l,Math.PI/18);let u=r.addScaledVector(d,i),p=e.getFacingVectorFromLocationToLocation(o,u);return await e.setUnitVelocityTowardsDirection(t,p,s)}static async setUnitVelocityToApproachLocation(t,a,n){let i=e.getFacingVectorFromUnitToLocation(t,a);return await e.setUnitVelocityTowardsDirection(t,i,n)}static async setUnitVelocityTowardsDirection(e,t,a){var n=await a.findOne("units",{_id:e._id}),i=n.stats.speed;return n.velocityVector=t.multiplyScalar(i),await a.updateOne("units",{_id:n._id},{velocityVector:n.velocityVector}),!0}}},3:function(e,t){},"305d":function(e){e.exports=JSON.parse('[{"type":"constructor","stateMutability":"nonpayable","inputs":[{"type":"string","name":"name_","internalType":"string"},{"type":"string","name":"symbol_","internalType":"string"},{"type":"uint8","name":"decimals_","internalType":"uint8"},{"type":"address","name":"childChainManager","internalType":"address"}]},{"type":"event","name":"Approval","inputs":[{"type":"address","name":"owner","internalType":"address","indexed":true},{"type":"address","name":"spender","internalType":"address","indexed":true},{"type":"uint256","name":"value","internalType":"uint256","indexed":false}],"anonymous":false},{"type":"event","name":"MetaTransactionExecuted","inputs":[{"type":"address","name":"userAddress","internalType":"address","indexed":false},{"type":"address","name":"relayerAddress","internalType":"address payable","indexed":false},{"type":"bytes","name":"functionSignature","internalType":"bytes","indexed":false}],"anonymous":false},{"type":"event","name":"RoleAdminChanged","inputs":[{"type":"bytes32","name":"role","internalType":"bytes32","indexed":true},{"type":"bytes32","name":"previousAdminRole","internalType":"bytes32","indexed":true},{"type":"bytes32","name":"newAdminRole","internalType":"bytes32","indexed":true}],"anonymous":false},{"type":"event","name":"RoleGranted","inputs":[{"type":"bytes32","name":"role","internalType":"bytes32","indexed":true},{"type":"address","name":"account","internalType":"address","indexed":true},{"type":"address","name":"sender","internalType":"address","indexed":true}],"anonymous":false},{"type":"event","name":"RoleRevoked","inputs":[{"type":"bytes32","name":"role","internalType":"bytes32","indexed":true},{"type":"address","name":"account","internalType":"address","indexed":true},{"type":"address","name":"sender","internalType":"address","indexed":true}],"anonymous":false},{"type":"event","name":"Transfer","inputs":[{"type":"address","name":"from","internalType":"address","indexed":true},{"type":"address","name":"to","internalType":"address","indexed":true},{"type":"uint256","name":"value","internalType":"uint256","indexed":false}],"anonymous":false},{"type":"function","stateMutability":"view","outputs":[{"type":"uint256","name":"","internalType":"uint256"}],"name":"CHILD_CHAIN_ID","inputs":[]},{"type":"function","stateMutability":"view","outputs":[{"type":"bytes","name":"","internalType":"bytes"}],"name":"CHILD_CHAIN_ID_BYTES","inputs":[]},{"type":"function","stateMutability":"view","outputs":[{"type":"bytes32","name":"","internalType":"bytes32"}],"name":"DEFAULT_ADMIN_ROLE","inputs":[]},{"type":"function","stateMutability":"view","outputs":[{"type":"bytes32","name":"","internalType":"bytes32"}],"name":"DEPOSITOR_ROLE","inputs":[]},{"type":"function","stateMutability":"view","outputs":[{"type":"string","name":"","internalType":"string"}],"name":"ERC712_VERSION","inputs":[]},{"type":"function","stateMutability":"view","outputs":[{"type":"uint256","name":"","internalType":"uint256"}],"name":"ROOT_CHAIN_ID","inputs":[]},{"type":"function","stateMutability":"view","outputs":[{"type":"bytes","name":"","internalType":"bytes"}],"name":"ROOT_CHAIN_ID_BYTES","inputs":[]},{"type":"function","stateMutability":"view","outputs":[{"type":"uint256","name":"","internalType":"uint256"}],"name":"allowance","inputs":[{"type":"address","name":"owner","internalType":"address"},{"type":"address","name":"spender","internalType":"address"}]},{"type":"function","stateMutability":"nonpayable","outputs":[{"type":"bool","name":"","internalType":"bool"}],"name":"approve","inputs":[{"type":"address","name":"spender","internalType":"address"},{"type":"uint256","name":"amount","internalType":"uint256"}]},{"type":"function","stateMutability":"view","outputs":[{"type":"uint256","name":"","internalType":"uint256"}],"name":"balanceOf","inputs":[{"type":"address","name":"account","internalType":"address"}]},{"type":"function","stateMutability":"view","outputs":[{"type":"uint8","name":"","internalType":"uint8"}],"name":"decimals","inputs":[]},{"type":"function","stateMutability":"nonpayable","outputs":[{"type":"bool","name":"","internalType":"bool"}],"name":"decreaseAllowance","inputs":[{"type":"address","name":"spender","internalType":"address"},{"type":"uint256","name":"subtractedValue","internalType":"uint256"}]},{"type":"function","stateMutability":"nonpayable","outputs":[],"name":"deposit","inputs":[{"type":"address","name":"user","internalType":"address"},{"type":"bytes","name":"depositData","internalType":"bytes"}]},{"type":"function","stateMutability":"payable","outputs":[{"type":"bytes","name":"","internalType":"bytes"}],"name":"executeMetaTransaction","inputs":[{"type":"address","name":"userAddress","internalType":"address"},{"type":"bytes","name":"functionSignature","internalType":"bytes"},{"type":"bytes32","name":"sigR","internalType":"bytes32"},{"type":"bytes32","name":"sigS","internalType":"bytes32"},{"type":"uint8","name":"sigV","internalType":"uint8"}]},{"type":"function","stateMutability":"pure","outputs":[{"type":"uint256","name":"","internalType":"uint256"}],"name":"getChainId","inputs":[]},{"type":"function","stateMutability":"view","outputs":[{"type":"bytes32","name":"","internalType":"bytes32"}],"name":"getDomainSeperator","inputs":[]},{"type":"function","stateMutability":"view","outputs":[{"type":"uint256","name":"nonce","internalType":"uint256"}],"name":"getNonce","inputs":[{"type":"address","name":"user","internalType":"address"}]},{"type":"function","stateMutability":"view","outputs":[{"type":"bytes32","name":"","internalType":"bytes32"}],"name":"getRoleAdmin","inputs":[{"type":"bytes32","name":"role","internalType":"bytes32"}]},{"type":"function","stateMutability":"view","outputs":[{"type":"address","name":"","internalType":"address"}],"name":"getRoleMember","inputs":[{"type":"bytes32","name":"role","internalType":"bytes32"},{"type":"uint256","name":"index","internalType":"uint256"}]},{"type":"function","stateMutability":"view","outputs":[{"type":"uint256","name":"","internalType":"uint256"}],"name":"getRoleMemberCount","inputs":[{"type":"bytes32","name":"role","internalType":"bytes32"}]},{"type":"function","stateMutability":"nonpayable","outputs":[],"name":"grantRole","inputs":[{"type":"bytes32","name":"role","internalType":"bytes32"},{"type":"address","name":"account","internalType":"address"}]},{"type":"function","stateMutability":"view","outputs":[{"type":"bool","name":"","internalType":"bool"}],"name":"hasRole","inputs":[{"type":"bytes32","name":"role","internalType":"bytes32"},{"type":"address","name":"account","internalType":"address"}]},{"type":"function","stateMutability":"nonpayable","outputs":[{"type":"bool","name":"","internalType":"bool"}],"name":"increaseAllowance","inputs":[{"type":"address","name":"spender","internalType":"address"},{"type":"uint256","name":"addedValue","internalType":"uint256"}]},{"type":"function","stateMutability":"view","outputs":[{"type":"string","name":"","internalType":"string"}],"name":"name","inputs":[]},{"type":"function","stateMutability":"nonpayable","outputs":[],"name":"renounceRole","inputs":[{"type":"bytes32","name":"role","internalType":"bytes32"},{"type":"address","name":"account","internalType":"address"}]},{"type":"function","stateMutability":"nonpayable","outputs":[],"name":"revokeRole","inputs":[{"type":"bytes32","name":"role","internalType":"bytes32"},{"type":"address","name":"account","internalType":"address"}]},{"type":"function","stateMutability":"view","outputs":[{"type":"string","name":"","internalType":"string"}],"name":"symbol","inputs":[]},{"type":"function","stateMutability":"view","outputs":[{"type":"uint256","name":"","internalType":"uint256"}],"name":"totalSupply","inputs":[]},{"type":"function","stateMutability":"nonpayable","outputs":[{"type":"bool","name":"","internalType":"bool"}],"name":"transfer","inputs":[{"type":"address","name":"recipient","internalType":"address"},{"type":"uint256","name":"amount","internalType":"uint256"}]},{"type":"function","stateMutability":"nonpayable","outputs":[{"type":"bool","name":"","internalType":"bool"}],"name":"transferFrom","inputs":[{"type":"address","name":"sender","internalType":"address"},{"type":"address","name":"recipient","internalType":"address"},{"type":"uint256","name":"amount","internalType":"uint256"}]},{"type":"function","stateMutability":"nonpayable","outputs":[],"name":"withdraw","inputs":[{"type":"uint256","name":"amount","internalType":"uint256"}]}]')},3431:function(e,t,a){var n=a("5ba3");const i=a("99e5"),s=a("b771").contracts,o=a("dd97"),r=a("305d");e.exports=class e{static getNetworkDetails(){return{networkName:"Matic Mainnet",chainId:137,rpc:"https://rpc-mainnet.matic.network",explorer:"https://explorer.matic.network",dedicated_rpc:"https://rpc-mainnet.maticvigil.com/v1/3304ec1dd22f6ff1589fd0353a549a70b82d4dfd"}}static getDeveloperFeeData(){return{address:"0x8f700B474a63C4B6D67C080313284879E198D097",amountPercent:2}}static async getNetworkBlockNumber(e){if(!e)e=i.givenProvider;let t=new i(e);return await t.eth.getBlockNumber()}static async getOrCacheNetworkBlockNumber_client(){let t=window.localStorage.getItem("lastTimeFetchedBlockNumber"),a=(new Date).getTime();if(null==t||a-t>3e5){window.localStorage.setItem("lastTimeFetchedBlockNumber",a);let t=await e.getNetworkBlockNumber();window.localStorage.setItem("blockNumber",t)}return window.localStorage.getItem("blockNumber")}static async getCachedNetworkData(e){return await e.findOne("networkData")}static getPayspecContract(e,t){if(!e)e=i.givenProvider;let a=new i(e);return new a.eth.Contract(o,s.matic_network.payspec.address,t)}static getTokenContract(e,t){if(!e)e=i.givenProvider;let a=new i(e);return new a.eth.Contract(r,s.matic_network._0xbitcoin.address,t)}static async getWeb3ProviderDetails(){let e=new i(i.givenProvider);return{chainId:await e.eth.getChainId()}}static async approveTokensToPayspec(t){let a={from:t},n=e.getPayspecContract(),i=n.options.address,s=e.getTokenContract(),o=(s.options.address,21e14);await s.methods.approve(i,o).send(a)}static async startBuyoutOrderWeb3(t){let a=t.item,n={description:a.description,nonce:a.nonce,token:a.token,amountDue:a.amountDue,payTo:a.payTo,feeAddresses:a.feeAddresses,feePercents:a.feePercents,expiresAt:a.expiresAt,invoiceUUID:a.invoiceUUID},i=e.getPayspecContract();if(!i)return{success:!1,error:"No valid web3 provider"};let s={from:t.publicAddress};try{let e=await i.methods.createAndPayInvoice(n.description,n.nonce,n.token,n.amountDue,n.payTo,n.feeAddresses,n.feePercents,n.expiresAt,n.invoiceUUID).send(s);return{success:!0,ethTx:e}}catch(o){return{success:!1,error:o}}return{success:!1}}static async startCancelOrderWeb3(t){let a=t.item,n={description:a.description,nonce:a.nonce,token:a.token,amountDue:a.amountDue,payTo:a.payTo,feeAddresses:a.feeAddresses,feePercents:a.feePercents,expiresAt:a.expiresAt,invoiceUUID:a.invoiceUUID},i=e.getPayspecContract();if(!i)return{success:!1,error:"No valid web3 provider"};let s={from:t.publicAddress};try{let e=await i.methods.cancelInvoice(n.description,n.nonce,n.token,n.amountDue,n.payTo,n.feeAddresses,n.feePercents,n.expiresAt,n.invoiceUUID).send(s);return{success:!0,ethTx:e}}catch(o){return{success:!1,error:o}}return{success:!1}}static async formatExpiration_client(t){let a=await e.getOrCacheNetworkBlockNumber_client(),n=30,i=60*n;if(0==t)return"Never";if(t<a)return"Expired";let s=t-a,o=Math.ceil(s/i);return o>24?Math.floor(o/24).toString().concat("d"):Math.ceil(s/i).toString().concat("hr")}static formatTokenAmount(e,t){return(e/Math.pow(10,t)).toFixed(t)}static formattedTokenAmountToRaw(e,t){return Math.floor(e*Math.pow(10,t))}static async getWalletDetails(t){let a=await e.getWeb3ProviderDetails(),n={publicAddress:t},i=e.getPayspecContract(),s=i.options.address,o=e.getTokenContract(),r=(o.options.address,{});try{n.tokensBalance=await o.methods.balanceOf(t).call(r),n.tokensApprovedToPayspec=await o.methods.allowance(t,s).call(r),n.tokensBalanceFormatted=e.formatTokenAmount(n.tokensBalance,8),n.tokensApprovedToPayspecFormatted=e.formatTokenAmount(n.tokensApprovedToPayspec,8)}catch(l){console.log(l)}return{success:!0,walletdetails:n,web3details:a,paySpecContractAddress:s}}static async getPaySpecOrderPaidStatus(t){let a=e.getNetworkDetails().dedicated_rpc,n=e.getPayspecContract(a),i={},s=await n.methods.getInvoicePayer(t).call(i);return s}static async getPaySpecOrderExpiredStatus(t){let a=e.getNetworkDetails().dedicated_rpc,n=e.getPayspecContract(a),i={},s=await n.methods.invoiceHasExpired(t).call(i);return s}static async getPaySpecOrderCancelledStatus(t){let a=e.getNetworkDetails().dedicated_rpc,n=e.getPayspecContract(a),i={},s=await n.methods.invoiceWasCancelled(t).call(i);return s}static getExpectedInvoiceUUID(e){var t=e.payspecContractAddress,a=e.description,i=e.nonce,s=e.token,o=e.amountDue,r=e.payTo,l={t:"address[]",v:e.feeAddresses},c={t:"uint[]",v:e.feePercents},d=e.expiresAt;return console.log("meep ",e),console.log("meep2",t,a,i,s,o,r,l,c,d),n.soliditySha3(t,a,i,s,o,r,l,c,d)}}},"37e8":function(e,t,a){const n=a("3e0c"),i=a("a284"),s=a("7767");e.exports=class e{constructor(){}static getItemTypeByInternalName(e){return n[e]}static allowedToSellItem(t){return e.allowedToMoveItem(t)}static allowedToMoveItem(t){return!e.itemIsEscrowedForMarketOrder(t)&&(!e.itemIsEscrowedForProductionSlot(t)&&(!e.itemHasRemainderStackPending(t)&&(!e.itemHasSalvagingPending(t)&&!e.itemHasStackAbsorbtionPending(t))))}static itemIsEscrowedForMarketOrder(e){return null!=e.escrowedForMarketOrder}static itemIsEscrowedForProductionSlot(e){return null!=e.escrowedForProductionSlot}static getAllowedToMoveQueryById(t){return e.getAllowedToMoveQueryConcatenation({_id:t})}static getAllowedToMoveQueryConcatenation(e){let t=Object.assign({},e);return t.escrowedForMarketOrder=null,t.escrowedForProductionSlot=null,t.equippedToUnit=null,t.stackingIntoItemId=null,t.absorbingStackItemId=null,t.quantityToSalvage=null,t.remainingQuantityToSpawn=null,t}static getMaxStackSize(){return 5e3}static async getContainerForItem(e,t){return await t.findById("itemContainer",e.containerId)}static async spawnNewItem(e,t){if(!t)return console.log("WARN: cannot spawn item, mongoInterface null"),null;if(!e.spawnLockId)return console.trace("WARN: Tried to spawn item with null spawnLockId"),null;if(e.containerId&&e.internalName&&e.stackQuantity&&e.stackQuantity>0){e.escrowedForMarketOrder=void 0;let a=await t.insertOne("items",e);return a}return console.log("WARN: could not spawn item ",e),null}static async getItemsWithinContainer(e,t){let a=await t.findAll("items",{containerId:e._id,escrowedForMarketOrder:void 0,equippedToUnit:void 0});return a}static async transferOneItemToContainer(t,a,n){let s=a._id;return i.isValidObjectId(s)?e.allowedToMoveItem(t)?await n.updateAndFindOne("items",e.getAllowedToMoveQueryById(t._id),{containerId:s}):(console.trace("Error: cannot transfer item while it is in that state ",t),null):(console.trace("Error: cannot transfer item to container with invalid id ",s),null)}static async spawnRemainderStackForItem(t,a){if(!t)return console.trace("Could not spawn remainder stack for ",t),null;let n=t.remainingQuantityToSpawn;if(!t.remainingQuantityToSpawn||t.childStackLockId)if(0!=n){if(n>0){try{await e.spawnNewItem({containerId:t.containerId,internalName:t.internalName,stackQuantity:n,spawnLockId:t.childStackLockId},a)}catch(i){console.trace(i)}let s=await a.findOne("items",{spawnLockId:t.childStackLockId});s&&await a.updateCustomAndFindOne("items",{_id:t._id},{$unset:{remainingQuantityToSpawn:void 0,childStackLockId:void 0}})}}else await a.updateCustomAndFindOne("items",{_id:t._id},{$unset:{remainingQuantityToSpawn:void 0,childStackLockId:void 0}});else console.trace("WARN: Item has remainingQuantityToSpawn but no childStackLockId!! ",t)}static itemHasStackAbsorbtionPending(e){return null!=e.absorbingStackItemId||null!=e.stackingIntoItemId}static itemHasSalvagingPending(e){return null!=e.quantityToSalvage||null!=e.beingSalvagedFromItemId}static itemHasRemainderStackPending(e){return null!=e.remainingQuantityToSpawn}static async removeItemContainer(e,t){await t.deleteMany("items",{containerId:e._id}),await t.deleteOne("itemContainer",{_id:e._id})}static async getContainerWithinUnit(t,a){let n=s.getPlayerOwnerAddressForUnit(t);return await e.getContainerFromPlayerAndUnitOwner(n,t._id,a)}static async getContainerFromPlayerAndUnitOwner(e,t,a){if(e=e.toLowerCase(),!t)return console.log("WARN: Cannot get container with invalid containerOwnerId"),null;if(!e)return console.log("WARN: Cannot create container with null publicAddress"),null;let n=await a.findById("units",t);if(n){let t=n._id,i=await a.findOne("itemContainer",{ownerAddress:e,encapsulatingUnitId:t});return i||(await a.insertOne("itemContainer",{ownerAddress:e,encapsulatingUnitId:t}),i=await a.findOne("itemContainer",{ownerAddress:e,encapsulatingUnitId:t})),i}return console.log("WARN: could not find container for ",e,n),null}static async playerAddressHasAccessToContainer(e,t,a){let n=await a.findOne("activePlayers",{publicAddress:e});if(n){let e=await a.findById("itemContainer",t._id),o=e.ownerAddress.toLowerCase()==n.publicAddress.toLowerCase(),r=await a.findById("units",n.possessedUnitId),l=e.encapsulatingUnitId,c=await a.findOne("units",{_id:l});if(!c)return console.log("WARN: null containingUnit for playerAddressHasAccessToContainer"),!1;if(o){if(i.documentIdsAreEqual(n.possessedUnitId,l))return!0;let e=await s.playerDockedInStation(n,a);if(e&&i.documentIdsAreEqual(e,l))return!0;if(e&&c.dockedInStation&&s.playerOwnsUnit(n,c)&&i.documentIdsAreEqual(c.dockedInStation,e))return!0}if(i.documentIdsAreEqual(r.lootingUnitWithId,l))return!0}return console.log("WARN: DOES NOT HAVE ACCESS",e,container),!1}}},"3e0c":function(e){e.exports=JSON.parse('{"metalscrap":{"internalName":"metalscrap","name":"Metal Scrap","iconName":"metal1","volume":1,"itemClass":"commodity"},"vanadium":{"internalName":"vanadium","name":"Vanadium","iconName":"metal1","volume":2,"itemClass":"commodity"},"tritium ":{"internalName":"tritium ","name":"Tritium","iconName":"metal1","volume":2,"itemClass":"commodity"},"uranium":{"internalName":"uranium","name":"Uranium","iconName":"metal1","volume":2,"itemClass":"commodity"},"nanocrystals":{"internalName":"nanocrystals","name":"Nano Crystals","iconName":"metal1","volume":2,"itemClass":"commodity"},"ionizedfluid":{"internalName":"ionizedfluid","name":"Ionized Fluid","iconName":"metal1","volume":2,"itemClass":"commodity"},"carbonizedmembranes":{"internalName":"carbonizedmembranes","name":"Carbonized Membranes","iconName":"metal1","volume":2,"itemClass":"commodity"},"supercapacitor":{"internalName":"supercapacitor","name":"Supercapacitor","iconName":"metal1","volume":2,"itemClass":"component"},"fuelcell":{"internalName":"fuelcell","name":"Fuel Cell","iconName":"metal1","volume":2,"itemClass":"component"},"energycore":{"internalName":"energycore","name":"Energy Core","iconName":"metal1","volume":2,"itemClass":"component"},"shieldbattery":{"internalName":"shieldbattery","name":"Shield Battery","iconName":"metal1","volume":2,"itemClass":"component"},"integratedcpu":{"internalName":"integratedcpu","name":"Integrated CPU","iconName":"metal1","volume":2,"itemClass":"component"},"reinforcedarmorplate":{"internalName":"reinforcedarmorplate","name":"Reinforced Armor Plate","iconName":"metal1","volume":2,"itemClass":"component"},"fluxreactor":{"internalName":"fluxreactor","name":"Flux Reactor","iconName":"metal1","volume":2,"itemClass":"component"},"teslacoil":{"internalName":"teslacoil","name":"Tesla Coil","iconName":"metal1","volume":2,"itemClass":"component"},"warpcore":{"internalName":"warpcore","name":"Warp Core","iconName":"metal1","volume":2,"itemClass":"component"},"roguephotoncannon":{"internalName":"roguephotoncannon","name":"Rogue Photon Cannon","iconName":"laser1","volume":5,"itemClass":"equipment"},"devcannon":{"internalName":"devcannon","name":"Dev Cannon","iconName":"laser1","volume":5,"itemClass":"equipment"},"civiliancannon":{"internalName":"devcannon","name":"Dev Cannon","iconName":"laser1","volume":5,"itemClass":"equipment"},"nymph":{"internalName":"nymph","name":"nymph","iconName":"laser1","volume":250,"itemClass":"ship"},"katana":{"internalName":"katana","name":"Katana","iconName":"laser1","volume":250,"itemClass":"ship"},"hedron":{"internalName":"hedron","name":"Hedron","iconName":"laser1","volume":2250,"itemClass":"ship"},"lightrailgun":{"internalName":"lightrailgun","name":"Light Railgun","iconName":"laser1","volume":5,"itemClass":"equipment"},"hypercannon":{"internalName":"hypercannon","name":"Hypercannon","iconName":"laser1","volume":5,"itemClass":"equipment"},"vectormissilebay":{"internalName":"vectormissilebay","name":"Vector Missile Bay","iconName":"laser1","volume":5,"itemClass":"equipment"},"rapidrocketlauncher":{"internalName":"rapidrocketlauncher","name":"Rapid Rocket Launcher","iconName":"laser1","volume":5,"itemClass":"equipment"},"gatlingcannon":{"internalName":"gatlingcannon","name":"Gatling Cannon","iconName":"laser1","volume":5,"itemClass":"equipment"},"smallenergyneutralizer":{"internalName":"smallenergyneutralizer","name":"Small Energy Neutralizer","iconName":"metal1","volume":5,"itemClass":"equipment"},"mediumenergyneutralizer":{"internalName":"mediumenergyneutralizer","name":"Medium Energy Neutralizer","iconName":"metal1","volume":15,"itemClass":"equipment"},"smallshieldregenerator":{"internalName":"smallshieldregenerator","name":"Small Shield Regenerator","iconName":"metal1","volume":5,"itemClass":"equipment"},"smallshieldrecharger":{"internalName":"smallshieldrecharger","name":"Small Shield Recharger","iconName":"metal1","volume":5,"itemClass":"equipment"},"smallbatteryrecharger":{"internalName":"smallbatteryrecharger","name":"Small Battery Recharger","iconName":"metal1","volume":5,"itemClass":"equipment"},"smallcapacitorbank":{"internalName":"smallcapacitorbank","name":"Small Capactior Bank","iconName":"metal1","volume":2,"itemClass":"equipment"},"smallcoprocessor":{"internalName":"smallcoprocessor","name":"Small Co-Processor","iconName":"metal1","volume":2,"itemClass":"equipment"},"smallcargoexpansion":{"internalName":"smallcargoexpansion","name":"Small Cargo Expansion","iconName":"metal1","volume":2,"itemClass":"equipment"},"atomicpropulsor":{"internalName":"atomicpropulsor","name":"Atomic Propulsor","iconName":"metal1","volume":2,"itemClass":"equipment"},"warpcorejammer":{"internalName":"warpcorejammer","name":"Warpcore Jammer","iconName":"metal1","volume":2,"itemClass":"equipment"},"basicarmorplating":{"internalName":"basicarmorplating","name":"Basic Armor Plating","iconName":"metal1","volume":3,"itemClass":"equipment"},"heavyarmorplating":{"internalName":"heavyarmorplating","name":"Heavy Armor Plating","iconName":"metal1","volume":3,"itemClass":"equipment"}}')},4:function(e,t){},"499a":function(e){e.exports=JSON.parse('[{"type":"constructor","stateMutability":"nonpayable","inputs":[{"type":"string","name":"name_","internalType":"string"},{"type":"string","name":"symbol_","internalType":"string"},{"type":"uint8","name":"decimals_","internalType":"uint8"},{"type":"address","name":"childChainManager","internalType":"address"}]},{"type":"event","name":"Approval","inputs":[{"type":"address","name":"owner","internalType":"address","indexed":true},{"type":"address","name":"spender","internalType":"address","indexed":true},{"type":"uint256","name":"value","internalType":"uint256","indexed":false}],"anonymous":false},{"type":"event","name":"MetaTransactionExecuted","inputs":[{"type":"address","name":"userAddress","internalType":"address","indexed":false},{"type":"address","name":"relayerAddress","internalType":"address payable","indexed":false},{"type":"bytes","name":"functionSignature","internalType":"bytes","indexed":false}],"anonymous":false},{"type":"event","name":"RoleAdminChanged","inputs":[{"type":"bytes32","name":"role","internalType":"bytes32","indexed":true},{"type":"bytes32","name":"previousAdminRole","internalType":"bytes32","indexed":true},{"type":"bytes32","name":"newAdminRole","internalType":"bytes32","indexed":true}],"anonymous":false},{"type":"event","name":"RoleGranted","inputs":[{"type":"bytes32","name":"role","internalType":"bytes32","indexed":true},{"type":"address","name":"account","internalType":"address","indexed":true},{"type":"address","name":"sender","internalType":"address","indexed":true}],"anonymous":false},{"type":"event","name":"RoleRevoked","inputs":[{"type":"bytes32","name":"role","internalType":"bytes32","indexed":true},{"type":"address","name":"account","internalType":"address","indexed":true},{"type":"address","name":"sender","internalType":"address","indexed":true}],"anonymous":false},{"type":"event","name":"Transfer","inputs":[{"type":"address","name":"from","internalType":"address","indexed":true},{"type":"address","name":"to","internalType":"address","indexed":true},{"type":"uint256","name":"value","internalType":"uint256","indexed":false}],"anonymous":false},{"type":"function","stateMutability":"view","outputs":[{"type":"uint256","name":"","internalType":"uint256"}],"name":"CHILD_CHAIN_ID","inputs":[]},{"type":"function","stateMutability":"view","outputs":[{"type":"bytes","name":"","internalType":"bytes"}],"name":"CHILD_CHAIN_ID_BYTES","inputs":[]},{"type":"function","stateMutability":"view","outputs":[{"type":"bytes32","name":"","internalType":"bytes32"}],"name":"DEFAULT_ADMIN_ROLE","inputs":[]},{"type":"function","stateMutability":"view","outputs":[{"type":"bytes32","name":"","internalType":"bytes32"}],"name":"DEPOSITOR_ROLE","inputs":[]},{"type":"function","stateMutability":"view","outputs":[{"type":"string","name":"","internalType":"string"}],"name":"ERC712_VERSION","inputs":[]},{"type":"function","stateMutability":"view","outputs":[{"type":"uint256","name":"","internalType":"uint256"}],"name":"ROOT_CHAIN_ID","inputs":[]},{"type":"function","stateMutability":"view","outputs":[{"type":"bytes","name":"","internalType":"bytes"}],"name":"ROOT_CHAIN_ID_BYTES","inputs":[]},{"type":"function","stateMutability":"view","outputs":[{"type":"uint256","name":"","internalType":"uint256"}],"name":"allowance","inputs":[{"type":"address","name":"owner","internalType":"address"},{"type":"address","name":"spender","internalType":"address"}]},{"type":"function","stateMutability":"nonpayable","outputs":[{"type":"bool","name":"","internalType":"bool"}],"name":"approve","inputs":[{"type":"address","name":"spender","internalType":"address"},{"type":"uint256","name":"amount","internalType":"uint256"}]},{"type":"function","stateMutability":"view","outputs":[{"type":"uint256","name":"","internalType":"uint256"}],"name":"balanceOf","inputs":[{"type":"address","name":"account","internalType":"address"}]},{"type":"function","stateMutability":"view","outputs":[{"type":"uint8","name":"","internalType":"uint8"}],"name":"decimals","inputs":[]},{"type":"function","stateMutability":"nonpayable","outputs":[{"type":"bool","name":"","internalType":"bool"}],"name":"decreaseAllowance","inputs":[{"type":"address","name":"spender","internalType":"address"},{"type":"uint256","name":"subtractedValue","internalType":"uint256"}]},{"type":"function","stateMutability":"nonpayable","outputs":[],"name":"deposit","inputs":[{"type":"address","name":"user","internalType":"address"},{"type":"bytes","name":"depositData","internalType":"bytes"}]},{"type":"function","stateMutability":"payable","outputs":[{"type":"bytes","name":"","internalType":"bytes"}],"name":"executeMetaTransaction","inputs":[{"type":"address","name":"userAddress","internalType":"address"},{"type":"bytes","name":"functionSignature","internalType":"bytes"},{"type":"bytes32","name":"sigR","internalType":"bytes32"},{"type":"bytes32","name":"sigS","internalType":"bytes32"},{"type":"uint8","name":"sigV","internalType":"uint8"}]},{"type":"function","stateMutability":"pure","outputs":[{"type":"uint256","name":"","internalType":"uint256"}],"name":"getChainId","inputs":[]},{"type":"function","stateMutability":"view","outputs":[{"type":"bytes32","name":"","internalType":"bytes32"}],"name":"getDomainSeperator","inputs":[]},{"type":"function","stateMutability":"view","outputs":[{"type":"uint256","name":"nonce","internalType":"uint256"}],"name":"getNonce","inputs":[{"type":"address","name":"user","internalType":"address"}]},{"type":"function","stateMutability":"view","outputs":[{"type":"bytes32","name":"","internalType":"bytes32"}],"name":"getRoleAdmin","inputs":[{"type":"bytes32","name":"role","internalType":"bytes32"}]},{"type":"function","stateMutability":"view","outputs":[{"type":"address","name":"","internalType":"address"}],"name":"getRoleMember","inputs":[{"type":"bytes32","name":"role","internalType":"bytes32"},{"type":"uint256","name":"index","internalType":"uint256"}]},{"type":"function","stateMutability":"view","outputs":[{"type":"uint256","name":"","internalType":"uint256"}],"name":"getRoleMemberCount","inputs":[{"type":"bytes32","name":"role","internalType":"bytes32"}]},{"type":"function","stateMutability":"nonpayable","outputs":[],"name":"grantRole","inputs":[{"type":"bytes32","name":"role","internalType":"bytes32"},{"type":"address","name":"account","internalType":"address"}]},{"type":"function","stateMutability":"view","outputs":[{"type":"bool","name":"","internalType":"bool"}],"name":"hasRole","inputs":[{"type":"bytes32","name":"role","internalType":"bytes32"},{"type":"address","name":"account","internalType":"address"}]},{"type":"function","stateMutability":"nonpayable","outputs":[{"type":"bool","name":"","internalType":"bool"}],"name":"increaseAllowance","inputs":[{"type":"address","name":"spender","internalType":"address"},{"type":"uint256","name":"addedValue","internalType":"uint256"}]},{"type":"function","stateMutability":"view","outputs":[{"type":"string","name":"","internalType":"string"}],"name":"name","inputs":[]},{"type":"function","stateMutability":"nonpayable","outputs":[],"name":"renounceRole","inputs":[{"type":"bytes32","name":"role","internalType":"bytes32"},{"type":"address","name":"account","internalType":"address"}]},{"type":"function","stateMutability":"nonpayable","outputs":[],"name":"revokeRole","inputs":[{"type":"bytes32","name":"role","internalType":"bytes32"},{"type":"address","name":"account","internalType":"address"}]},{"type":"function","stateMutability":"view","outputs":[{"type":"string","name":"","internalType":"string"}],"name":"symbol","inputs":[]},{"type":"function","stateMutability":"view","outputs":[{"type":"uint256","name":"","internalType":"uint256"}],"name":"totalSupply","inputs":[]},{"type":"function","stateMutability":"nonpayable","outputs":[{"type":"bool","name":"","internalType":"bool"}],"name":"transfer","inputs":[{"type":"address","name":"recipient","internalType":"address"},{"type":"uint256","name":"amount","internalType":"uint256"}]},{"type":"function","stateMutability":"nonpayable","outputs":[{"type":"bool","name":"","internalType":"bool"}],"name":"transferFrom","inputs":[{"type":"address","name":"sender","internalType":"address"},{"type":"address","name":"recipient","internalType":"address"},{"type":"uint256","name":"amount","internalType":"uint256"}]},{"type":"function","stateMutability":"nonpayable","outputs":[],"name":"withdraw","inputs":[{"type":"uint256","name":"amount","internalType":"uint256"}]}]')},5:function(e,t){},5508:function(e,t,a){},5556:function(e,t,a){const n=a("0764"),i=a("37e8"),s=a("03f3");e.exports=class e{static getSalvageData(e){return e?s[e.internalName]:null}static getItemsOutputForSalvaging(t){let a=e.getSalvageData(t);return a?a.output:null}static async startSalvagingItem(t,a,n){let s=await n.findById("items",t._id),o=parseInt(+a);if(isNaN(o))return{success:!1,error:"cannot salvage that quantity "};if(!i.allowedToMoveItem(s))return console.trace("Error: cannot salvage item while it is in that state ",s),null;if(o>s.stackQuantity)return{success:!1,error:"cannot salvage that quantity "};if(o&&o>0){let t=await n.updateAndFindOne("items",i.getAllowedToMoveQueryById(s._id),{quantityToSalvage:o}),a=t.value;return await e.spawnRemainingSalvageForItem(a,n),a}return null}static async spawnRemainingSalvageForItem(t,a){let s=t.quantityToSalvage;if(!s||0==parseInt(s))return await a.updateCustomAndFindOne("items",{_id:t._id},{$unset:{quantityToSalvage:void 0}}),void console.log("WARN: found quantity to salvage of 0 ");let o=[],r=e.getItemsOutputForSalvaging(t);for(var l of r){let e=parseInt(l.quantity)*parseInt(s);try{let s=await i.spawnNewItem({containerId:t.containerId,internalName:l.internalName,beingSalvagedFromItemId:t._id,stackQuantity:e,spawnLockId:n.getRandomHash()},a),r=await a.findById("items",s.insertedId);o.push(r)}catch(u){console.trace("could not spawn duplicate salvage output (duplicate?)",u)}}let c=await a.findAll("items",{beingSalvagedFromItemId:t._id});if(c.length>=r.length){console.log("all salvage outputs found in database ",t);await a.deleteOne("items",{_id:t._id})}for(var d of o)await e.finishSalvageItemOutput(d,a)}static async finishSalvageItemOutput(e,t){console.log("finishSalvageItemOutput",e);let a=await t.findById("items",e._id);if(a&&a.beingSalvagedFromItemId){let e=await t.findById("items",a.beingSalvagedFromItemId);if(console.log("parentItem",e),!e){await t.updateCustomAndFindOne("items",{_id:a._id},{$unset:{beingSalvagedFromItemId:void 0}})}}}}},"56d7":function(e,t,a){"use strict";a.r(t);var n=a("2b0e"),i=a("2b88"),s=a.n(i),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"antialiased text-gray-900 flex flex-col min-h-screen bg-gray-200",attrs:{id:"app"}},[a("router-view",{staticClass:"flex-1"}),a("portal-target",{attrs:{name:"modals"}})],1)},r=[],l=(a("034f"),a("2877")),c={},d=Object(l["a"])(c,o,r,!1,null,null,null),u=d.exports,p=a("8c4f"),m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("nav",{staticClass:"w-full z-10 pin-t",attrs:{id:"header"}},[a("div",{staticClass:"w-full mx-auto flex flex-wrap bg-gray-900 items-center justify-between mt-0 py-3 bg-white px-4"},[e._m(0),a("div",{staticClass:"  flex items-center w-auto mt-2 lg:mt-0 bg-grey-lightest md:bg-transparent z-20",attrs:{id:"nav-content"}},[a("div",{staticClass:" text-white lg:flex justify-end flex-1 items-center"},[a("MetamaskDropdown",{attrs:{acctAddress:e.activeAccountAddress,providerNetworkID:e.providerNetworkID}})],1)])])]),a("div",{staticClass:"lg:flex  "},[a("GameCanvas",{ref:"gameCanvas"})],1),a("Footer")],1)},h=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pl-4"},[a("a",{staticClass:"text-white text-base no-underline hover:no-underline font-extrabold text-xl",attrs:{href:"#"}},[e._v("\n\t\t\t\t\tEthereum Space War\n\t\t\t\t")])])}],y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"relative"},[e.open?n("div",{staticClass:"fixed inset-0",on:{click:function(t){e.open=!1}}}):e._e(),n("button",{staticClass:"relative flex items-center focus:outline-none",on:{click:function(t){e.open=!e.open}}},[1==e.providerNetworkID?n("img",{staticClass:"rounded-full h-8 w-5",attrs:{src:a("1711"),alt:"ETH avatar"}}):e._e(),137==e.providerNetworkID?n("img",{staticClass:"rounded-full h-8 w-6",attrs:{src:a("dfb8"),alt:"Matic avatar"}}):e._e(),n("span",{staticClass:"ml-2 font-medium truncate",staticStyle:{"max-width":"80px"}},[e._v(e._s(e.acctAddress))]),n("svg",{staticClass:"ml-1 h-5 w-5 fill-current text-gray-700",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}},[n("path",{attrs:{d:"M15.3 9.3a1 1 0 0 1 1.4 1.4l-4 4a1 1 0 0 1-1.4 0l-4-4a1 1 0 0 1 1.4-1.4l3.3 3.29 3.3-3.3z"}})])]),n("transition",{attrs:{"enter-active-class":"transition-all transition-fastest ease-out-quad","leave-active-class":"transition-all transition-faster ease-in-quad","enter-class":"opacity-0 scale-70","enter-to-class":"opacity-100 scale-100","leave-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-70"}},[e.open?n("div",{staticClass:"origin-top-right absolute right-0 mt-2 w-256 bg-black rounded-lg border shadow-md py-2"},[n("ul",[n("li",[n("a",{staticClass:"block px-4 py-2 hover:bg-indigo-500 hover:text-white",attrs:{href:"https://explorer.matic.network/address/"+e.acctAddress,target:"_blank"}},[e._v(e._s(e.acctAddress))])]),n("li",[n("a",{staticClass:"block px-4 py-2 hover:bg-indigo-500 hover:text-white",attrs:{href:"https://explorer.matic.network/address/"+e.contractAddress,target:"_blank"}},[e._v("View Contract In Explorer")])]),n("hr"),n("li",[n("a",{staticClass:"block px-4 py-2 hover:bg-indigo-500 hover:text-white",attrs:{href:"#"},on:{click:e.disconnect}},[e._v("Sign out")])])])]):e._e()])],1)},g=[];const f=a("499a"),b=a("c636"),v=(a("a3ae"),a("2ba3")),_=a("9424"),w=a("901e"),C=a("99e5");C.utils;var x,k,T,S,I,A,P,D,M={init(){console.log("init web3 helper");window.ethereum.chainId;function e(e){window.location.reload()}function t(e){window.location.reload()}window.ethereum.on("chainChanged",e),window.ethereum.on("accountsChanged",t)},ethereumChainID(){return 1},maticChainID(){return 137},async getConnectedAccounts(){const e=await window.ethereum.request({method:"eth_requestAccounts"});return e},async getProviderNetworkID(){var e=await window.ethereum.chainId;return console.log("net id is",e),e},async getTokenContract(e,t){var a=e.eth.contract(f).at(t);return a},async getTipjarContractAddress(){var e=v.contracts.matic_network.TippingJar.address;return e},async getTipjarContract(e){var t=await this.getTipjarContractAddress(),a=e.eth.contract(b).at(t);return a},async getTokensAllowance(e,t,a){var n=new C(C.givenProvider);console.log("get token allowance",e);var i=new n.eth.Contract(f,e);console.log("meep",i,a,t);var s=0;return await new Promise((e,n)=>{i.methods.allowance(t,a).call({}).then((function(t){console.log("we got ",t),s=t,e(t)})).catch((function(e){console.error(e),n(e)}))}),console.log("allowance!!! ",s),s},async hasEnoughAllowance(e,t,a,n){console.log("hasEnoughAllowance",e,t,a,n);var i=await this.getTokensAllowance(_.assets[a]["MaticContract"],e,t),s=this.rawAmountToFormatted(i,_.assets[a]["Decimals"]);return console.log("num Approved ",a,i),console.log("num Approved f ",s),parseFloat(s)>parseFloat(n)},async getTipjarTokensBalance(e,t){var a=new C(C.givenProvider),n=v.contracts.matic_network.TippingJar.address,i=new a.eth.Contract(b,n,{}),s=await i.methods.getBalance(e,t).call();return s},async getMaticTokensBalance(e,t){var a=new C(C.givenProvider),n=new a.eth.Contract(f,e,{}),i=await n.methods.balanceOf(t).call();return i},rawAmountToFormatted(e,t){return console.log("formatting",e,t),(e*Math.pow(10,-1*t)).toFixed(t)},formattedAmountToRaw(e,t){var a=new w(10).exponentiatedBy(t);return a.multipliedBy(e).toFixed()},async connect(){const e=await window.ethereum.request({method:"eth_requestAccounts"});return e},async disconnect(){console.log("disconnecting");await window.ethereum.request({method:"eth_requestAccounts",params:[{eth_accounts:{}}]});window.location.reload()}},U=M,N={name:"MetamaskDropdown",props:["acctAddress","providerNetworkID","contractAddress"],data(){return{open:!1}},methods:{disconnect(){U.disconnect()}}},E=N,O=Object(l["a"])(E,y,g,!1,null,null,null),R=O.exports,L=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"relative w-full  ",staticStyle:{"min-height":"400px"}},[e.connected?e._e():a("div",{staticClass:"p-12 text-center  w-1/2  ",staticStyle:{margin:"0 auto"}},[e.assetsLoaded||e.connectionError?e._e():a("div",[a("div",[e._v(" Loading Assets... ")]),e._m(0),a("div",[e._v(" "+e._s(e.loadingStepName)+" ")])]),a("div",[e.assetsLoaded?a("div",{staticClass:"cursor-pointer rounded bg-green-300 text-black p-2 m-2",on:{click:e.connectToServer}},[e._v(" Connect ")]):e._e()]),e.connectionError?a("div",[a("div",{staticClass:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",attrs:{role:"alert"}},[a("strong",{staticClass:"font-bold"},[e._v("Error.")]),a("br"),a("span",{staticClass:"block sm:inline"},[e._v(e._s(e.connectionError))])])]):e._e()]),a("div",{attrs:{id:"gamecanvas"}}),a("OverviewPanel",{ref:"overview",class:{hidden:!e.connected},attrs:{rightClickRowCallback:e.handleOverviewRowClicked,localActionCallback:e.handleLocalActionCommand,commandCallback:e.handleClientCommand}}),a("StationPanel",{ref:"stationpanel",class:{hidden:!e.connected},attrs:{commandCallback:e.handleClientCommand,localActionCallback:e.handleLocalActionCommand,dataRequestCallback:e.handleClientDataRequest,devToolsCallback:e.handleDevToolsRequest,handleItemActionMenuCallback:e.handleItemActionMenuCallback}}),a("RightClickMenu",{ref:"rclickmenu",attrs:{commandCallback:e.handleClientCommand,localActionCallback:e.handleLocalActionCommand}}),a("ItemActionMenu",{ref:"itemactionmenu",attrs:{localActionCallback:e.handleLocalActionCommand,dataRequestCallback:e.handleClientDataRequest}}),a("ShipHud",{ref:"shiphud",class:{hidden:!e.connected}}),a("ShipModulesPanel",{ref:"shipmodulespanel",class:{hidden:!e.connected},attrs:{commandCallback:e.handleClientCommand}}),a("NavigationPanel",{ref:"navigationpanel",class:{hidden:!e.connected},attrs:{commandCallback:e.handleClientCommand,localActionCallback:e.handleLocalActionCommand}}),a("StarMap",{ref:"starmap",class:{hidden:!e.connected},attrs:{commandCallback:e.handleClientCommand,localActionCallback:e.handleLocalActionCommand}}),a("LootPanel",{ref:"lootpanel",class:{hidden:!e.connected},attrs:{localActionCallback:e.handleLocalActionCommand,commandCallback:e.handleClientCommand,dataRequestCallback:e.handleClientDataRequest,handleItemActionMenuCallback:e.handleItemActionMenuCallback}}),a("ShipCargoPanel",{ref:"shipcargopanel",class:{hidden:!e.connected},attrs:{commandCallback:e.handleClientCommand,dataRequestCallback:e.handleClientDataRequest,handleItemActionMenuCallback:e.handleItemActionMenuCallback}})],1)},q=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"breeding-rhombus-spinner ",staticStyle:{margin:"8em auto"}},[a("div",{staticClass:"rhombus child-1"}),a("div",{staticClass:"rhombus child-2"}),a("div",{staticClass:"rhombus child-3"}),a("div",{staticClass:"rhombus child-4"}),a("div",{staticClass:"rhombus child-5"}),a("div",{staticClass:"rhombus child-6"}),a("div",{staticClass:"rhombus child-7"}),a("div",{staticClass:"rhombus child-8"}),a("div",{staticClass:"rhombus big"})])}],V=a("5a89"),F=a("b5dd"),z=a("34ad");a("3191");class j{constructor(e){this.texLoader=e}async preloadAssets(){let e=["corona","redeclipse","simplenebula","bluenebula","greennebula","purplenebula","darknebula"];for(var t of e)await this.createMaterialArray(t)}async getMesh(e){const t=new V["BoxGeometry"](8e3,8e3,8e3),a=await this.createMaterialArray(e),n=new V["Mesh"](t,a);return n}async getMaterial(e){return await this.createMaterialArray(e)}async createMaterialArray(e){const t=this.getSkyboxImageTextureData(e);let a=[];for(var n of t){let e=await this.texLoader.loadTexture(n.shortName,n.fullPath),t=new V["MeshBasicMaterial"]({map:e,side:V["BackSide"]});a.push(t)}return a}getSkyboxImageTextureData(e){const t="../assets/skybox/",a=t+e,n=".png";var i=["front","back","top","bottom","right","left"];const s=i.map(t=>{let i=a+"/"+t+n,s=e+"_"+t;return{shortName:s,fullPath:i}});return s}}class B{constructor(e){this.textureLoader=e}async makeReticle(e){var t=await this.textureLoader.loadTexture("targetlock");e&&(t=await this.textureLoader.loadTexture("targetlock_green"));var a=new V["SpriteMaterial"]({map:t,transparent:!0}),n=new V["Sprite"](a);return n}}class H{constructor(e,t){x=e,T=t.tilesHoriz,S=t.tilesVert,I=t.minTile,A=t.maxTile,P=t.loop,x.wrapS=x.wrapT=V["RepeatWrapping"],x.repeat.set(1/T,1/S),D=I,k=!0}updateOneTick(){if(!k)return!1;D==A&&(P?D=I:k=!1);var e=D%T;let t=e/T;var a=1+Math.floor(D/T);let n=1-a/S;return x.offset.set(t,n),D+=1,!0}getUpdateCallback(){return this.updateOneTick}}a("9174");var G=a("cd29");class W{constructor(e){this.textureLoader=e}async makeSprite(e){let t=G[e];var a=await this.textureLoader.loadTexture(t.textureName),n=new H(a,t),i=new V["SpriteMaterial"]({map:a,transparent:!0}),s=new V["Sprite"](i);return s.updateTextureOneTick=n.getUpdateCallback(),console.log("sprite",s),s}}const $=a("3c84"),Y=a("faa1"),Q=new Y,J=a("7767"),Z=a("2c02");a("06b6");var X,K,ee,te,ae=a("6a87"),ne=0,ie=new Map,se=new Map,oe=new Map,re=new Map,le=new Map,ce=new Map,de=new Map,ue=[],pe=!1;const me=500;class he{constructor(e,t,a,n,i){this.player=e,this.scene=t,this.modelLoader=a,this.textureLoader=n,this.localTargetManager=i,X=new B(n),K=new W(n)}getEntitiesEventEmitter(){return Q}getClickableEntities(){return ue}getMyPlayerData(){var e=this.player.publicAddress;return re.get(e)}async clearGrid(){}async loadGrid(e,t,a){if(!pe){pe=!0,re.clear(),a&&a.length>0?a.forEach(e=>re.set(e.publicAddress,e)):console.log("WARN - no grid players"),Q.emit("entitiesChanged",this.getMyPossessedUnit(),t,e),Q.emit("playersChanged",this.getMyPlayerData(),a),ie=new Map(se),ne=0,await this.examineEntityChangesForEvents(se,t);for(const[e,t]of se.entries())if(t&&(t.stale=!0),se.set(e,t),t.grid!=ee){let e=oe.get(t.sceneObjectUUID);this.setVisibilityOfSceneObject(e,!1)}for(var n in ue=[],t){var i=t[n];if(se.has(i._id)){i.sceneObjectUUID=se.get(i._id).sceneObjectUUID,se.set(i._id,i);var s=oe.get(i.sceneObjectUUID);s&&(s.position=new V["Vector3"](i.locationVector.x,i.locationVector.y,i.locationVector.z),ue.push(s));let e=Z.unitIsActiveInSpace(i);this.setVisibilityOfSceneObject(s,e)}else{var o=i.basetype,r=ae[o].modelname,l=await this.modelLoader.loadModel(r),c=ae[o].scaleFactor;l.scale.set(c,c,c),this.scene.add(l);var d=l,u=new V["Vector3"](i.locationVector.x,i.locationVector.y,i.locationVector.z);l.position=u,d.name=o,d.userData=i,l.userData=i,i.sceneObjectUUID=l.uuid,ue.push(l),se.set(i._id,i),oe.set(i.sceneObjectUUID,l)}}for(const[e,t]of se.entries()){let t=se.get(e);if(t&&t.stale){s=oe.get(t.sceneObjectUUID);this.scene.remove(s),oe.delete(t.sceneObjectUUID),se.delete(e),console.log("removed stale object from scene ",e)}}pe=!1}}async examineEquipmentChangesForEvents(e){let t=!1;for(var a of e){let e=de.get(a.unitId);if(e){let n=e.get(a.slotId);if(n){let e=a.cooldownUntilTick,i=n.cooldownUntilTick;e&&a.engaged&&(e!=i||a.engaged!=n.engaged)&&this.playSoundForEquipmentSlotActivation(a),t=!0}}let n=a.cooldownUntilTick;n&&a.engaged&&!t&&this.playSoundForEquipmentSlotActivation(a);let i=de.get(a.unitId);i?(i.set(a.slotId,a),de.set(a.unitId,i)):(i=new Map,i.set(a.slotId,a),de.set(a.unitId,i))}}async playSoundForEquipmentSlotActivation(e){await $(Math.floor(200*Math.random()));let t=e.equipmenttype,a=J.getEquipmentTypeData(t),n=a.activation_sound_name;if(n){let t=this.findUnitWithId(e.unitId);if(!t)return void console.log("WARN: Could not play equipment sound, action unit null ");var i={playerUnit:this.getMyPossessedUnit(),actionUnit:t,soundName:n};Q.emit("entitySoundEvent",i)}}async examineEntityChangesForEvents(e,t){var a=new Map(t.map(e=>[e._id,e]));for(const[o,r]of e.entries()){var n=e.get(o);if("ship"==Z.getUnitType(n)||"capsule"==Z.getUnitType(n)){var i=a.get(o);if(null!=n.warpDestinationGridUUID&&n.warpStartTick==te-Z.getTicksToStartWarp(n)){var s={playerUnit:this.getMyPossessedUnit(),actionUnit:n,soundName:"warpout"};Q.emit("entitySoundEvent",s)}}}for(const[o,r]of a.entries()){i=a.get(o);if("ship"==Z.getUnitType(i)||"capsule"==Z.getUnitType(n)){n=se.get(o);if(null==i.warpDestinationGridUUID&&("undefined"==typeof n||n.grid!=i.grid)){s={playerUnit:this.getMyPossessedUnit(),actionUnit:n,soundName:"warpin"};Q.emit("entitySoundEvent",s)}}}}async updateAnimatedSpritesForUnits(e){for(var t of e)if(t.dead){console.log("unit is dead ",t);let e=ce.get(t._id);if(!e){let e=await K.makeSprite("ship_death_explosion");var a={playerUnit:this.getMyPossessedUnit(),actionUnit:t,soundName:"explosion_medium"};Q.emit("entitySoundEvent",a);var n=oe.get(t.sceneObjectUUID);if(n){let a=10;e.scale.set(a,a,a),e.renderOrder=102,e.position.set(n.position.x,n.position.y,n.position.z),this.scene.add(e),ce.set(t._id,e),console.log("add sprite",n,t,e)}}}for(const[i,s]of ce.entries()){let e=s.updateTextureOneTick();e||(this.scene.remove(s),ce.delete(i))}}async updateTargetLockSprites(e){for(const[s,o]of le.entries()){var t=le.get(s);t.stale=!0,le.set(s,t)}let a=this.getMyPossessedUnit();if(a){let t=a._id;for(var n of(Q.emit("targetLocksChanged",e),e))if(n.lockingUnitId==t&&n.lockComplete){let e=n.lockedUnitId,t=se.get(e),a=le.get(e);a&&(a.stale=!1,le.set(e,a));let s=!1,o=this.localTargetManager.getPrimaryTargetUnitId();if(e==o&&(s=!0),t){let a=le.get(e);var i=oe.get(t.sceneObjectUUID);if(i&&(null==a||a.isPrimaryTarget!=s)){if(a&&a.sprite){let e=a.sprite.parent;e&&e.remove(a.sprite)}let t=await X.makeReticle(s);i.add(t);let n=10;t.scale.set(n,n,n),t.renderOrder=101,le.set(e,{sprite:t,isPrimaryTarget:s,stale:!1})}}}}await this.removeAllStaleTargetReticles()}async loadEquipmentSlots(e){let t=this.getMyPossessedUnit();if(t){t._id;Q.emit("equipmentSlotsChanged",e)}this.examineEquipmentChangesForEvents(e)}async receivedGridStateFromServer(e){var t=e.entities,a=e.grid.uuid,n=e.players,i=e.targetLocks,s=e.equipmentSlots;ee=a,te=e.grid.gridTick,await this.loadGrid(e.grid,t,n),await this.loadEquipmentSlots(s),await this.updateTargetLockSprites(i),await this.updateAnimatedSpritesForUnits(t)}async update(e,t){t>0&&t<1e3&&this.lerpEntities(e,t)}async lerpEntities(e,t){ne+=t;var a=ne/me;a<0&&(a=0),a>1&&(a=1);for(const[m,h]of se.entries()){var n=ie.get(m),i=se.get(m);if(!n||!i)return;var s=new V["Vector3"](n.locationVector.x,n.locationVector.y,n.locationVector.z),o=new V["Vector3"](n.velocityVector.x,n.velocityVector.y,n.velocityVector.z).normalize(),r=new V["Vector3"](i.velocityVector.x,i.velocityVector.y,i.velocityVector.z).normalize(),l=s.lerp(i.locationVector,a),c=o.lerp(r,a),d=this.getSceneObjectForEntity(m);d.position=l;var u=new V["Vector3"](d.position.x,d.position.y,d.position.z),p=u.add(c);d.lookAt(p)}}async removeAllStaleTargetReticles(){for(const[e,t]of le.entries())if(1==t.stale){let a=t.sprite.parent;a.remove(t.sprite),le.delete(e)}}setVisibilityOfSceneObject(e,t){e.traverse((function(e){e instanceof V["Mesh"]&&(e.visible=t)}))}getDataForEntityById(e){return se.get(e)}getSceneObjectForEntity(e){let t=se.get(e);if(!t)return null;var a=t.sceneObjectUUID;return oe.get(a)}getMyPossessedUnit(){var e;for(const[n,i]of re.entries())re.get(n).publicAddress==this.player.publicAddress&&(e=re.get(n));if(e){var t=e.possessedUnitId,a=se.get(t);return a}return null}findUnitWithId(e){return se.get(e)}}var ye,ge=a("7767"),fe=a.n(ge),be=a("3431"),ve=a.n(be),_e=a("5ba3"),we="childrenofethereum";class Ce{constructor(e){this.publicAddress=e.toLowerCase()}acceptPlayerDataFromServer(e){ye=e,e&&e.playerFaction&&(we=e.playerFaction)}getPlayerData(){return ye}getSelectedFaction(){return we}async personalSignWithMetamask(e,t,a){console.log("personal signing ",e,t);var n=_e.fromUtf8(e),i=await new Promise(async(e,i)=>{a.eth.personal.sign(n,t,(function(t,a){if(t)return console.error(t);console.log("PERSONAL SIGNED:"+a),e(a)}))});return i}async web3ecRecover(e,t,a){console.log("ecrecover ",e,t,web3);var n=await new Promise(async(n,i)=>{a.eth.personal.ecRecover(_e.fromUtf8(e),t,(function(e,t){if(e)return console.error(e);console.log("ecrecover:"+t),n(t)}))});return n}}var xe,ke,Te={},Se=a("0438");class Ie{constructor(e){V["Cache"].enabled=!1,xe=new z["a"],ke=Object.keys(Se),this.loadingStepCallback=e}async loadModel(e){var t=e;if(Te[t]){var a=Te[t].clone();return console.log("loaded model from cache ",t,a),a}this.loadingStepCallback(e);var n=this.lookupAssetName(e),i="../assets/"+n;return console.log(i),new Promise((e,a)=>{xe.load(i,function(a){let n=a.scene.clone();Te[t]=a.scene,e(n)}.bind(this),void 0,(function(e){console.error(e),a(e)}))})}lookupAssetName(e){return console.log("map",Se,e),Se[e].modelpath.toString()}async preloadAssets(){for(var e in ke)await this.loadModel(ke[e])}}var Ae,Pe={},De=a("9174");const Me=Object.keys(De);class Ue{constructor(e){V["Cache"].enabled=!1,Ae=new V["TextureLoader"],this.loadingStepCallback=e}async loadTexture(e,t){var a,n=e;if(Pe[n]){var i=Pe[n].clone();return console.log("loaded texture from cache ",n,i),i}if(this.loadingStepCallback(e),t)a=t;else{var s=Ue.lookupAssetName(e);a="../assets/"+s}console.log("loading..",a);let o=await Ae.load(a);return o}static lookupAssetName(e){return De[e].path.toString()}async preloadAssets(){for(var e of Me)await this.loadTexture(e)}}var Ne,Ee,Oe={},Re=a("ee45");class Le{constructor(e){Ee=new V["AudioListener"],Ne=new V["AudioLoader"],this.loadingStepCallback=e}getListener(){return Ee}async loadSound(e){var t=e;if(Oe[t]){var a=new V["Audio"](Ee);let e=Oe[t];return a.setBuffer(e),console.log("loaded audio from cache ",t),a}this.loadingStepCallback(e);var n=this.lookupAssetName(e),i="../assets/sfx/"+n;return new Promise((e,a)=>{Ne.load(i,(function(a){var n=new V["Audio"](Ee);n.setBuffer(a),Oe[t]=a,e(a)}))})}async playSound(e){var t=await this.loadSound(e);t.setVolume(1),t.play()}async playSoundFromEvent(e){var t=e.playerUnit,a=e.actionUnit,n=0,i=.1;if(t&&a){var s=new V["Vector3"](t.locationVector.x,t.locationVector.y,t.locationVector.z);n=s.distanceTo(a.locationVector)}i=0==n||isNaN(n)?1:1-n/500,i>1&&(i=1),(i<.1||isNaN(i))&&(i=.1);var o=e.soundName,r=await this.loadSound(o);a?(r.setVolume(i),r.play()):(r.setVolume(1),r.play())}lookupAssetName(e){return Re[e].path.toString()}async preloadAssets(){var e=Object.keys(Re);for(var t in e)console.log("loading ",e[t]),await this.loadSound(e[t])}}var qe=a("2c02"),Ve=a.n(qe);const Fe=a("faa1"),ze=new Fe;var je,Be;class He{constructor(e){this.commandCallback=e,setInterval(this.update.bind(this),500)}update(){}static canLootUnit(e,t){let a=Ve.a.unitHasService(t,"looting"),n=Ve.a.unitsWithinServiceRange(e,t);return a&&n}setPrimaryTarget(e){console.log("setPrimaryTarget",e),je=e.unit._id,ze.emit("primaryTargetChanged",e.unit)}setLootingTarget(e){console.log("setLootingUnit",e),Be=e.unit._id,ze.emit("lootingTargetChanged",e.unit)}getPrimaryTargetUnitId(){return je}getCurrentlyLootingTargetUnitId(){return Be}getTargettingEventEmitter(){return ze}}var Ge=a("b815"),We=a.n(Ge),$e=a("99e5"),Ye=a.n($e),Qe=(a("5ba3"),null),Je=null,Ze=null;const Xe=a("bc3a").default,Ke=a("ddeb"),et=a("ea99"),tt=et.environment;class at{constructor(){}async init(e,t,a){var n=new Ye.a(Ye.a.givenProvider);this.web3=n;console.log("init client connections with serverconfig ",Ke[tt]);let i={url:Ke[tt].gameServer.url,port:Ke[tt].gameServer.port};Qe=We()(i),Je=e.publicAddress,Qe.onConnect(n=>{n&&(console.log("on connect error - geckos!! "),console.error(n.message),t("Failed to connect to socket server.")),Qe.onDisconnect(()=>{}),Qe.on("chat message",e=>{}),Qe.on("errormessage",e=>{console.log("got error from server",e.message)}),Qe.on("challenge",async t=>{console.log("got challenge from socket serv ..opening web3 to personalsign");var a=await e.personalSignWithMetamask(t.challenge,Je,this.web3),n=await e.web3ecRecover(t.challenge,a,this.web3);n.toLowerCase()!=Je.toLowerCase()&&console.log("ERROR: client side check of sig failed ",n,Je),console.log("made signature",a),Qe.emit("signature",{publicAddress:Je,signature:a})}),Qe.on("authorized",async e=>{window.sessionStorage.setItem("authToken",e.authToken),console.log("got auth token ",e.authToken),console.log("got player data ",e.playerData),a(e.playerData)}),Qe.on("setGrid",async e=>{}),Qe.on("gridState",async e=>{await Ze.receivedGridStateFromServer(e)});var i={publicAddress:Je};Qe.emit("connect",i),console.log("emit ",i)})}setEntityManager(e){Ze=e}getPublicAddress(){return Je}async requestSpawn(e){console.log("request spawn");var t={authToken:this.getSessionAuthToken(),publicAddress:Je,playerFaction:e};console.log(Qe),Qe.emit("spawn",t,{reliable:!0})}async sendClientCommand(e,t){console.log("sending client command ",e,t);var a={cmdName:e,cmdParams:t,authToken:this.getSessionAuthToken(),publicAddress:Je};Qe.emit("clientCommand",a,{reliable:!0})}async getSessionAuthToken(){return window.sessionStorage.getItem("authToken")}static getServerNameForDataRequest(e){switch(console.log("get server name ",e),e.requestType){case"inventory":return"gameServer";case"orders":return"marketServer";case"makeMarketOrder":return"marketServer";case"buyoutOrderTx":return"marketServer";case"cancelOrderTx":return"marketServer";default:return"gameServer"}}async requestAPIData(e){let t=at.getServerNameForDataRequest(e),a=Ke[tt][t];console.log("server name for request is ",t);let n=a.url+":"+a.port+"/api/v1";var i=Object.assign({},e);i.authToken=await this.getSessionAuthToken(),i.publicAddress=Je;let s=await Xe({method:"post",url:n,data:i}),o=s.data;if(console.log("got from api ",o),o.success)return o}}var nt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.hidden?e._e():a("div",{staticClass:"absolute p-0 m-0",staticStyle:{background:"#111a",width:"80%",height:"80%",margin:"auto",top:"0",left:"0",bottom:"0",right:"0"}},[a("div",{staticClass:"m-4 p-4 h-full",staticStyle:{margin:"auto"}},[a("div",{staticClass:"flex h-full bg-gray-800 font-roboto"},[a("Sidebar",{ref:"sidebar",attrs:{buttonClickedCallback:e.sidebarButtonClicked}}),a("div",{staticClass:"flex-1 flex flex-col overflow-hidden"},[a("Header",{staticClass:"hidden"}),a("div",{staticClass:"flex-1 overflow-x-hidden overflow-y-auto bg-gray-900 relative"},[a("div",{staticClass:"container mx-auto px-6 py-8 "},[a("div",{staticClass:"text-centered w-full text-gray-100"},[a("InventoryPanel",{ref:"inventorypanel",attrs:{rightClickRowCallback:e.handleItemActionMenuCallback,dataRequestCallback:e.dataRequestCallback,stationUnitId:e.stationUnitId,activeStationPanel:e.activePanel}}),a("HangarPanel",{ref:"hangarpanel",attrs:{stationPanelIsHidden:e.hidden,stationUnitId:e.stationUnitId,myPossessedUnit:e.myPossessedUnit,activeStationPanel:e.activePanel,rightClickRowCallback:e.handleItemActionMenuCallback,dataRequestCallback:e.dataRequestCallback}}),a("ProductionPanel",{ref:"productionpanel",attrs:{rightClickRowCallback:e.handleItemActionMenuCallback,dataRequestCallback:e.dataRequestCallback,stationUnitId:e.stationUnitId,activeStationPanel:e.activePanel}}),a("WalletPanel",{ref:"walletpanel",attrs:{dataRequestCallback:e.dataRequestCallback,localActionCallback:e.localActionCallback,activeStationPanel:e.activePanel}}),a("MarketPanel",{ref:"marketpanel",attrs:{rightClickRowCallback:e.handleItemActionMenuCallback,dataRequestCallback:e.dataRequestCallback,stationUnitId:e.stationUnitId,activeStationPanel:e.activePanel,myPlayer:e.myPlayer}}),a("DevPanel",{attrs:{devtoolsCallback:e.devToolsCallback,activeStationPanel:e.activePanel}})],1)]),a("ModalContainer",{ref:"modalContainer",attrs:{formSubmittedCallback:e.modalFormSubmitted}})],1)],1)],1),a("div")])])},it=[],st=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"h-full",staticStyle:{"overflow-y":"scroll","max-height":"100%"}},[a("div",{staticClass:"flex items-center justify-center mt-8"},[a("div",{staticClass:"flex items-center"},[a("svg",{staticClass:"h-12 w-12",attrs:{viewBox:"0 0 512 512",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[a("path",{attrs:{d:"M364.61 390.213C304.625 450.196 207.37 450.196 147.386 390.213C117.394 360.22 102.398 320.911 102.398 281.6C102.398 242.291 117.394 202.981 147.386 172.989C147.386 230.4 153.6 281.6 230.4 307.2C230.4 256 256 102.4 294.4 76.7999C320 128 334.618 142.997 364.608 172.989C394.601 202.981 409.597 242.291 409.597 281.6C409.597 320.911 394.601 360.22 364.61 390.213Z",fill:"#4C51BF",stroke:"#4C51BF","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}}),a("path",{attrs:{d:"M201.694 387.105C231.686 417.098 280.312 417.098 310.305 387.105C325.301 372.109 332.8 352.456 332.8 332.8C332.8 313.144 325.301 293.491 310.305 278.495C295.309 263.498 288 256 275.2 230.4C256 243.2 243.201 320 243.201 345.6C201.694 345.6 179.2 332.8 179.2 332.8C179.2 352.456 186.698 372.109 201.694 387.105Z",fill:"white"}})]),a("span",{staticClass:"text-white text-2xl mx-2 font-semibold pr-8"},[e._v("Station")])])]),a("div",{staticClass:"mt-10 text-gray-500"},[a("div",{staticClass:"flex items-center mt-4 py-2 px-6 border-l-4    cursor-pointer",class:"hangar"==e.activePanel?e.activeClass:e.inactiveClass,on:{click:function(t){return e.clickedButton("hangar")}}},[a("svg",{staticClass:"h-5 w-5",attrs:{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[a("path",{attrs:{d:"M7 3C6.44772 3 6 3.44772 6 4C6 4.55228 6.44772 5 7 5H13C13.5523 5 14 4.55228 14 4C14 3.44772 13.5523 3 13 3H7Z",fill:"currentColor"}}),a("path",{attrs:{d:"M4 7C4 6.44772 4.44772 6 5 6H15C15.5523 6 16 6.44772 16 7C16 7.55228 15.5523 8 15 8H5C4.44772 8 4 7.55228 4 7Z",fill:"currentColor"}}),a("path",{attrs:{d:"M2 11C2 9.89543 2.89543 9 4 9H16C17.1046 9 18 9.89543 18 11V15C18 16.1046 17.1046 17 16 17H4C2.89543 17 2 16.1046 2 15V11Z",fill:"currentColor"}})]),a("span",{staticClass:"mx-4"},[e._v("Hangar")])]),a("div",{staticClass:"  flex items-center mt-4 py-2 px-6 border-l-4    cursor-pointer",class:"wallet"==e.activePanel?e.activeClass:e.inactiveClass,on:{click:function(t){return e.clickedButton("wallet")}}},[a("svg",{staticClass:"svg-icon",attrs:{viewBox:"0 0 20 20"}},[a("path",{attrs:{fill:"none",d:"M15.123,9.991c-0.944,0-1.71,0.766-1.71,1.71c0,0.945,0.766,1.711,1.71,1.711c0.945,0,1.711-0.766,1.711-1.711\n\t\t\t\t\t\t\t\tC16.834,10.756,16.068,9.991,15.123,9.991z M15.703,12.281h-1.141v-1.141h1.141V12.281z M17.984,4.867h-2.288v-0.57h-0.024\n\t\t\t\t\t\t\t\tc0.011-0.086,0.025-0.17,0.025-0.26V2.852c0-1.092-0.838-1.977-1.871-1.977H2.745C1.8,0.875,1.027,1.618,0.9,2.58H0.875v15.404\n\t\t\t\t\t\t\t\tc0,0.629,0.511,1.141,1.141,1.141h15.969c0.629,0,1.14-0.512,1.14-1.141V6.008C19.124,5.377,18.613,4.867,17.984,4.867z\n\t\t\t\t\t\t\t\t M2.016,2.586c0-0.315,0.255-0.57,0.57-0.57h11.406c0.314,0,0.57,0.255,0.57,0.57v2.275H2.016V2.586z M17.984,17.414\n\t\t\t\t\t\t\t\tc0,0.314-0.257,0.57-0.57,0.57H2.586c-0.315,0-0.57-0.256-0.57-0.57V6.578c0-0.315,0.255-0.57,0.57-0.57h14.828\n\t\t\t\t\t\t\t\tc0.313,0,0.57,0.255,0.57,0.57V17.414z"}})]),a("span",{staticClass:"mx-4"},[e._v("Wallet ")])]),a("div",{staticClass:"flex items-center mt-4 py-2 px-6 border-l-4    cursor-pointer",class:"inventory"==e.activePanel?e.activeClass:e.inactiveClass,on:{click:function(t){return e.clickedButton("inventory")}}},[a("svg",{staticClass:"h-5 w-5",attrs:{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[a("path",{attrs:{d:"M5 3C3.89543 3 3 3.89543 3 5V7C3 8.10457 3.89543 9 5 9H7C8.10457 9 9 8.10457 9 7V5C9 3.89543 8.10457 3 7 3H5Z",fill:"currentColor"}}),a("path",{attrs:{d:"M5 11C3.89543 11 3 11.8954 3 13V15C3 16.1046 3.89543 17 5 17H7C8.10457 17 9 16.1046 9 15V13C9 11.8954 8.10457 11 7 11H5Z",fill:"currentColor"}}),a("path",{attrs:{d:"M11 5C11 3.89543 11.8954 3 13 3H15C16.1046 3 17 3.89543 17 5V7C17 8.10457 16.1046 9 15 9H13C11.8954 9 11 8.10457 11 7V5Z",fill:"currentColor"}}),a("path",{attrs:{d:"M11 13C11 11.8954 11.8954 11 13 11H15C16.1046 11 17 11.8954 17 13V15C17 16.1046 16.1046 17 15 17H13C11.8954 17 11 16.1046 11 15V13Z",fill:"currentColor"}})]),a("span",{staticClass:"mx-4"},[e._v("Items")])]),a("div",{staticClass:"flex items-center mt-4 py-2 px-6 border-l-4    cursor-pointer",class:"market"==e.activePanel?e.activeClass:e.inactiveClass,on:{click:function(t){return e.clickedButton("market")}}},[a("svg",{staticClass:"svg-icon",attrs:{viewBox:"0 0 20 20"}},[a("path",{attrs:{fill:"none",d:"M16.227,16.672c0,0.49-0.396,0.889-0.889,0.889H2.883c-0.491,0-0.889-0.398-0.889-0.889V5.107c0-0.491,0.398-0.89,0.889-0.89h7.562V3.328H2.883c-0.982,0-1.779,0.796-1.779,1.779v11.565c0,0.982,0.796,1.779,1.779,1.779h12.455c0.982,0,1.779-0.797,1.779-1.779V10h-0.891V16.672z M15.338,1.549c-1.965,0-3.559,1.593-3.559,3.558c0,1.966,1.594,3.558,3.559,3.558s3.559-1.592,3.559-3.558C18.896,3.142,17.303,1.549,15.338,1.549z M15.338,7.776c-1.475,0-2.668-1.195-2.668-2.669c0-1.474,1.193-2.669,2.668-2.669s2.668,1.195,2.668,2.669C18.006,6.581,16.812,7.776,15.338,7.776z"}})]),a("span",{staticClass:"mx-4"},[e._v("Market")])]),a("div",{staticClass:"  flex items-center mt-4 py-2 px-6 border-l-4    cursor-pointer",class:"production"==e.activePanel?e.activeClass:e.inactiveClass,on:{click:function(t){return e.clickedButton("production")}}},[a("svg",{staticClass:"svg-icon",attrs:{viewBox:"0 0 20 20"}},[a("path",{attrs:{fill:"none",d:"M16.382,15.015h0.455h0.457V4.985h-0.457h-0.455V15.015z M16.837,4.985c1.008,0,1.824-0.816,1.824-1.822c0-1.008-0.816-1.824-1.824-1.824c-1.006,0-1.822,0.816-1.822,1.824C15.015,4.169,15.831,4.985,16.837,4.985z M16.837,2.25c0.504,0,0.913,0.409,0.913,0.913c0,0.502-0.409,0.911-0.913,0.911c-0.502,0-0.911-0.409-0.911-0.911C15.926,2.659,16.335,2.25,16.837,2.25z M15.015,3.618V3.163V2.706H4.986v0.457v0.455H15.015z M3.162,15.01c-1.007,0-1.823,0.816-1.823,1.822c0,1.008,0.816,1.824,1.823,1.824s1.824-0.816,1.824-1.824C4.986,15.831,4.169,15.015,3.162,15.015z M3.162,17.75c-0.503,0-0.911-0.409-0.911-0.913c0-0.502,0.408-0.911,0.911-0.911c0.504,0,0.912,0.409,0.912,0.911C4.074,17.341,3.666,17.75,3.162,17.75z M4.986,16.382v0.455v0.457h10.029v-0.457v-0.455H4.986zM16.837,15.015c-1.006,0-1.822,0.816-1.822,1.822c0,1.008,0.816,1.824,1.822,1.824c1.008,0,1.824-0.816,1.824-1.824C18.661,15.831,17.845,15.015,16.837,15.015z M16.837,17.75c-0.502,0-0.911-0.409-0.911-0.913c0-0.502,0.409-0.911,0.911-0.911c0.504,0,0.913,0.409,0.913,0.911C17.75,17.341,17.341,17.75,16.837,17.75z M3.618,4.985H3.162H2.707v10.029h0.456h0.456V4.985zM4.986,3.163c0-1.008-0.817-1.824-1.824-1.824S1.339,2.155,1.339,3.163c0,1.006,0.816,1.822,1.823,1.822S4.986,4.169,4.986,3.163zM3.162,4.074c-0.503,0-0.911-0.409-0.911-0.911c0-0.504,0.408-0.913,0.911-0.913c0.504,0,0.912,0.409,0.912,0.913C4.074,3.665,3.666,4.074,3.162,4.074z"}})]),a("span",{staticClass:"mx-4"},[e._v("Production")])]),a("div",{staticClass:" hidden flex items-center mt-4 py-2 px-6 border-l-4    cursor-pointer",class:"salvage"==e.activePanel?e.activeClass:e.inactiveClass,on:{click:function(t){return e.clickedButton("salvage")}}},[a("svg",{staticClass:"svg-icon",attrs:{viewBox:"0 0 20 20"}},[a("path",{attrs:{d:"M12.319,5.792L8.836,2.328C8.589,2.08,8.269,2.295,8.269,2.573v1.534C8.115,4.091,7.937,4.084,7.783,4.084c-2.592,0-4.7,2.097-4.7,4.676c0,1.749,0.968,3.337,2.528,4.146c0.352,0.194,0.651-0.257,0.424-0.529c-0.415-0.492-0.643-1.118-0.643-1.762c0-1.514,1.261-2.747,2.787-2.747c0.029,0,0.06,0,0.09,0.002v1.632c0,0.335,0.378,0.435,0.568,0.245l3.483-3.464C12.455,6.147,12.455,5.928,12.319,5.792 M8.938,8.67V7.554c0-0.411-0.528-0.377-0.781-0.377c-1.906,0-3.457,1.542-3.457,3.438c0,0.271,0.033,0.542,0.097,0.805C4.149,10.7,3.775,9.762,3.775,8.76c0-2.197,1.798-3.985,4.008-3.985c0.251,0,0.501,0.023,0.744,0.069c0.212,0.039,0.412-0.124,0.412-0.34v-1.1l2.646,2.633L8.938,8.67z M14.389,7.107c-0.34-0.18-0.662,0.244-0.424,0.529c0.416,0.493,0.644,1.118,0.644,1.762c0,1.515-1.272,2.747-2.798,2.747c-0.029,0-0.061,0-0.089-0.002v-1.631c0-0.354-0.382-0.419-0.558-0.246l-3.482,3.465c-0.136,0.136-0.136,0.355,0,0.49l3.482,3.465c0.189,0.186,0.568,0.096,0.568-0.245v-1.533c0.153,0.016,0.331,0.022,0.484,0.022c2.592,0,4.7-2.098,4.7-4.677C16.917,9.506,15.948,7.917,14.389,7.107 M12.217,15.238c-0.251,0-0.501-0.022-0.743-0.069c-0.212-0.039-0.411,0.125-0.411,0.341v1.101l-2.646-2.634l2.646-2.633v1.116c0,0.174,0.126,0.318,0.295,0.343c0.158,0.024,0.318,0.034,0.486,0.034c1.905,0,3.456-1.542,3.456-3.438c0-0.271-0.032-0.541-0.097-0.804c0.648,0.719,1.022,1.659,1.022,2.66C16.226,13.451,14.428,15.238,12.217,15.238"}})]),a("span",{staticClass:"mx-4"},[e._v("Salvage")])]),a("div",{staticClass:"  flex items-center mt-4 py-2 px-6 border-l-4    cursor-pointer",class:"dev"==e.activePanel?e.activeClass:e.inactiveClass,on:{click:function(t){return e.clickedButton("dev")}}},[a("svg",{staticClass:"svg-icon",attrs:{viewBox:"0 0 20 20"}},[a("path",{attrs:{fill:"none",d:"M10.841,13.784c0-0.232-0.188-0.421-0.42-0.421c-0.116,0-0.222,0.048-0.297,0.124l-2.522,2.521c-0.076,0.077-0.123,0.183-0.123,0.298c0,0.232,0.188,0.421,0.42,0.421h1.508l-1.805,1.805c-0.076,0.076-0.123,0.182-0.123,0.298c0,0.232,0.188,0.42,0.42,0.42c0.116,0,0.222-0.047,0.298-0.123l2.522-2.523c0.076-0.075,0.123-0.181,0.123-0.297c0-0.232-0.188-0.42-0.42-0.42h0H8.913l1.805-1.805C10.794,14.005,10.841,13.9,10.841,13.784 M6.216,14.205c-0.116,0-0.221,0.047-0.297,0.123l-2.522,2.522c-0.077,0.076-0.124,0.181-0.124,0.297c0,0.232,0.188,0.421,0.421,0.421c0.116,0,0.221-0.047,0.297-0.123l2.523-2.523c0.077-0.075,0.123-0.181,0.123-0.297C6.636,14.394,6.448,14.205,6.216,14.205M16.722,5.063c0.001-0.036,0.006-0.072,0.006-0.109c0-1.393-1.13-2.523-2.523-2.523c-0.635,0-1.215,0.237-1.658,0.625C11.648,1.671,10.094,0.75,8.318,0.75c-2.533,0-4.623,1.867-4.985,4.299C1.853,5.401,0.75,6.729,0.75,8.318c0,1.857,1.506,3.363,3.364,3.363h11.773c1.857,0,3.363-1.506,3.363-3.363C19.25,6.75,18.174,5.436,16.722,5.063 M15.887,10.841H4.114c-1.391,0-2.523-1.132-2.523-2.523c0-1.172,0.796-2.18,1.938-2.451c0.334-0.079,0.587-0.354,0.638-0.694c0.303-2.042,2.088-3.582,4.152-3.582c1.425,0,2.321,0.299,3.102,1.502c0.132,0.205,0.768,0.762,1.009,0.796c0.039,0.006,0.117,0.008,0.117,0.008c0.202,0,0.398-0.072,0.554-0.208c0.307-0.269,0.699-0.417,1.104-0.417c0.928,0,1.683,0.755,1.682,1.691l-0.005,0.062c-0.018,0.398,0.246,0.754,0.632,0.853c1.116,0.286,1.896,1.289,1.896,2.44C18.409,9.709,17.277,10.841,15.887,10.841 M15.045,14.205c-0.116,0-0.221,0.047-0.297,0.123l-2.522,2.522c-0.076,0.076-0.123,0.181-0.123,0.297c0,0.232,0.188,0.421,0.42,0.421c0.116,0,0.221-0.047,0.298-0.123l2.522-2.523c0.076-0.075,0.123-0.181,0.123-0.297C15.466,14.394,15.277,14.205,15.045,14.205"}})]),a("span",{staticClass:"mx-4"},[e._v("Dev Tools")])]),a("div",{staticClass:"flex items-center mt-4 py-2 px-6 border-l-4  bg-yellow-500 text-black  cursor-pointer",class:"undock"==e.activePanel?e.activeClass:e.inactiveClass,on:{click:function(t){return e.clickedButton("undock")}}},[a("svg",{staticClass:"svg-icon",attrs:{viewBox:"0 0 20 20"}},[a("path",{staticStyle:{fill:"#111"},attrs:{d:"M11.739,13.962c-0.087,0.086-0.199,0.131-0.312,0.131c-0.112,0-0.226-0.045-0.312-0.131l-3.738-3.736c-0.173-0.173-0.173-0.454,0-0.626l3.559-3.562c0.173-0.175,0.454-0.173,0.626,0c0.173,0.172,0.173,0.451,0,0.624l-3.248,3.25l3.425,3.426C11.911,13.511,11.911,13.789,11.739,13.962 M18.406,10c0,4.644-3.763,8.406-8.406,8.406S1.594,14.644,1.594,10S5.356,1.594,10,1.594S18.406,5.356,18.406,10 M17.521,10c0-4.148-3.373-7.521-7.521-7.521c-4.148,0-7.521,3.374-7.521,7.521c0,4.148,3.374,7.521,7.521,7.521C14.147,17.521,17.521,14.148,17.521,10"}})]),a("span",{staticClass:"mx-4"},[e._v("Undock")])])])])},ot=[];const rt="bg-blue-600 bg-opacity-25 text-gray-100 border-gray-100 text-gray-200",lt="border-gray-900   hover:bg-gray-600 hover:bg-opacity-25 hover:text-gray-100";var ct={setup(){},name:"StationPanel",props:["buttonClickedCallback"],data(){return{myPlayer:null,activePanel:"hangar"}},created(){this.activeClass=rt,this.inactiveClass=lt},methods:{setHidden:function(e){this.hidden=e,console.log("station panel is hidden: ",e)},clickedButton:function(e){this.buttonClickedCallback(e)},setActivePanel:function(e){this.activePanel=e}}},dt=ct,ut=Object(l["a"])(dt,st,ot,!1,null,null,null),pt=ut.exports,mt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"scroll-left"},[a("p",[e._v(" "+e._s(e.scrollingText))])])])},ht=[],yt={name:"Header",props:[],data(){return{scrollingText:"BREAKING: The Imperial Legion of Satoshi's Children has sent a patrol of starships to the Badlands. "}},methods:{}},gt=yt,ft=(a("a485"),Object(l["a"])(gt,mt,ht,!1,null,null,null)),bt=ft.exports,vt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.hidden?e._e():a("div",{staticClass:"absolute p-0 m-0",staticStyle:{background:"#111e",width:"70%",height:"70%",margin:"auto",top:"0",left:"0",bottom:"0",right:"0"}},[a("div",{staticClass:"flex flex-col m-4 p-4 h-full text-white",staticStyle:{margin:"auto"}},[a("div",{staticClass:"flex-3 m-4 p-4 bg-blue-800  text-white capitalize"},[e._v("\n                  "+e._s(e.getTitle())+"\n\n                  "),a("div",{staticClass:"float-right p-2 bg-gray-800 rounded cursor-pointer hover:bg-gray-600",on:{click:function(t){return e.setHidden(!0)}}},[e._v("  Close ")])]),a("div",{staticClass:"flex-1 m-4 p-4 bg-blue-900 text-white relative "},["makeMarketOrder"==e.activeForm?a("OrderForm",{attrs:{targetData:e.targetData,formSubmittedCallback:e.formSubmittedCallback}}):e._e(),"salvageItem"==e.activeForm?a("SalvageItemForm",{attrs:{targetData:e.targetData,formSubmittedCallback:e.formSubmittedCallback}}):e._e(),"trashItem"==e.activeForm?a("TrashItemForm",{attrs:{targetData:e.targetData,formSubmittedCallback:e.formSubmittedCallback}}):e._e(),"destackItem"==e.activeForm?a("DestackItemForm",{attrs:{targetData:e.targetData,formSubmittedCallback:e.formSubmittedCallback}}):e._e(),"produceItem"==e.activeForm?a("ProductionForm",{attrs:{targetData:e.targetData,formSubmittedCallback:e.formSubmittedCallback}}):e._e()],1)])])},_t=[],wt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.itemToSell?a("form",{staticClass:"w-full max-w-lg"},[a("div",{staticClass:"flex flex-wrap -mx-3 mb-6"},[a("div",{staticClass:"w-full md:w-1/2 px-3 mb-6 md:mb-0"},[a("label",{staticClass:"block uppercase tracking-wide text-gray-200 text-xs font-bold mb-2",attrs:{for:"grid-first-name"}},[e._v("\n        Item Name\n      ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.itemToSell.name,expression:"itemToSell.name "}],staticClass:"appearance-none  block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white",attrs:{disabled:"",type:"text"},domProps:{value:e.itemToSell.name},on:{input:function(t){t.target.composing||e.$set(e.itemToSell,"name",t.target.value)}}}),a("p",{staticClass:" hidden text-red-500 text-xs italic"},[e._v("Please fill out this field.")])]),a("div",{staticClass:"w-full md:w-1/2 px-3"},[a("label",{staticClass:"block uppercase tracking-wide text-gray-200 text-xs font-bold mb-2",attrs:{for:"grid-last-name"}},[e._v("\n        Quantity To Sell\n      ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.quantityToSell,expression:"quantityToSell"}],staticClass:"appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",attrs:{type:"text"},domProps:{value:e.quantityToSell},on:{input:function(t){t.target.composing||(e.quantityToSell=t.target.value)}}})])]),a("div",{staticClass:"flex flex-wrap -mx-3 mb-6"},[a("div",{staticClass:"w-full md:w-1/2 px-3"},[a("label",{staticClass:"block uppercase tracking-wide text-gray-200 text-xs font-bold mb-2",attrs:{for:"grid-password"}},[e._v("\n        Price per Unit ("+e._s(this.currencyName)+")\n      ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.pricePerUnit,expression:"pricePerUnit"}],staticClass:"appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",attrs:{type:"text"},domProps:{value:e.pricePerUnit},on:{input:function(t){t.target.composing||(e.pricePerUnit=t.target.value)}}})]),a("div",{staticClass:"w-full md:w-1/2 px-3"},[a("label",{staticClass:"block uppercase tracking-wide text-gray-200 text-xs font-bold mb-2",attrs:{for:"grid-password"}},[e._v("\n        Total Price\n      ")]),a("div",{staticClass:"appearance-none  block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white",attrs:{type:"text"}},[e._v(e._s(e.totalPrice()))])])]),a("div",[a("button",{staticClass:"float-right bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline cursor-pointer hover:bg-yellow-500",attrs:{type:"button"},on:{click:e.submit}},[e._v("\n        Create Sell Order\n      ")])])]):e._e()])},Ct=[];const xt=a("95df");var kt={name:"OrderForm",props:["formSubmittedCallback","targetData"],components:{},data(){return{itemToSell:null,quantityToSell:0,pricePerUnit:0,currencyName:""}},created(){this.itemToSell=this.targetData.item,this.quantityToSell=this.itemToSell.stackQuantity,this.currencyName=xt.tokenName},methods:{submit:function(){let e={requestType:"makeMarketOrder",item:this.itemToSell,quantity:this.quantityToSell,pricePerUnit:this.pricePerUnit};this.formSubmittedCallback(e),this.reset()},reset:function(){this.quantity=0,this.pricePerUnit=0},totalPrice:function(){return this.pricePerUnit&&this.quantityToSell?(parseFloat(this.pricePerUnit)*parseFloat(this.quantityToSell)).toFixed(8):"?"}}},Tt=kt,St=Object(l["a"])(Tt,wt,Ct,!1,null,null,null),It=St.exports,At=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.targetData?a("form",{staticClass:"w-full max-w-lg"},[a("div",{staticClass:"flex flex-wrap   "},[a("div",{staticClass:"w-1/2"},[a("div",[e._v(" Input ")]),a("ItemList",{attrs:{itemArray:e.inputItemArray,rightClickRowCallback:e.rightClickRowCallback,context:"salvage"}}),e._m(0),a("div",{staticClass:" hidden w-full   px-3"},[a("label",{staticClass:"block uppercase tracking-wide text-gray-200 text-xs font-bold mb-2",attrs:{for:"grid-last-name"}},[e._v("\n        Quantity To Salvage\n      ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.quantityToSalvage,expression:"quantityToSalvage"}],staticClass:"appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",attrs:{disabled:"",type:"text"},domProps:{value:e.quantityToSalvage},on:{input:function(t){t.target.composing||(e.quantityToSalvage=t.target.value)}}})])],1),a("div",{staticClass:"w-1/2"},[a("div",[e._v(" Output ")]),a("ItemList",{attrs:{itemArray:e.outputItemArray,rightClickRowCallback:e.rightClickRowCallback,context:"salvage"}})],1)]),a("div",{staticClass:"mt-4"},[a("button",{staticClass:"float-right bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline cursor-pointer hover:bg-yellow-500",attrs:{type:"button"},on:{click:e.submit}},[e._v("\n        Salvage Items\n      ")])])]):e._e()])},Pt=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"hidden w-full  px-3 mb-6 md:mb-0"},[a("label",{staticClass:"block uppercase tracking-wide text-gray-200 text-xs font-bold mb-2",attrs:{for:"grid-first-name"}},[e._v("\n        Item Name\n      ")]),a("input",{staticClass:"appearance-none  block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white",attrs:{disabled:"",type:"text"}}),a("p",{staticClass:" hidden text-red-500 text-xs italic"},[e._v("Please fill out this field.")])])}],Dt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"my-1  text-white  text-xs"},[e.items?e._e():a("div",[a("div",{staticClass:"px-2"},[e._v(" ? ")])]),e.items&&0==e.items.length?a("div",[a("div",{staticClass:"px-2"},[e._v("Empty")])]):e._e(),e.items&&e.items.length>0?a("div",e._l(e.items,(function(t){return a("div",{key:t._id,staticClass:"w-full cursor-pointer",on:{mousedown:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"right",39,a.key,["Right","ArrowRight"])||"button"in a&&2!==a.button?null:e.onRowClicked(t)}}},[a("div",{staticClass:"w-3/4 inline-block px-2 truncate",staticStyle:{"line-height":"normal"}},[e._v(" "+e._s(t.name)+"  ")]),a("div",{staticClass:"w-1/4 text-right inline-block px-2",staticStyle:{"line-height":"normal"}},[e._v(" "+e._s(t.stackQuantity)+" ")])])})),0):e._e()])},Mt=[],Ut=a("37e8"),Nt=a.n(Ut),Et={name:"ItemList",props:["itemArray","rightClickRowCallback","context"],data(){return{hidden:!1,items:[]}},created(){this.rebuild(this.itemArray)},watch:{itemArray:function(e,t){this.rebuild(e)}},methods:{rebuild:function(e){if(e){if(this.items=[],e)for(var t in e){console.log("rebuild",e[t]);let a=Nt.a.getItemTypeByInternalName(e[t].internalName);e[t].name=a.name,this.items.push(e[t])}}else this.items=null},onRowClicked:function(e){console.log("on row clicked "),this.rightClickRowCallback({item:e,itemType:"item",context:this.context})},setHidden:function(e){this.hidden=e},onClick:function(){this.clickedCallback()}}},Ot=Et,Rt=Object(l["a"])(Ot,Dt,Mt,!1,null,null,null),Lt=Rt.exports,qt=a("5556"),Vt=a.n(qt);a("95df");var Ft,zt,jt,Bt={name:"SalvageItemForm",props:["formSubmittedCallback","targetData"],components:{ItemList:Lt},data(){return{inputItemArray:null,quantityToSalvage:0,outputItemArray:null}},created(){this.rebuild()},watch:{quantityToSalvage:function(e){this.rebuild()}},methods:{rightClickRowCallback:function(){},rebuild:function(){this.outputItemArray=null,this.inputItemArray=[];let e=this.targetData.item;for(var t of(this.inputItemArray.push(e),console.log("rebuild",this.targetData),this.outputItemArray=[],this.inputItemArray))if(t&&!isNaN(t.stackQuantity)&&parseInt(t.stackQuantity)>=1){let e=Vt.a.getItemsOutputForSalvaging(t);if(e)for(var a of e)a.stackQuantity=a.quantity*parseInt(t.stackQuantity),this.outputItemArray.push(a)}},submit:function(){let e={requestType:"salvageItem",item:this.targetData.item,quantity:this.quantityToSalvage};this.formSubmittedCallback(e),this.reset()},reset:function(){this.itemToSalvage=null,this.quantityToSalvage=0}}},Ht=Bt,Gt=Object(l["a"])(Ht,At,Pt,!1,null,null,null),Wt=Gt.exports,$t=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.targetData?a("form",{staticClass:"w-full max-w-lg"},[a("div",{staticClass:"flex flex-wrap   "},[a("div",{staticClass:"w-1/2"},[a("div",{staticClass:"w-full  px-3 mb-6 md:mb-0"},[a("label",{staticClass:"block uppercase tracking-wide text-gray-200 text-xs font-bold mb-2",attrs:{for:"grid-first-name"}},[e._v("\n        Item Name\n      ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.itemToProduce.name,expression:"itemToProduce.name "}],staticClass:"appearance-none  block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white",attrs:{disabled:"",type:"text"},domProps:{value:e.itemToProduce.name},on:{input:function(t){t.target.composing||e.$set(e.itemToProduce,"name",t.target.value)}}}),a("p",{staticClass:" hidden text-red-500 text-xs italic"},[e._v("Please fill out this field.")])]),a("div",{staticClass:"w-full   px-3"},[a("label",{staticClass:"block uppercase tracking-wide text-gray-200 text-xs font-bold mb-2",attrs:{for:"grid-last-name"}},[e._v("\n        Quantity To Produce\n      ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.quantityToProduce,expression:"quantityToProduce"}],staticClass:"appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",attrs:{type:"text"},domProps:{value:e.quantityToProduce},on:{input:function(t){t.target.composing||(e.quantityToProduce=t.target.value)}}})])]),a("div",{staticClass:"w-1/2"},[a("div",[e._v(" Input ")]),a("ItemList",{attrs:{itemArray:e.inputItemArray,rightClickRowCallback:e.rightClickRowCallback,context:"production"}})],1)]),a("div",[a("button",{staticClass:"float-right bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline cursor-pointer hover:bg-yellow-500",attrs:{type:"button"},on:{click:e.submit}},[e._v("\n        Produce Item\n      ")])])]):e._e()])},Yt=[],Qt=a("6843"),Jt=a.n(Qt),Zt={name:"ProductionForm",props:["formSubmittedCallback","targetData"],components:{ItemList:Lt},data(){return{itemToProduce:null,quantityToProduce:1,inputItemArray:null}},created(){this.rebuild()},watch:{quantityToProduce:function(e){this.rebuild()}},methods:{rightClickRowCallback:function(){},rebuild:function(){if(this.inputItemArray=null,this.itemToProduce=this.targetData.item,console.log("rebuild",this.itemToProduce),this.itemToProduce&&!isNaN(this.quantityToProduce)&&parseInt(this.quantityToProduce)>=1){let t=Jt.a.getItemsInputForProduction(this.itemToProduce);if(console.log("baseinput",t),t)for(var e of(this.inputItemArray=[],t))e.stackQuantity=e.quantity*parseInt(this.quantityToProduce),this.inputItemArray.push(e)}},submit:function(){let e={requestType:"produceItem",item:this.itemToProduce,quantity:this.quantityToProduce};this.formSubmittedCallback(e),this.reset()},reset:function(){this.itemToProduce=null,this.quantityToProduce=0}}},Xt=Zt,Kt=Object(l["a"])(Xt,$t,Yt,!1,null,null,null),ea=Kt.exports,ta=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.targetData?a("form",{staticClass:"w-full max-w-lg"},[a("div",{staticClass:"flex flex-wrap   "},[a("div",{staticClass:"w-1/2"},[a("div",{staticClass:"  w-full  px-3 mb-6 md:mb-0"},[a("label",{staticClass:"block uppercase tracking-wide text-gray-200 text-xs font-bold mb-2",attrs:{for:"grid-first-name"}},[e._v("\n          Item Name\n        ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.itemToTrash.internalName,expression:"itemToTrash.internalName"}],staticClass:"appearance-none  block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white",attrs:{disabled:"",type:"text"},domProps:{value:e.itemToTrash.internalName},on:{input:function(t){t.target.composing||e.$set(e.itemToTrash,"internalName",t.target.value)}}}),a("p",{staticClass:" hidden text-red-500 text-xs italic"},[e._v("Please fill out this field.")])]),a("div",{staticClass:"   w-full   px-3"},[a("label",{staticClass:"block uppercase tracking-wide text-gray-200 text-xs font-bold mb-2",attrs:{for:"grid-last-name"}},[e._v("\n          Quantity To Destroy\n        ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.quantityToTrash,expression:"quantityToTrash"}],staticClass:"appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",attrs:{type:"text"},domProps:{value:e.quantityToTrash},on:{input:function(t){t.target.composing||(e.quantityToTrash=t.target.value)}}})])])]),a("div",{staticClass:"mt-4"},[a("button",{staticClass:"float-right bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline cursor-pointer hover:bg-yellow-500",attrs:{type:"button"},on:{click:e.submit}},[e._v("\n        Trash Items\n      ")])])]):e._e()])},aa=[],na={name:"TrashItemForm",props:["formSubmittedCallback","targetData"],components:{ItemList:Lt},data(){return{itemToTrash:null,quantityToTrash:0}},created(){this.itemToTrash=this.targetData.item},methods:{submit:function(){let e={requestType:"trashItem",item:this.itemToTrash,quantity:this.quantityToTrash};this.formSubmittedCallback(e),this.reset()},reset:function(){}}},ia=na,sa=Object(l["a"])(ia,ta,aa,!1,null,null,null),oa=sa.exports,ra=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.targetData?a("form",{staticClass:"w-full max-w-lg"},[a("div",{staticClass:"flex flex-wrap   "},[a("div",{staticClass:"w-1/2"},[a("div",{staticClass:"  w-full  px-3 mb-6 md:mb-0"},[a("label",{staticClass:"block uppercase tracking-wide text-gray-200 text-xs font-bold mb-2",attrs:{for:"grid-first-name"}},[e._v("\n            Item Name\n          ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.itemToDestack.internalName,expression:"itemToDestack.internalName"}],staticClass:"appearance-none  block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white",attrs:{disabled:"",type:"text"},domProps:{value:e.itemToDestack.internalName},on:{input:function(t){t.target.composing||e.$set(e.itemToDestack,"internalName",t.target.value)}}}),a("p",{staticClass:" hidden text-red-500 text-xs italic"},[e._v("Please fill out this field.")])]),a("div",{staticClass:"   w-full   px-3"},[a("label",{staticClass:"block uppercase tracking-wide text-gray-200 text-xs font-bold mb-2",attrs:{for:"grid-last-name"}},[e._v("\n            Quantity To Separate\n          ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.quantityToDestack,expression:"quantityToDestack"}],staticClass:"appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",attrs:{type:"text"},domProps:{value:e.quantityToDestack},on:{input:function(t){t.target.composing||(e.quantityToDestack=t.target.value)}}})])])]),a("div",{staticClass:"mt-4"},[a("button",{staticClass:"float-right bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline cursor-pointer hover:bg-yellow-500",attrs:{type:"button"},on:{click:e.submit}},[e._v("\n        Destack Items\n      ")])])]):e._e()])},la=[],ca={name:"UnstackitemForm",props:["formSubmittedCallback","targetData"],components:{ItemList:Lt},data(){return{itemToDestack:null,quantityToDestack:0}},created(){this.itemToDestack=this.targetData.item},methods:{rightClickRowCallback:function(){},submit:function(){let e={requestType:"destackItem",item:this.itemToDestack,quantity:this.quantityToDestack};this.formSubmittedCallback(e),this.reset()},reset:function(){}}},da=ca,ua=Object(l["a"])(da,ra,la,!1,null,null,null),pa=ua.exports,ma={name:"ModalContainer",props:["formSubmittedCallback"],components:{OrderForm:It,SalvageItemForm:Wt,ProductionForm:ea,TrashItemForm:oa,DestackItemForm:pa},data(){return{hidden:!0,myPlayer:null,activeForm:null,targetData:null}},methods:{setHidden:function(e){this.hidden=e},getTitle:function(){switch(this.activeForm){case"makeMarketOrder":return"Create Market Order";case"salvageItem":return"Salvaging";case"produceItem":return"Production";case"trashItem":return"Trash";case"destackItem":return"Destack"}},setActiveForm:function(e){this.activeForm=e},setTargetData:function(e){this.targetData=e,console.log("target data is ",e)}}},ha=ma,ya=Object(l["a"])(ha,vt,_t,!1,null,null,null),ga=ya.exports,fa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return"inventory"==e.activeStationPanel?a("div",{staticClass:"p12"},[a("div",{staticClass:"text-lg"},[e._v(" Inventory   ")]),a("ItemTable",{attrs:{itemCompoundList:e.itemCompoundList,rightClickRowCallback:e.rightClickRowCallback,context:"inventory"}})],1):e._e()},ba=[],va=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"my-1  text-white  text-xs overflow-hidden"},[e.items?e._e():a("div",[a("div",{staticClass:"px-2"},[e._v(" ? ")])]),e.items&&0==e.items.length?a("div",[a("div",{staticClass:"px-2"},[e._v("Empty")])]):e._e(),e.items?a("div",[a("table",{staticClass:"table-fixed text-xs text-gray-100 mt-4 border-t-0 border-b-0"},[e._m(0),e._l(e.items,(function(t,n){return a("tbody",[a("th",{staticClass:"bg-blue-400 p-2 text-black capitalize w-full",attrs:{colspan:"5"}},[e._v("  "+e._s(n)+"   ")]),e._l(t,(function(t){return a("tr",{key:t._id,staticClass:"cursor-pointer",on:{mousedown:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"right",39,a.key,["Right","ArrowRight"])||"button"in a&&2!==a.button?null:e.onRowClicked(t)}}},[a("td",{staticClass:"border px-4 py-4 text-right border-gray-700"}),a("td",{staticClass:"border px-4 py-4 capitalize  border-gray-700 "},[e._v(" "+e._s(t.name))]),a("td",{staticClass:"border px-4 py-4 text-right border-gray-700"},[e._v(" "+e._s(t.totalVolume)+" ")]),a("td",{staticClass:"border px-4 py-4 text-right border-gray-700"},[e._v(" "+e._s(t.stackQuantity)+" ")])])}))],2)}))],2)]):e._e()])},_a=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("thead",[a("tr",[a("th",{staticClass:"px-1 py-1"},[e._v("Icon")]),a("th",{staticClass:"px-1 py-1"},[e._v("Name")]),a("th",{staticClass:"px-1 py-1"},[e._v("Volume (m3)")]),a("th",{staticClass:"px-1 py-1"},[e._v("Quantity")])])])}],wa={name:"ItemTable",props:["itemCompoundList","rightClickRowCallback","context"],data(){return{hidden:!1,items:[]}},created(){this.rebuild(this.itemCompoundList)},watch:{itemCompoundList:function(e,t){this.rebuild(e)}},methods:{rebuild:function(e){if(!e)return void(this.items=null);let t=Object.keys(e);if(t&&0!=t.length)for(var a of(this.items={},t)){let t=e[a];if(console.log("rebuild itemtable",t),t)for(var n of(this.items[a]=[],t)){let e=Nt.a.getItemTypeByInternalName(n.internalName),t={name:e.name,internalName:e.internalName,volume:e.volume,totalVolume:e.volume*n.stackQuantity,stackQuantity:n.stackQuantity,_id:n._id};this.items[a].push(t)}}else this.items=null},onRowClicked:function(e){console.log("on row clicked "),this.rightClickRowCallback({itemType:"item",item:e,context:this.context})},setHidden:function(e){this.hidden=e},onClick:function(){this.clickedCallback()}}},Ca=wa,xa=Object(l["a"])(Ca,va,_a,!1,null,null,null),ka=xa.exports,Ta={name:"InventoryPanel",props:["rightClickRowCallback","dataRequestCallback","stationUnitId","activeStationPanel"],components:{ItemTable:ka},data(){return{itemCompoundList:[],focusedRowId:null,needsUpdate:!1}},created(){this.requestItemsFromAPI(),Ft=setInterval(this.requestItemsFromAPI,5e3)},beforeDestroy(){clearInterval(Ft)},methods:{inventoryDataChanged:function(e){this.itemCompoundList=null;var t=[];for(var a in e)try{let n=Nt.a.getItemTypeByInternalName(e[a].internalName),i={name:n.name,internalName:n.internalName,volume:n.volume,totalVolume:n.volume*e[a].stackQuantity,stackQuantity:e[a].stackQuantity,_id:e[a]._id};t.push(i)}catch(n){console.log(n)}this.itemCompoundList={inventory:t}},setActiveForm:function(e){this.activeForm=e},setNeedsUpdate:function(e){this.needsUpdate=e,this.requestItemsFromAPI()},requestItemsFromAPI:async function(){if("inventory"==this.activeStationPanel||this.needsUpdate){this.needsUpdate=!1,console.log("request items from api "),console.log("this.activeStationPanel",this.activeStationPanel);var e=await this.dataRequestCallback({requestType:"inventory",containerEncapsulatingUnitId:this.stationUnitId});this.inventoryDataChanged(e.data)}},onReceivedDataRequestResponse:function(e){console.log("on re",e),"destackItem"!=e.requestType&&"trashItem"!=e.requestType&&"stackAll"!=e.requestType&&"salvageItem"!=e.requestType&&"makeMarketOrder"!=e.requestType||this.setNeedsUpdate(!0)}}},Sa=Ta,Ia=Object(l["a"])(Sa,fa,ba,!1,null,null,null),Aa=Ia.exports,Pa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return"hangar"==e.activeStationPanel?a("div",[e.subPanel?e._e():a("div",{staticClass:"flex"},[a("div",{staticClass:"w-1/2"},[a("div",{staticClass:"text-lg"},[e._v(" Hangar   ")]),a("table",{staticClass:"table-fixed text-xs text-gray-100 mt-4 border-t-0 border-b-0"},[e._m(0),a("tbody",e._l(e.shipRows,(function(t){return a("tr",{key:t._id,staticClass:"cursor-pointer",class:{"bg-blue-700":e.myPossessedUnit._id==t._id},on:{mousedown:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"right",39,a.key,["Right","ArrowRight"])||"button"in a&&2!==a.button?null:e.onRowClicked(t)}}},[a("td",{staticClass:"border px-4 py-4 text-right border-gray-700"}),a("td",{staticClass:"border px-4 py-4 capitalize  border-gray-700 "},[e._v(" "+e._s(t.basetype))])])})),0)])]),a("div",{staticClass:"w-1/2 text-sm"},[e.canRequestStarterShip()?a("div",[a("p",[e._v("  You seem to have lost your ship.   You may board a new ship requisitoned from your home system.  ")]),a("div",{staticClass:"cursor-pointer m-2 p-1 bg-yellow-500 text-black text-sm inline-block",on:{click:function(t){return e.clickedButton("boardStarterShip")}}},[e._v("  Board My Corvette ")])]):e._e()])]),e.subPanel?a("div",[a("div",{staticClass:"p-1 m-1 text-sm cursor-pointer bg-yellow-500 text-black rounded  inline",on:{click:function(t){return e.clickedButton("closeSubpanel")}}},[e._v(" Back ")]),a("HangarCargoPanel",{ref:"hangarcargopanel",attrs:{subPanel:e.subPanel,focusedShip:e.focusedShip,dataRequestCallback:e.dataRequestCallback,stationUnitId:e.stationUnitId,rightClickRowCallback:e.rightClickRowCallback}}),a("HangarFittingPanel",{ref:"hangarfittingpanel",attrs:{subPanel:e.subPanel,focusedShip:e.focusedShip,dataRequestCallback:e.dataRequestCallback,stationUnitId:e.stationUnitId,rightClickRowCallback:e.rightClickRowCallback}})],1):e._e()]):e._e()},Da=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("thead",[a("tr",[a("th",{staticClass:"px-1 py-1"},[e._v("Icon")]),a("th",{staticClass:"px-1 py-1"},[e._v("Base type")]),a("th",{staticClass:"px-1 py-1"},[e._v("Volume (m3)")]),a("th",{staticClass:"px-1 py-1"},[e._v("Est. Value")])])])}],Ma=function(){var e=this,t=e.$createElement,a=e._self._c||t;return"hangarCargo"==e.subPanel?a("div",{staticClass:"mt-2 border-t-2 border-gray-200"},[a("div",{staticClass:"text-lg capitalize mt-2"},[e._v(" "+e._s(e.getShipName())+" Cargo   ")]),a("div",{staticClass:"flex"},[a("div",{staticClass:"w-1/2"},[a("ItemTable",{attrs:{itemCompoundList:e.stationInventoryItems,rightClickRowCallback:e.handleRightClickRow,context:"cargopanel_inventory"}})],1),a("div",{staticClass:"w-1/2"},[a("ItemTable",{attrs:{itemCompoundList:e.shipCargoItems,rightClickRowCallback:e.handleRightClickRow,context:"cargopanel_cargo"}})],1)])]):e._e()},Ua=[],Na={name:"HangarCargoPanel",props:["subPanel","focusedShip","dataRequestCallback","stationUnitId","rightClickRowCallback"],components:{ItemTable:ka},data(){return{stationInventoryItems:null,shipCargoItems:null}},mounted(){},methods:{getShipName:function(){return this.focusedShip.basetype},update:async function(){let e=await this.requestShipCargoFromAPI(),t=await this.requestStationInventoryFromAPI();this.stationInventoryItems={},this.stationInventoryItems.inventory=t.data,this.shipCargoItems={},this.shipCargoItems.cargo=e.data},requestShipCargoFromAPI:async function(){console.log("requestShipCargoFromAPI ");let e=await this.dataRequestCallback({requestType:"inventory",containerEncapsulatingUnitId:this.focusedShip._id});return e},requestStationInventoryFromAPI:async function(){console.log("requestStationInventoryFromAPI ");var e=await this.dataRequestCallback({requestType:"inventory",containerEncapsulatingUnitId:this.stationUnitId});return e},handleRightClickRow:function(e){e.panelFocusedUnit=this.focusedShip,this.rightClickRowCallback(e)}}},Ea=Na,Oa=Object(l["a"])(Ea,Ma,Ua,!1,null,null,null),Ra=Oa.exports,La=function(){var e=this,t=e.$createElement,a=e._self._c||t;return"hangarFitting"==e.subPanel?a("div",{staticClass:"mt-2 border-t-2 border-gray-200"},[a("div",{staticClass:"text-lg capitalize mt-2"},[e._v(" "+e._s(e.getShipName())+" Fitting   ")]),a("div",{staticClass:"flex"},[a("div",{staticClass:"w-1/2"},[a("div",[e._v("Station Inventory")]),a("ItemTable",{attrs:{itemCompoundList:e.availableItems,rightClickRowCallback:e.handleRightClickRow,context:"fitting"}})],1),a("div",{staticClass:"w-1/2"},[a("div",[e._v("Ship Equipment")]),a("ShipEquipmentTable",{attrs:{itemCompoundList:e.equippedItems,rightClickRowCallback:e.handleRightClickRow,context:"fitting"}})],1)])]):e._e()},qa=[],Va=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"my-1  text-white  text-xs overflow-hidden px-2"},[e.items?e._e():a("div",[a("div",{staticClass:"px-2"},[e._v(" ? ")])]),e.items&&0==e.items.length?a("div",[a("div",{staticClass:"px-2"},[e._v("Empty")])]):e._e(),e.items?a("div",[a("table",{staticClass:"table-auto text-xs text-gray-100 mt-4 border-t-0 border-b-0 w-full  px-2"},[e._m(0),e._l(e.items,(function(t,n){return a("tbody",[a("th",{staticClass:"bg-blue-400 p-2 text-black capitalize w-full",attrs:{colspan:"5"}},[e._v("  "+e._s(n)+"   ")]),e._l(t,(function(t){return a("tr",{key:t._id,staticClass:"cursor-pointer",on:{mousedown:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"right",39,a.key,["Right","ArrowRight"])||"button"in a&&2!==a.button?null:e.onRowClicked(t)}}},[a("td",{staticClass:"border px-4 py-4 text-right border-gray-700"}),a("td",{staticClass:"border px-4 py-4 capitalize  border-gray-700 "},[e._v(" "+e._s(t.name))]),a("td",{staticClass:"border px-4 py-4 text-right border-gray-700"},[e._v(" "+e._s(t.slotId)+" ")])])}))],2)}))],2)]):e._e()])},Fa=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("thead",[a("tr",[a("th",{staticClass:"px-1 py-1"},[e._v("Icon")]),a("th",{staticClass:"px-1 py-1"},[e._v("Name")]),a("th",{staticClass:"px-1 py-1"},[e._v("Slot")])])])}],za={name:"ShipEquipmentTable",props:["itemCompoundList","rightClickRowCallback","context"],data(){return{hidden:!1,items:[]}},created(){this.rebuild(this.itemCompoundList)},watch:{itemCompoundList:function(e,t){this.rebuild(e)}},methods:{rebuild:function(e){if(!e)return void(this.items=null);let t=Object.keys(e);if(t&&0!=t.length)for(var a of(this.items={},t)){let t=e[a];if(console.log("rebuild equipment table",a,t),t)for(var n of(this.items[a]=[],t)){console.log("axxaaa",n);let e=Nt.a.getItemTypeByInternalName(n.equipmenttype),t={name:e.name,internalName:e.internalName,slotId:n.slotId,_id:n._id};this.items[a].push(t)}}else this.items=null},onRowClicked:function(e){console.log("on row clicked "),this.rightClickRowCallback({itemType:"equipment",item:e,context:this.context})},setHidden:function(e){this.hidden=e},onClick:function(){this.clickedCallback()}}},ja=za,Ba=Object(l["a"])(ja,Va,Fa,!1,null,null,null),Ha=Ba.exports,Ga={name:"HangarFittingPanel",props:["subPanel","focusedShip","dataRequestCallback","stationUnitId","rightClickRowCallback"],components:{ItemTable:ka,ShipEquipmentTable:Ha},data(){return{equippedItems:null,availableItems:null}},mounted(){},methods:{getShipName:function(){return this.focusedShip.basetype},update:async function(){let e=await this.requestStationInventoryFromAPI(),t=await this.requestShipEquipmentFromAPI();console.log("got ",t),this.rebuildAvailableItems(e.data),this.rebuildEquippedItems(t.data)},rebuildAvailableItems:function(e){console.log("rebuildAvailableItems",e);let t=[];for(var a of e){let e=Nt.a.getItemTypeByInternalName(a.internalName);"equipment"==e.itemClass&&t.push(a)}this.availableItems={items:t}},rebuildEquippedItems:function(e){for(var t of(this.equippedItems={high:[],mid:[],low:[]},e)){Nt.a.getItemTypeByInternalName(t.equipmenttype);let e=fe.a.getEquipmentTypeData(t.equipmenttype);console.log("meep",t,e),"high"==e.equipment_slot&&this.equippedItems["high"].push(t),"mid"==e.equipment_slot&&this.equippedItemss["mid"].push(t),"low"==e.equipment_slot&&this.equippedItemss["low"].push(t)}},requestStationInventoryFromAPI:async function(){console.log("requestStationInventoryFromAPI ");var e=await this.dataRequestCallback({requestType:"inventory",containerEncapsulatingUnitId:this.stationUnitId});return e},requestShipEquipmentFromAPI:async function(){console.log("requestShipEquipmentFromAPI ");var e=await this.dataRequestCallback({requestType:"equipment",unit:this.focusedShip});return e},handleRightClickRow:function(e){e.panelFocusedUnit=this.focusedShip,this.rightClickRowCallback(e)}}},Wa=Ga,$a=Object(l["a"])(Wa,La,qa,!1,null,null,null),Ya=$a.exports,Qa={name:"HangarPanel",props:["stationPanelIsHidden","rightClickRowCallback","dataRequestCallback","stationUnitId","myPossessedUnit","activeStationPanel"],components:{HangarCargoPanel:Ra,HangarFittingPanel:Ya},data(){return{shipRows:[],needsUpdate:!1,subPanel:null,focusedShip:null}},mounted(){this.update(),zt=setInterval(this.update,5e3)},beforeDestroy(){clearInterval(zt)},methods:{clickedButton:async function(e){if("closeSubpanel"==e&&(this.subPanel=null),"boardStarterShip"==e){let e=await this.dataRequestCallback({requestType:"boardStarterShip"});console.log("result",e)}},onRowClicked:function(e){console.log("on row clicked "),this.rightClickRowCallback({item:e,itemType:"ship",context:"hangar"})},setNeedsUpdate:function(e){this.needsUpdate=e,this.update()},update:async function(){if(console.log("this.stationPanelIsHidden",this.stationPanelIsHidden),!this.stationPanelIsHidden&&("hangar"==this.activeStationPanel||this.needsUpdate)){this.needsUpdate=!1,console.log("  this.$refs",this.$refs),"hangarCargo"==this.subPanel&&this.$refs.hangarcargopanel&&this.$refs.hangarcargopanel.update(),"hangarFitting"==this.subPanel&&this.$refs.hangarfittingpanel&&this.$refs.hangarfittingpanel.update();var e=await this.requestShipsFromAPI();this.shipDataChanged(e.data)}},requestShipsFromAPI:async function(){console.log("request ships from api "),console.log("this.activeStationPanel",this.activeStationPanel);let e=await this.dataRequestCallback({requestType:"dockedships",dockedInUnitId:this.stationUnitId});return e},shipDataChanged:function(e){for(var t of(this.shipRows=[],e))this.shipRows.push(t)},setActiveForm:function(e){this.activeForm=e},closeSubPanels:function(){this.subPanel=null,this.focusedShip=null},openSubPanel:function(e,t){"hangarFitting"==e&&(this.subPanel=e,this.focusedShip=t.item),"hangarCargo"==e&&(this.subPanel=e,this.focusedShip=t.item),console.log("open sub panel",e),this.$nextTick(()=>{this.setNeedsUpdate(!0)})},onReceivedDataRequestResponse:function(e){console.log("on re",e),"unequipItemFromShip"!=e.requestType&&"equipItemToShip"!=e.requestType&&"moveItemToShip"!=e.requestType&&"moveItemToStation"!=e.requestType||this.setNeedsUpdate(!0)},canRequestStarterShip:function(){for(var e of this.shipRows)if("capsule"!=e.basetype)return!1;return!0}}},Ja=Qa,Za=Object(l["a"])(Ja,Pa,Da,!1,null,null,null),Xa=Za.exports,Ka=function(){var e=this,t=e.$createElement,a=e._self._c||t;return"production"==e.activeStationPanel?a("div",{staticClass:"p12 flex "},[a("div",{staticClass:"w-1/2"},["production"==e.activeStationPanel?a("ProductionBlueprintsTable",{attrs:{itemCompoundList:e.blueprintItems,rightClickRowCallback:e.rightClickRowCallback,context:"production"}}):e._e()],1),a("div",{staticClass:"w-1/2"},["production"==e.activeStationPanel?a("ActiveProductionSlotsTable",{attrs:{itemCompoundList:e.productionslotItems,rightClickRowCallback:e.rightClickRowCallback,context:"production"}}):e._e()],1)]):e._e()},en=[],tn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"my-1  text-white  text-xs overflow-hidden px-2"},[e.items?e._e():a("div",[a("div",{staticClass:"px-2"},[e._v(" ? ")])]),e.items&&0==e.items.length?a("div",[a("div",{staticClass:"px-2"},[e._v("Empty")])]):e._e(),e.items?a("div",[a("table",{staticClass:"table-auto text-xs text-gray-100 mt-4 border-t-0 border-b-0 w-full  px-2"},[e._m(0),e._l(e.items,(function(t,n){return a("tbody",[a("th",{staticClass:"bg-blue-400 p-2 text-black capitalize w-full",attrs:{colspan:"5"}},[e._v("  "+e._s(n)+"   ")]),e._l(t,(function(t){return a("tr",{key:t._id,staticClass:"cursor-pointer",on:{mousedown:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"right",39,a.key,["Right","ArrowRight"])||"button"in a&&2!==a.button?null:e.onRowClicked(t)}}},[a("td",{staticClass:"border px-4 py-4 text-right border-gray-700"}),a("td",{staticClass:"border px-4 py-4 capitalize  border-gray-700 "},[e._v(" "+e._s(t.name))])])}))],2)}))],2)]):e._e()])},an=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("thead",[a("tr",[a("th",{staticClass:"px-1 py-1"},[e._v("Icon")]),a("th",{staticClass:"px-1 py-1"},[e._v("Name")])])])}],nn={name:"ProductionBlueprintsTable",props:["itemCompoundList","rightClickRowCallback","context"],data(){return{hidden:!1,items:[]}},created(){this.rebuild(this.itemCompoundList)},watch:{itemCompoundList:function(e,t){this.rebuild(e)}},methods:{rebuild:function(e){if(!e)return void(this.items=null);let t=Object.keys(e);if(t&&0!=t.length)for(var a of(this.items={},t)){let t=e[a];if(console.log("rebuild blueprint  table",a,t),t)for(var n of(this.items[a]=[],t)){let e=Nt.a.getItemTypeByInternalName(n);console.log("itemTypeData",e);let t={name:e.name,internalName:e.internalName,slotId:n.slotId,_id:n._id};this.items[a].push(t)}}else this.items=null},onRowClicked:function(e){console.log("on row clicked "),this.rightClickRowCallback({itemType:"blueprint",item:e,context:this.context})},setHidden:function(e){this.hidden=e},onClick:function(){this.clickedCallback()}}},sn=nn,on=Object(l["a"])(sn,tn,an,!1,null,null,null),rn=on.exports,ln=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"my-1  text-white  text-xs overflow-hidden px-2"},[e.items?e._e():a("div",[a("div",{staticClass:"px-2"},[e._v(" ? ")])]),e.items&&0==e.items.length?a("div",[a("div",{staticClass:"px-2"},[e._v("Empty")])]):e._e(),e.items?a("div",[a("table",{staticClass:"table-auto text-xs text-gray-100 mt-4 border-t-0 border-b-0 w-full  px-2"},[e._m(0),e._l(e.items,(function(t,n){return a("tbody",[a("th",{staticClass:"bg-blue-400 p-2 text-black capitalize w-full",attrs:{colspan:"5"}},[e._v("  "+e._s(n)+"   ")]),e._l(t,(function(t){return a("tr",{key:t._id,staticClass:"cursor-pointer",on:{mousedown:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"right",39,a.key,["Right","ArrowRight"])||"button"in a&&2!==a.button?null:e.onRowClicked(t)}}},[a("td",{staticClass:"border px-4 py-4 text-right border-gray-700"},[e._v(" "+e._s(t.slotId)+" ")]),a("td",{staticClass:"border px-4 py-4 capitalize  border-gray-700 "},[e._v(" "+e._s(t.name))]),a("td",{staticClass:"border px-4 py-4 capitalize  border-gray-700 "},[e._v(" "+e._s(t.quantityToProduce))]),a("td",{staticClass:"border px-4 py-4 capitalize  border-gray-700 "},[e._v(" "+e._s(t.status))])])}))],2)}))],2)]):e._e()])},cn=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("thead",[a("tr",[a("th",{staticClass:"px-1 py-1"},[e._v("Slot")]),a("th",{staticClass:"px-1 py-1"},[e._v("Name")]),a("th",{staticClass:"px-1 py-1"},[e._v("Quantity ")]),a("th",{staticClass:"px-1 py-1"},[e._v("Status")])])])}],dn={name:"ActiveProductionSlotsTable",props:["itemCompoundList","rightClickRowCallback","context"],data(){return{hidden:!1,items:[]}},created(){this.disabled=!1,this.rebuild(this.itemCompoundList),jt=setInterval(this.updateSlotRenderStatus,500)},beforeDestroy(){clearInterval(jt)},watch:{itemCompoundList:function(e,t){this.rebuild(e)}},methods:{rebuild:function(e){if(!e)return void(this.items=null);let t=Object.keys(e);if(t&&0!=t.length)for(var a of(this.items={},t)){let t=e[a];if(t)for(var n of(this.items[a]=[],t)){let e=Nt.a.getItemTypeByInternalName(n.producingItemTypeName);n.name=e.name,n.internalName=e.internalName;let t=Date.now();if("complete"!=n.status){let e=t-n.startedAtUnixTime,a=Jt.a.getTimeToProduce(n),i=a-e,s=Math.max(Math.floor(i/1e3),0);n.status=s+" s",0==s&&(n.status="finishing")}this.items[a].push(n)}}else this.items=null},updateSlotRenderStatus:function(){this.rebuild(this.itemCompoundList)},onRowClicked:function(e){this.rightClickRowCallback({itemType:"productionSlot",item:e,context:this.context})},setHidden:function(e){this.hidden=e},onClick:function(){this.clickedCallback()}}},un=dn,pn=Object(l["a"])(un,ln,cn,!1,null,null,null),mn=pn.exports,hn={name:"productionPanel",props:["rightClickRowCallback","dataRequestCallback","stationUnitId","activeStationPanel"],components:{ProductionBlueprintsTable:rn,ActiveProductionSlotsTable:mn},data(){return{blueprintItems:{},productionslotItems:{},focusedRowId:null,needsUpdate:!1}},mounted(){this.update(),setInterval(this.update,5e3)},methods:{blueprintDataChanged:function(e){for(var t of(console.log("got bp data",e),this.blueprintItems={blueprints:[]},e))try{Nt.a.getItemTypeByInternalName(t);this.blueprintItems.blueprints.push(t)}catch(a){console.log(a)}},productionslotDataChanged:function(e){for(var t of(console.log("got productionSlotData ",e),this.productionslotItems={slots:[]},e))try{this.productionslotItems.slots.push(t)}catch(a){console.log(a)}},setActiveForm:function(e){this.activeForm=e},setNeedsUpdate:function(e){this.needsUpdate=e,this.update()},update:function(){("production"==this.activeStationPanel||this.needsUpdate)&&(this.needsUpdate=!1,this.requestBlueprintsFromAPI(),this.requestProductionSlotsFromAPI())},requestBlueprintsFromAPI:async function(){console.log("request blueprints from api ");var e=await this.dataRequestCallback({requestType:"blueprints",stationUnitId:this.stationUnitId});this.blueprintDataChanged(e.data)},requestProductionSlotsFromAPI:async function(){console.log("request productionslots from api ");var e=await this.dataRequestCallback({requestType:"productionslots",stationUnitId:this.stationUnitId});this.productionslotDataChanged(e.data)},onReceivedDataRequestResponse:function(e){console.log("on re",e),"startProducingItem"==e.requestType&&this.setNeedsUpdate(!0)}}},yn=hn,gn=Object(l["a"])(yn,Ka,en,!1,null,null,null),fn=gn.exports,bn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return"market"==e.activeStationPanel?a("div",[a("div",{staticClass:"text-lg"},[e._v(" Market Orders   ")]),a("div",{staticClass:"text-sm w-full text-yellow-500 ",staticStyle:{height:"40px"}},[e._v(" "+e._s(e.selectedItemNameFull)+"   ")]),a("div",{staticClass:"flex mb-4"},[a("div",{staticClass:"w-1/4 border-r-2 border-gray-500  mt-4"},[a("TreeList",{attrs:{initData:e.treeListData,onClickCallback:e.handleClickedTreeListItem}})],1),a("div",{staticClass:"w-3/4 ml-4   ",staticStyle:{"overflow-y":"auto"}},[e.orderRows.length>0?a("table",{staticClass:"table-fixed text-xs text-gray-100 mt-4 border-t-0 border-b-0"},[e._m(0),a("tbody",e._l(e.orderRows,(function(t){return"pending"==t.status?a("tr",{key:t.itemId,staticClass:"cursor-pointer",on:{mousedown:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"right",39,a.key,["Right","ArrowRight"])||"button"in a&&2!==a.button?null:e.onRowClicked(t)}}},[a("td",{staticClass:"border px-4 py-4 text-right border-gray-700"}),a("td",{staticClass:"border px-4 py-4 capitalize  border-gray-700 ",class:{"text-indigo-500":e.itemOwnedByMe(t)}},[e._v(" "+e._s(t.itemName))]),a("td",{staticClass:"border px-4 py-4 text-right border-gray-700"},[e._v(" "+e._s(t.pricePerUnit)+" ")]),a("td",{staticClass:"border px-4 py-4 text-right border-gray-700",class:{"text-indigo-500":e.itemOwnedByMe(t)}},[e._v(" "+e._s(t.quantity)+" ")]),a("td",{staticClass:"border px-4 py-4 text-right border-gray-700"},[e._v(" "+e._s(t.amountDueFormatted)+" ")]),a("td",{staticClass:"border px-4 py-4 text-right border-gray-700"},[e._v(" "+e._s(t.expiresAtFormatted)+" ")])]):e._e()})),0)]):e._e(),0==e.orderRows.length?a("div",{staticClass:"p-4 pl-12 text-lg"},[e._v("\n      No orders found.\n    ")]):e._e()])])]):e._e()},vn=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("thead",[a("tr",[a("th",{staticClass:"px-1 py-1"},[e._v("Icon")]),a("th",{staticClass:"px-1 py-1"},[e._v("Name")]),a("th",{staticClass:"px-1 py-1"},[e._v("Price Per Unit ")]),a("th",{staticClass:"px-1 py-1"},[e._v("Quantity")]),a("th",{staticClass:"px-1 py-1"},[e._v("Total Price ")]),a("th",{staticClass:"px-1 py-1"},[e._v("Expires")])])])}],_n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tree-list-children pl-2"},[a("div",{staticClass:"mr-2 pb-2 px-2"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.searchQuery,expression:"searchQuery"}],staticClass:"shadow appearance-none border rounded w-full mr-2 py-0 px-2 text-gray-700 leading-tight focus:outline-none focus:shadow-outline font-xs",domProps:{value:e.searchQuery},on:{input:function(t){t.target.composing||(e.searchQuery=t.target.value)}}})]),a("div",{staticStyle:{"overflow-y":"auto"}},e._l(e.itemData.children,(function(t){return a("TreeListItem",{key:t.title,attrs:{itemData:t,onClickCallback:e.onClickCallback,searchQuery:e.searchQuery}})})),1)])},wn=[],Cn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"    text-xs",staticStyle:{}},[e.itemData&&!e.hiddenForSearch?a("div",[a("div",{staticClass:"tree-list-row cursor-pointer",on:{click:e.clickedButton}},[e.isFolder()&&e.collapsed?a("span",{staticClass:"inline"},[a("svg",{staticClass:"svg-icon inline",attrs:{viewBox:"0 0 20 20"}},[a("path",{attrs:{d:"M14.613,10c0,0.23-0.188,0.419-0.419,0.419H10.42v3.774c0,0.23-0.189,0.42-0.42,0.42s-0.419-0.189-0.419-0.42v-3.774H5.806c-0.23,0-0.419-0.189-0.419-0.419s0.189-0.419,0.419-0.419h3.775V5.806c0-0.23,0.189-0.419,0.419-0.419s0.42,0.189,0.42,0.419v3.775h3.774C14.425,9.581,14.613,9.77,14.613,10 M17.969,10c0,4.401-3.567,7.969-7.969,7.969c-4.402,0-7.969-3.567-7.969-7.969c0-4.402,3.567-7.969,7.969-7.969C14.401,2.031,17.969,5.598,17.969,10 M17.13,10c0-3.932-3.198-7.13-7.13-7.13S2.87,6.068,2.87,10c0,3.933,3.198,7.13,7.13,7.13S17.13,13.933,17.13,10"}})])]):e._e(),e._v("\n\n\n              "+e._s(e.itemData.title)+"\n\n      ")]),e.itemData.children&&!e.collapsed?a("div",{staticClass:"tree-list-children pl-2"},e._l(e.itemData.children,(function(t){return a("TreeListItem",{key:t.title,attrs:{itemData:t,onClickCallback:e.onClickCallback,searchQuery:e.searchQuery}})})),1):e._e()]):e._e()])},xn=[],kn={name:"TreeListItem",props:["onClickCallback","itemData","searchQuery"],components:{},data(){return{myPlayer:null,focusItemSlot:null,collapsed:!1,hiddenForSearch:!1}},watch:{searchQuery:function(e,t){e&&e.length>0?this.hiddenForSearch=!this.itemData.title.toString().toLowerCase().includes(e.toLowerCase())&&!this.isFolder():this.hiddenForSearch=!1}},methods:{setCollapsed:function(e){this.collapsed=e},isFolder:function(){return this.itemData.children&&this.itemData.children.length>0},clickedButton:function(){this.isFolder()?this.setCollapsed(!this.collapsed):this.onClickCallback(this.itemData)}}},Tn=kn,Sn=Object(l["a"])(Tn,Cn,xn,!1,null,null,null),In=Sn.exports,An={name:"TreeList",props:["onClickCallback","initData"],components:{TreeListItem:In},data(){return{itemData:{},searchQuery:""}},mounted(){this.itemData=this.initData},methods:{updatedSearchQuery:function(){}}},Pn=An,Dn=Object(l["a"])(Pn,_n,wn,!1,null,null,null),Mn=Dn.exports;const Un=a("95df"),Nn=a("a39f");var En,On,Rn={name:"MarketPanel",props:["rightClickRowCallback","dataRequestCallback","stationUnitId","activeStationPanel","myPlayer"],components:{TreeList:Mn},data(){return{treeListData:{},focusItemSlot:null,orderRows:[],needsUpdate:!1,selectedItemName:null,selectedItemNameFull:null}},created(){this.treeListData=Nn,this.requestOrdersFromAPI(),En=setInterval(this.requestOrdersFromAPI,5e3)},beforeDestroy(){clearInterval(En)},methods:{itemOwnedByMe:function(e){return!!this.myPlayer&&e.payTo==this.myPlayer.publicAddress},clickedButton:function(e){},handleClickedTreeListItem:function(e){console.log("clicked tree list item ",e);let t=e.itemInternalName;t&&this.setselectedItemName(t)},setselectedItemName:function(e){let t=Nt.a.getItemTypeByInternalName(e);this.selectedItemNameFull=t.name,this.selectedItemName=e,this.setNeedsUpdate(!0)},onRowClicked:function(e){console.log("on row clicked "),this.rightClickRowCallback({item:e,itemType:"order",context:"market"})},ordersChanged:async function(e){for(var t in console.log("got new order data",e),this.orderRows=[],e){let a=e[t];a.amountDueFormatted=ve.a.formatTokenAmount(a.amountDue,Un.tokenDecimals),a.expiresAtFormatted=await ve.a.formatExpiration_client(a.expiresAt),this.orderRows.push(a)}this.orderRows.sort((e,t)=>e.pricePerUnit-t.pricePerUnit)},playersChanged:function(e,t){},takeMarketOrder:function(e){web3Connection.takeMarketOrder(formData,this.myPlayer)},setNeedsUpdate:function(e){this.needsUpdate=e,this.requestOrdersFromAPI()},requestOrdersFromAPI:async function(){if("market"==this.activeStationPanel||this.needsUpdate){this.needsUpdate=!1;var e=await this.dataRequestCallback({requestType:"orders",itemInternalName:this.selectedItemName});this.ordersChanged(e.data)}}}},Ln=Rn,qn=Object(l["a"])(Ln,bn,vn,!1,null,null,null),Vn=qn.exports,Fn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return"wallet"==e.activeStationPanel?a("div",{staticClass:"relative"},[e.loading?a("div",{staticClass:"m-1  float-right"},[a("svg",{staticClass:"svg-icon  loader-large spin",attrs:{viewBox:"0 0 20 20"}},[a("path",{attrs:{fill:"none",d:"M3.254,6.572c0.008,0.072,0.048,0.123,0.082,0.187c0.036,0.07,0.06,0.137,0.12,0.187C3.47,6.957,3.47,6.978,3.484,6.988c0.048,0.034,0.108,0.018,0.162,0.035c0.057,0.019,0.1,0.066,0.164,0.066c0.004,0,0.01,0,0.015,0l2.934-0.074c0.317-0.007,0.568-0.271,0.56-0.589C7.311,6.113,7.055,5.865,6.744,5.865c-0.005,0-0.01,0-0.015,0L5.074,5.907c2.146-2.118,5.604-2.634,7.971-1.007c2.775,1.912,3.48,5.726,1.57,8.501c-1.912,2.781-5.729,3.486-8.507,1.572c-0.259-0.18-0.618-0.119-0.799,0.146c-0.18,0.262-0.114,0.621,0.148,0.801c1.254,0.863,2.687,1.279,4.106,1.279c2.313,0,4.591-1.1,6.001-3.146c2.268-3.297,1.432-7.829-1.867-10.101c-2.781-1.913-6.816-1.36-9.351,1.058L4.309,3.567C4.303,3.252,4.036,3.069,3.72,3.007C3.402,3.015,3.151,3.279,3.16,3.597l0.075,2.932C3.234,6.547,3.251,6.556,3.254,6.572z"}})])]):e._e(),a("div",{staticClass:"mx-6 my-2 w-2/3"},[a("div",{staticClass:"bg-indigo-900 text-center py-4 lg:px-4"},[a("div",{staticClass:"p-2 bg-indigo-800 items-center text-indigo-100 leading-none lg:rounded-full flex lg:inline-flex",attrs:{role:"alert"}},[a("div",{staticClass:"font-semibold mr-2 text-left flex-auto"},[e._v(" Space Wallet ")]),e.hasValidNetwork()?a("span",{staticClass:"  flex rounded-full bg-indigo-500 uppercase px-2 py-1 text-xs font-bold mr-3"},[e._v("Connected")]):e._e(),e.hasValidNetwork()?a("span",{staticClass:"   mr-2 text-left flex-auto"},[e._v(" Matic Mainnet ")]):e._e(),e.hasValidNetwork()||e.loading?e._e():a("span",{staticClass:"  flex rounded-full bg-red-500 uppercase px-2 py-1 text-xs font-bold mr-3"},[e._v("Not Connected ")]),e.hasValidNetwork()||e.loading?e._e():a("span",{staticClass:"   mr-2 text-left flex-auto"},[e._v(" Wrong Web3 Provider ")])])]),e.hasValidNetwork()?a("div",[a("div",{staticClass:"mt-4 bg-blue-500 hover:bg-blue-400 text-white font-bold py-2 px-4 border-b-4 border-blue-700 hover:border-blue-500 rounded"},[e._v("\n          Matic Balance:  "+e._s(e.walletdetails.tokensBalanceFormatted)+"  0xBTC\n         ")]),a("div",{staticClass:"mt-4 bg-green-500 hover:bg-green-400 text-white font-bold py-2 px-4 border-b-4 border-green-700 hover:border-green-500 rounded"},[e._v("\n          Approved For Market: "+e._s(e.getTokensApproved())+"  0xBTC\n\n          "),e.couldApproveMore()?a("div",{staticClass:"inline float-right rounded-full bg-green-700 uppercase px-2 py-1 text-xs font-bold mr-3 cursor-pointer",on:{click:function(t){return e.clickedButton("approve")}}},[e._v(" Approve ")]):e._e()]),a("div"),a("br"),0==e.getTokensApproved()?a("div",{staticClass:"bg-teal-100 border-t-4 border-teal-500 rounded-b text-teal-900 px-4 py-3 shadow-md",attrs:{role:"alert"}},[a("div",{staticClass:"flex"},[a("div",{staticClass:"py-1"},[a("svg",{staticClass:"fill-current h-6 w-6 text-teal-500 mr-4",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"}},[a("path",{attrs:{d:"M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z"}})])]),a("div",[a("p",{staticClass:"font-bold"},[e._v("Warning: No tokens approved")]),a("p",{staticClass:"text-sm"},[e._v("In order to purchase goods from the market, you must approve tokens to the contract.")]),a("a",{attrs:{href:e.getPayspecContractURL(),target:"_blank"}},[e._v(" >> Read the Contract ")])])])]):e._e()]):e._e(),e.hasValidNetwork()?e._e():a("div",[e._m(0)])])]):e._e()},zn=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{role:"alert"}},[a("div",{staticClass:"bg-red-500 text-white font-bold rounded-t px-4 py-2 mt-10"},[e._v("\n            Please connect to Matic Mainnet\n          ")]),a("div",{staticClass:"border border-t-0 border-red-400 rounded-b bg-red-100 px-4 py-3 text-blue-700"},[a("a",{attrs:{href:"https://medium.com/@admazzola/how-to-use-metamask-with-matic-network-6895a34f6c6e",target:"_blank"}},[e._v(" Guide: How to connect Metamask to Matic Mainnet ")])])])}],jn={name:"WalletPanel",props:["dataRequestCallback","localActionCallback","activeStationPanel"],components:{},data(){return{loading:!1,myPlayer:null,focusItemSlot:null,web3details:null,walletdetails:null,paySpecContractAddress:"",needsUpdate:!1}},created(){this.requestWalletDetailsFromAPI(),On=setInterval(this.requestWalletDetailsFromAPI,5e3)},beforeDestroy(){clearInterval(On)},methods:{couldApproveMore:function(){return Math.floor(this.walletdetails.tokensBalanceFormatted)>Math.floor(this.walletdetails.tokensApprovedToPayspecFormatted)},hasValidNetwork:function(){return this.web3details&&137==this.web3details.chainId},getTokensApproved:function(){return Math.min(this.walletdetails.tokensBalanceFormatted,this.walletdetails.tokensApprovedToPayspecFormatted)},getPayspecContractURL:function(){return"https://explorer.matic.network/address/"+this.paySpecContractAddress+"/contracts"},clickedButton:async function(e){await this.localActionCallback(e)},playersChanged:function(e,t){},setNeedsUpdate:function(e){this.needsUpdate=e,this.requestWalletDetailsFromAPI()},requestWalletDetailsFromAPI:async function(){if("wallet"==this.activeStationPanel||this.needsUpdate){this.needsUpdate=!1,this.loading=!0;let e=await this.dataRequestCallback({requestType:"walletDetails"});console.log("got wallet details ",e),this.web3details=e.web3details,this.walletdetails=e.walletdetails,this.paySpecContractAddress=e.paySpecContractAddress,this.loading=!1}}}},Bn=jn,Hn=Object(l["a"])(Bn,Fn,zn,!1,null,null,null),Gn=Hn.exports,Wn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return"dev"==e.activeStationPanel?a("div",{staticClass:"p12"},[a("div",{staticClass:"text-lg"},[e._v(" Developer Tools   ")]),a("br"),a("div",{staticClass:"cursor-pointer m-4 p-4 bg-yellow-500 text-black text-lg ",on:{click:function(t){return e.clickedButton("spawnItem")}}},[e._v("  Spawn Item ")])]):e._e()},$n=[],Yn={name:"DevPanel",props:["devtoolsCallback","activeStationPanel"],components:{},data(){return{myPlayer:null}},mounted(){},methods:{clickedButton:function(e){"spawnItem"==e&&this.devtoolsCallback({requestType:"spawnItem"}),"equipCannon"==e&&this.devtoolsCallback({requestType:"equipCannon"})}}},Qn=Yn,Jn=Object(l["a"])(Qn,Wn,$n,!1,null,null,null),Zn=Jn.exports,Xn={name:"StationPanel",components:{Sidebar:pt,Header:bt,ModalContainer:ga,InventoryPanel:Aa,HangarPanel:Xa,MarketPanel:Vn,ProductionPanel:fn,DevPanel:Zn,WalletPanel:Gn},props:["commandCallback","dataRequestCallback","devToolsCallback","handleItemActionMenuCallback","localActionCallback"],data(){return{myPlayer:null,hidden:!0,activePanel:"hangar",stationUnitId:null,myPossessedUnit:null}},mounted(){},methods:{setHidden:function(e){this.hidden=e},entitiesChanged:function(e,t){this.myPossessedUnit=e,Ve.a.unitIsDockedAtStation(e)?this.setHidden(!1):this.setHidden(!0),this.stationUnitId=e.dockedInStation},playersChanged:function(e,t){this.myPlayer=e},sidebarButtonClicked:function(e){"undock"==e?this.commandCallback("undock"):this.setActivePanel(e),this.localActionCallback("closeRightClickMenus")},modalFormSubmitted:function(e){console.log("modalFormSubmitted",e),this.dataRequestCallback(e),this.$refs.modalContainer.setHidden(!0)},setActivePanel:function(e){console.log("set panel ",e),this.$refs.sidebar.setActivePanel(e),this.activePanel=e,"inventory"==this.activePanel&&this.$refs.inventorypanel.setNeedsUpdate(!0),"hangar"==this.activePanel&&(this.$refs.hangarpanel.setNeedsUpdate(!0),this.$refs.hangarpanel.closeSubPanels()),"market"==this.activePanel&&this.$refs.marketpanel.setNeedsUpdate(!0),"wallet"==this.activePanel&&this.$refs.walletpanel.setNeedsUpdate(!0),"production"==this.activePanel&&this.$refs.productionpanel.setNeedsUpdate(!0)},openSubPanel:function(e,t){"hangarFitting"==e&&this.$refs.hangarpanel.openSubPanel(e,t),"hangarCargo"==e&&this.$refs.hangarpanel.openSubPanel(e,t)},openModalOfType:function(e,t){this.$refs.modalContainer.setHidden(!1),this.$refs.modalContainer.setActiveForm(e),this.$refs.modalContainer.setTargetData(t)},onReceivedDataRequestResponse:function(e){"hangar"==this.activePanel&&this.$refs.hangarpanel&&this.$refs.hangarpanel.onReceivedDataRequestResponse(e),"inventory"==this.activePanel&&this.$refs.inventorypanel&&this.$refs.inventorypanel.onReceivedDataRequestResponse(e),"production"==this.activePanel&&this.$refs.productionpanel&&this.$refs.productionpanel.onReceivedDataRequestResponse(e)}}},Kn=Xn,ei=Object(l["a"])(Kn,nt,it,!1,null,null,null),ti=ei.exports,ai=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.hidden?e._e():a("div",{staticClass:"absolute  py-4 px-6 right-0 top-0",staticStyle:{background:"#111a"}},[a("div",{staticClass:"text-centered w-full text-gray-100  cursor-pointer",on:{click:function(t){e.collapsed=!e.collapsed}}},[e._v("  OVERVIEW ")]),e.collapsed?e._e():a("table",{staticClass:"table-fixed text-xs text-gray-100 mt-4"},[e._m(0),a("tbody",e._l(e.entityList,(function(t){return a("tr",{key:t._id},[a("td",{staticClass:"border px-1 py-1 capitalize cursor-pointer",class:{"border-yellow-400":t.partiallyLocked&&!t.fullyLocked,"border-green-400":t.fullyLocked,"bg-gray-300 text-green-600 ":t.isPrimaryTarget&&t.fullyLocked,"bg-gray-100 text-gray-600":t.isPrimaryTarget&&!t.fullyLocked},on:{mousedown:[function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"left",37,a.key,["Left","ArrowLeft"])||"button"in a&&0!==a.button?null:e.onRowLeftClicked(t)},function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"right",39,a.key,["Right","ArrowRight"])||"button"in a&&2!==a.button?null:e.onRowRightClicked(t)}],dblclick:function(a){return e.onRowDoubleClicked(t)}}},[e._v(" "+e._s(t.name))]),a("td",{staticClass:"border px-1 py-1"},[e._v(" "+e._s(t.distance)+" ")])])})),0)])])},ni=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("thead",[a("tr",[a("th",{staticClass:"px-1 py-1"},[e._v("Name")]),a("th",{staticClass:"px-1 py-1"},[e._v("Distance")])])])}];const ii=" border-red-400 ";var si={name:"OverviewPanel",props:["rightClickRowCallback","localActionCallback","commandCallback"],data(){return{hidden:!1,collapsed:!1,entityList:[],myPossessedUnit:null,targetLocks:[],primaryTargetUnitId:null}},created(){this.lockedClass=ii},methods:{onRowLeftClicked:function(e){this.localActionCallback("setPrimaryTarget",{unit:e})},onRowRightClicked:function(e){this.rightClickRowCallback(e)},onRowDoubleClicked:function(e){this.localActionCallback("setPrimaryTarget",{unit:e}),this.commandCallback("lock",{targetUnitId:e._id})},entitiesChanged:function(e,t){if(e)for(var a in this.myPossessedUnit=e,this.entityList=[],t)t[a].dead||t[a].dockedInStation||this.entityList.push(this.getTableDataForEntity(t[a],e));Ve.a.unitIsDockedAtStation(e)?this.setHidden(!0):this.setHidden(!1)},primaryTargetChanged:function(e){this.primaryTargetUnitId=e._id},targetLocksChanged:function(e){this.targetLocks=e},getTableDataForEntity(e,t){var a={};for(var n of(a._id=e._id,a.name=fe.a.getNameForUnit(e),a.isPrimaryTarget=this.primaryTargetUnitId==e._id,a.partiallyLocked=!1,a.fullyLocked=!1,this.targetLocks))if(n.lockingUnitId.toString()==t._id&&n.lockedUnitId.toString()==e._id){n.lockComplete?a.fullyLocked=!0:a.partiallyLocked=!0;break}if(t){var i=new V["Vector3"](e.locationVector.x,e.locationVector.y,e.locationVector.z);a.distance=i.distanceTo(t.locationVector).toFixed(2),a.distance<10&&(a.distance="--")}return a},setHidden:function(e){this.hidden=e},playersChanged:function(e,t){}}},oi=si,ri=Object(l["a"])(oi,ai,ni,!1,null,null,null),li=ri.exports,ci=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.hidden?e._e():a("div",{staticClass:"p-2 text-white hover:text-red text-sm mb-4",staticStyle:{position:"absolute","background-color":"#1119","z-index":"99"},style:{top:e.offset.top,left:e.offset.left}},[a("span",{staticClass:"capitalize"},[e._v("   "+e._s(e.getMenuTitle()))]),a("br"),e.targettingData.canWarp?a("button",{staticClass:"block p-2",on:{click:function(t){return e.command("warp")}}},[e._v("\n    Warp to --\n  ")]):e._e(),e.targettingData.canApproach?a("button",{staticClass:"block p-2",on:{click:function(t){return e.command("approach")}}},[e._v("\n    Approach\n  ")]):e._e(),e.targettingData.canOrbit?a("button",{staticClass:"block p-2",on:{click:function(t){return e.command("orbit")}}},[e._v("\n    Orbit\n  ")]):e._e(),e.targettingData.canLock?a("button",{staticClass:"block p-2",on:{click:function(t){return e.command("lock")}}},[e._v("\n    Lock\n  ")]):e._e(),e.targettingData.canUnlock?a("button",{staticClass:"block p-2",on:{click:function(t){return e.command("unlock")}}},[e._v("\n    Unlock\n  ")]):e._e(),e.targettingData.canDock?a("button",{staticClass:"block p-2",on:{click:function(t){return e.command("dock")}}},[e._v("\n    Dock\n  ")]):e._e(),e.targettingData.canJump?a("button",{staticClass:"block p-2",on:{click:function(t){return e.command("jump")}}},[e._v("\n    Jump\n  ")]):e._e(),e.targettingData.canLoot?a("button",{staticClass:"block p-2",on:{click:function(t){return e.command("startlooting")}}},[e._v("\n    Loot\n  ")]):e._e(),e.celestials&&e.targettingData.showCelestials?a("div",[a("HoverMenu",{ref:"warpgateMenu",class:{hidden:!e.celestials.warpgates||0==e.celestials.warpgates.length},attrs:{title:"Warp Gates",optionArray:e.celestials.warpgates,commandCallback:e.clickedHoverMenuOption,openedCallback:e.clickedHoverMenu}}),a("HoverMenu",{ref:"planetMenu",class:{hidden:!e.celestials.planets||0==e.celestials.planets.length},attrs:{title:"Planets",optionArray:e.celestials.planets,commandCallback:e.clickedHoverMenuOption,openedCallback:e.clickedHoverMenu}}),a("HoverMenu",{ref:"structureMenu",class:{hidden:!e.celestials.structures||0==e.celestials.structures.length},attrs:{title:"Structures",optionArray:e.celestials.structures,commandCallback:e.clickedHoverMenuOption,openedCallback:e.clickedHoverMenu}}),a("HoverMenu",{ref:"anomalyMenu",class:{hidden:!e.celestials.anomalies||0==e.celestials.anomalies.length},attrs:{title:"Anomalies",optionArray:e.celestials.anomalies,commandCallback:e.clickedHoverMenuOption,openedCallback:e.clickedHoverMenu}})],1):e._e()])},di=[],ui=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.optionArray&&e.optionArray.length>0?a("div",{staticClass:"relative"},[a("button",{staticClass:"block p-2",on:{click:function(t){return e.toggleMenu()}}},[e._v("\n    "+e._s(e.title)+"\n  ")]),e.hidden?e._e():a("div",{staticClass:"absolute top-0  z-110 bg-black text-white",staticStyle:{left:"100px"}},e._l(e.optionArray,(function(t){return a("button",{key:t.id,staticClass:"block p-2 capitalize",on:{click:function(a){return e.clickedOption(t.id)}}},[e._v("\n      "+e._s(t.name)+"\n    ")])})),0)]):e._e()},pi=[],mi={name:"HoverMenu",props:["title","optionArray","commandCallback","openedCallback"],data(){return{hidden:!0}},methods:{setHidden:function(e){this.hidden=e},toggleMenu(){this.openedCallback(this.hidden),this.setHidden(!this.hidden)},clickedOption:function(e){console.log("clicked",e),this.commandCallback(this.title,e)}}},hi=mi,yi=Object(l["a"])(hi,ui,pi,!1,null,null,null),gi=yi.exports,fi={name:"RightClickMenu",props:["commandCallback","localActionCallback"],components:{HoverMenu:gi},data(){return{hidden:!0,offset:{top:0,left:0},targettingData:{},celestials:null,targetLocks:[],myPossessedUnit:null,grid:null}},methods:{gridChanged:function(e){},entitiesChanged:function(e,t,a){if(this.myPossessedUnit=e,e){e.grid;var n=a.solarsystem,i=fe.a.getCelestialsInSolarsystem(n);for(var s in this.celestials={warpgates:[],planets:[],anomalies:[],structures:[]},i){var o=fe.a.getCelestialData(i[s]);"warpgate"===o.celestialtype&&this.celestials.warpgates.push({name:o.name,id:o.uuid}),"anomaly"===o.celestialtype&&this.celestials.anomalies.push({name:o.name,id:o.uuid}),"planet"===o.celestialtype&&this.celestials.planets.push({name:o.name,id:o.uuid}),"structure"===o.celestialtype&&this.celestials.structures.push({name:o.name,id:o.uuid})}}},targetLocksChanged:function(e){this.targetLocks=e},setHidden:function(e){this.hidden=e},clickedHoverMenu:function(e,t){this.$refs.warpgateMenu.setHidden(!0),this.$refs.planetMenu.setHidden(!0),this.$refs.anomalyMenu.setHidden(!0),this.$refs.structureMenu.setHidden(!0)},clickedHoverMenuOption:function(e,t){if(console.log(e,t),this.setHidden(!0),this.myPossessedUnit&&"Warp Gates"===e||"Planets"===e||"Structures"===e||"Anomalies"===e){let e={x:0,y:0,z:0},a=new V["Vector3"](this.myPossessedUnit.locationVector.x,this.myPossessedUnit.locationVector.y,this.myPossessedUnit.locationVector.z),n=this.myPossessedUnit.grid,i=e,s=t,o=s.toLowerCase()!=n.toLowerCase()||a.distanceTo(i)>148;o?this.commandCallback("initiateWarp",{warpGridUUID:t,warpLocationVector:e}):console.log("prediction: cannot warp ")}},setOffsets:function(e){this.offset=e,console.log("offset",e)},command:function(e){console.log("command",e,this.targettingData);var t=this.targettingData.target,a=this.targettingData.targetId;"dock"==e&&this.commandCallback("dock",{targetUnitId:a}),"jump"==e&&this.commandCallback("jump",{targetUnitId:a}),"startlooting"==e&&(this.localActionCallback("setLootingTarget",{unit:t}),this.commandCallback("startlooting",{targetUnitId:a})),"lock"==e&&(this.localActionCallback("setPrimaryTarget",{unit:t}),this.commandCallback("lock",{targetUnitId:a})),"unlock"==e&&this.commandCallback("unlock",{targetUnitId:a}),"orbit"==e&&this.commandCallback("orbit",{targetUnitId:a}),"approach"==e&&this.commandCallback("approach",{targetUnitId:a}),this.setHidden(!0)},getMenuTitle:function(){return this.targettingData.targetName?this.targettingData.targetName:"Navigation"},buildTargettingData:function(e){if(!e||"skybox"==e.name)return void(this.targettingData={targetName:"",target:null,targetId:null,canApproach:!1,canOrbit:!1,canDock:!1,canJump:!1,canLoot:!1,canLock:!1,canUnlock:!1,showCelestials:!0});var t=e;while(t.parent&&"undefined"==typeof t.userData.basetype)t=t.parent;console.log("ultimateParent 2",t);let a=t.userData._id,n=(t.userData.basetype,Ve.a.getBaseTypeData(t.userData)),i=Ve.a.unitHasService(t.userData,"docking"),s=Ve.a.unitHasService(t.userData,"jumping"),o=Ve.a.unitHasService(t.userData,"looting"),r=!1;for(var l of this.targetLocks)if(console.log(this.myPossessedUnit,l,a),this.myPossessedUnit&&l.lockComplete&&l.lockedUnitId.toString()==a&&l.lockingUnitId.toString()==this.myPossessedUnit._id){r=!0;break}console.log("build right click target data ",t),this.targettingData={targetName:n.name,targetId:t.userData._id,target:t.userData,canApproach:!0,canOrbit:!0,canDock:i,canLock:!r,canUnlock:r,canJump:s,canLoot:o,showCelestials:!1}}}},bi=fi,vi=Object(l["a"])(bi,ci,di,!1,null,null,null),_i=vi.exports,wi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.hidden?e._e():a("div",{staticClass:"p-2 text-white hover:text-red text-sm mb-4 text-left",staticStyle:{position:"absolute","background-color":"#111d","z-index":"99"},style:{top:e.offset.top,left:e.offset.left}},["item"==e.itemType&&"inventory"==e.context?a("div",[a("button",{staticClass:"block p-2 hover:bg-gray-600 w-full  ",on:{click:function(t){return e.command("startsell")}}},[e._v("\n    Sell On Market\n  ")]),a("button",{staticClass:"block p-2 hover:bg-gray-600 w-full",on:{click:function(t){return e.command("salvageItem")}}},[e._v("\n    Salvage\n  ")]),a("button",{staticClass:"block p-2 hover:bg-gray-600 w-full",on:{click:function(t){return e.command("stackAll")}}},[e._v("\n    Stack All\n  ")]),a("button",{staticClass:"block p-2 hover:bg-gray-600 w-full",on:{click:function(t){return e.command("destackItem")}}},[e._v("\n   Destack\n  ")]),a("hr"),a("button",{staticClass:"block p-2 hover:bg-gray-600 w-full",on:{click:function(t){return e.command("trashItem")}}},[e._v("\n    Trash\n  ")])]):e._e(),"item"==e.itemType&&"loot"==e.context?a("div",[a("button",{staticClass:"block p-2 hover:bg-gray-600 w-full  ",on:{click:function(t){return e.command("lootitem")}}},[e._v("\n    Loot\n  ")])]):e._e(),"item"==e.itemType&&"cargopanel_cargo"==e.context?a("div",[a("button",{staticClass:"block p-2 hover:bg-gray-600 w-full  ",on:{click:function(t){return e.command("moveItemToStation")}}},[e._v("\n    Move to Station Inventory\n  ")])]):e._e(),"item"==e.itemType&&"cargopanel_inventory"==e.context?a("div",[a("button",{staticClass:"block p-2 hover:bg-gray-600 w-full  ",on:{click:function(t){return e.command("moveItemToShip")}}},[e._v("\n    Move to Ship Cargo\n  ")])]):e._e(),"item"==e.itemType&&"fitting"==e.context?a("div",[a("button",{staticClass:"block p-2 hover:bg-gray-600 w-full  ",on:{click:function(t){return e.command("equipItemToShip")}}},[e._v("\n    Equip to Ship\n  ")])]):e._e(),"equipment"==e.itemType&&"fitting"==e.context?a("div",[a("button",{staticClass:"block p-2 hover:bg-gray-600 w-full  ",on:{click:function(t){return e.command("unequipItemFromShip")}}},[e._v("\n    Unequip from Ship\n  ")])]):e._e(),"blueprint"==e.itemType&&"production"==e.context?a("div",[a("button",{staticClass:"block p-2 hover:bg-gray-600 w-full  ",on:{click:function(t){return e.command("startProducingFromBlueprint")}}},[e._v("\n    Produce From Blueprint\n  ")])]):e._e(),"order"==e.itemType?a("div",[a("button",{staticClass:"block p-2 hover:bg-gray-600 w-full  ",on:{click:function(t){return e.command("buyout")}}},[e._v("\n      Buyout\n    ")]),a("button",{staticClass:"block p-2 hover:bg-gray-600 w-full  ",on:{click:function(t){return e.command("orderdetails")}}},[e._v("\n      View Order Details\n    ")]),e.canCancelOrder()?a("button",{staticClass:"block p-2 hover:bg-gray-600 w-full  ",on:{click:function(t){return e.command("cancelorder")}}},[e._v("\n      Cancel Order\n    ")]):e._e()]):e._e(),"ship"==e.itemType?a("div",[a("button",{staticClass:"block p-2 hover:bg-gray-600 w-full  ",on:{click:function(t){return e.command("possessShip")}}},[e._v("\n      Board\n    ")]),a("button",{staticClass:"block p-2 hover:bg-gray-600 w-full  ",on:{click:function(t){return e.command("openFittingPanel")}}},[e._v("\n      Fitting\n    ")]),a("button",{staticClass:"block p-2 hover:bg-gray-600 w-full  ",on:{click:function(t){return e.command("openHangarCargoPanel")}}},[e._v("\n      Cargo Contents\n    ")]),a("button",{staticClass:"block p-2 hover:bg-gray-600 w-full  ",on:{click:function(t){return e.command("repackageShip")}}},[e._v("\n      Repackage\n    ")])]):e._e()])},Ci=[],xi={name:"ItemActionMenu",props:["dataRequestCallback","localActionCallback"],components:{},data(){return{hidden:!0,offset:{top:0,left:0},targettingData:{},targettedItem:null,panelFocusedUnit:null,itemType:null,context:null,myPlayer:null}},methods:{setHidden:function(e){this.hidden=e},playersChanged:function(e,t){this.myPlayer=e},canCancelOrder:function(){if(this.myPlayer){let e=this.myPlayer.publicAddress;return this.targettedItem&&this.targettedItem.payTo&&this.targettedItem.payTo==e}return!1},setOffsets:function(e){this.offset=e},command:async function(e){if("startsell"==e&&this.localActionCallback("startsell",{item:this.targettedItem}),"salvageItem"==e&&this.localActionCallback("salvageItem",{item:this.targettedItem}),"cancelorder"==e&&this.localActionCallback("cancelOrder",{order:this.targettedItem}),"buyout"==e&&this.localActionCallback("buyoutOrder",{order:this.targettedItem}),"openFittingPanel"==e&&this.localActionCallback("openFittingPanel",{item:this.targettedItem}),"openHangarCargoPanel"==e&&this.localActionCallback("openHangarCargoPanel",{item:this.targettedItem}),"destackItem"==e&&this.localActionCallback("destackItem",{item:this.targettedItem}),"trashItem"==e&&this.localActionCallback("trashItem",{item:this.targettedItem}),"startProducingFromBlueprint"==e&&this.localActionCallback("startProducingFromBlueprint",{item:this.targettedItem}),"stackAll"==e){let e={requestType:"stackAll",item:this.targettedItem};await this.dataRequestCallback(e)}if("moveItemToStation"==e){let e={requestType:"moveItemToStation",item:this.targettedItem,station:this.panelFocusedUnit};await this.dataRequestCallback(e)}if("moveItemToShip"==e){let e={requestType:"moveItemToShip",item:this.targettedItem,ship:this.panelFocusedUnit};await this.dataRequestCallback(e)}if("equipItemToShip"==e){let e={requestType:"equipItemToShip",item:this.targettedItem,ship:this.panelFocusedUnit};await this.dataRequestCallback(e)}if("unequipItemFromShip"==e){let e={requestType:"unequipItemFromShip",item:this.targettedItem};await this.dataRequestCallback(e)}if("possessShip"==e){let e={requestType:"possessShip",item:this.targettedItem};await this.dataRequestCallback(e)}if("repackageShip"==e){let e={requestType:"repackageShip",item:this.targettedItem};await this.dataRequestCallback(e)}this.setHidden(!0)},buildTargettingData:function(e){this.targettingData=e,console.log("built tar data",e),this.targettedItem=e.item,this.panelFocusedUnit=e.panelFocusedUnit,this.itemType=e.itemType,this.context=e.context}}},ki=xi,Ti=Object(l["a"])(ki,wi,Ci,!1,null,null,null),Si=Ti.exports,Ii=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.hidden?e._e():a("div",{staticClass:"absolute  py-4 px-6 left-0  ",staticStyle:{background:"#111a",bottom:"2%"}},[a("div",{staticClass:"text-centered w-full text-gray-100  cursor-pointer mb-4 capitalize"},[e._v("  "+e._s(e.getMenuTitle())+" ")]),a("div",{staticClass:"bg-blue-500 text-xs text-white p-1",staticStyle:{width:"200px",height:"20px"}},[e._v(" Shields "+e._s(e.compiledStats.currentShields)+"/"+e._s(e.compiledStats.maxShields)+" ")]),a("div",{staticClass:"bg-gray-700 text-xs text-white p-1",staticStyle:{width:"200px",height:"20px"}},[e._v(" Armor "+e._s(e.compiledStats.currentArmor)+"/"+e._s(e.compiledStats.maxArmor)+" ")]),a("div",{staticClass:"bg-yellow-700 text-xs text-white p-1",staticStyle:{width:"200px",height:"20px"}},[e._v(" Energy "+e._s(e.compiledStats.currentEnergy)+"/"+e._s(e.compiledStats.maxEnergy)+" ")]),a("br"),a("div",{staticClass:"bg-gray-400 text-xs text-black p-1",staticStyle:{width:"200px",height:"20px"}},[e._v(" Velocity "+e._s(e.compiledStats.speed)+"km/s ")]),a("br"),e.myPossessedUnit?a("div",{staticClass:"bg-gray-800 text-xs text-black p-1"},[e._v(" "+e._s(e.myPossessedUnit.grid)+" ")]):e._e(),e.myPossessedUnit?a("div",{staticClass:"bg-gray-800 text-xs text-black p-1"},[e._v(" "+e._s(e.formattedLocationVector())+" ")]):e._e()])},Ai=[],Pi=a("a2cc"),Di=a.n(Pi),Mi={name:"ShipHud",data(){return{hidden:!1,myPossessedUnit:null,compiledStats:{}}},methods:{entitiesChanged:function(e,t){this.myPossessedUnit=e,this.compiledStats=Di.a.getCompiledStatsAndVitals(e),Ve.a.unitIsDockedAtStation(e)?this.setHidden(!0):this.setHidden(!1)},getMenuTitle:function(){return this.myPossessedUnit?this.myPossessedUnit.basetype:""},setHidden:function(e){this.hidden=e},formattedLocationVector:function(){let e=this.myPossessedUnit.locationVector;return e?{x:e.x.toFixed(2),y:e.y.toFixed(2),z:e.z.toFixed(2)}:{x:"?",y:"?",z:"?"}},playersChanged:function(e,t){}}},Ui=Mi,Ni=Object(l["a"])(Ui,Ii,Ai,!1,null,null,null),Ei=Ni.exports,Oi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"absolute p-0 m-0",class:{hidden:e.isHidden()},staticStyle:{background:"#111a",width:"80%",height:"80%",margin:"auto",top:"0",left:"0",bottom:"0",right:"0"}},[a("div",{staticClass:"m-4 p-4 h-full",staticStyle:{margin:"auto"}},[a("div",{staticClass:"  h-full bg-gray-800 font-roboto"},[a("div",{staticClass:"block p-1 m-1 text-white w-full text-center"},[e._v(" Starmap ")]),a("div",{ref:"starmapcanvas",staticClass:"block relative",staticStyle:{width:"90%",height:"90%",margin:"0 auto"},attrs:{id:"starmapcanvas"},on:{mousemove:e.onMouseMove}},[e.hoveredSystem?a("div",{staticClass:"absolute text-gray-200 p-2 capitalize",staticStyle:{background:"#111a",width:"20%",margin:"auto",top:"0",left:"0"}},[a("div",[e._v(" "+e._s(e.hoveredSystem.name)+"  ")]),a("div",{staticClass:"text-xs text-blue-400 "},[e._v(" "+e._s(e.hoveredSystem.constellation)+" Constellation ")])]):e._e()])])])])},Ri=[],Li=a("4721");const qi=a("f9f6"),Vi=a("9cc2").jumpgate_connections;new V["Raycaster"];var Fi=[],zi={name:"StarMap",data(){return{hidden:!1,toggledOpen:!1,hoveredSystem:null,myPossessedUnit:null,grid:null,renderer:null,scene:null,camera:null,controls:null,mouse:{x:0,y:0}}},mounted(){this.$nextTick(()=>{this.init()})},beforeDestroy(){},methods:{isHidden:function(){return this.hidden||!this.toggledOpen},init:function(){console.log("init starmap");const e=2e4,t=50;let a=document.getElementById("starmapcanvas").getBoundingClientRect();this.scene=new V["Scene"],this.camera=new V["PerspectiveCamera"](t,a.width/a.height,.1,e),this.camera.position.z=10,this.renderer=new V["WebGLRenderer"]({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setClearColor(0,0),this.renderer.setSize(a.width,a.height),document.getElementById("starmapcanvas").appendChild(this.renderer.domElement),console.log("added starmap renderer "),this.scene.add(this.camera),this.controls=new Li["a"](this.camera,this.renderer.domElement),this.controls.maxPolarAngle=.9,this.controls.minPolarAngle=.3,this.controls.maxAzimuthAngle=.4,this.controls.minAzimuthAngle=-.4,this.controls.panSpeed=.2,this.controls.minDistance=100,this.controls.maxDistance=9e3,this.controls.update(),this.buildStarMeshes(),this.animate()},buildStarMeshes(){for(var e of(Fi=[],Object.values(qi))){let t=e.systemLocationVector;console.log("place star at ",t);let a=this.buildStarMesh();a.position.set(t.x,t.y,t.z),a.userData=e,a.material.color.set(this.getBaseColorForStarmesh(a)),this.scene.add(a),Fi.push(a)}for(var t of Vi){let e=qi[t.systemA],a=qi[t.systemB],n=this.buildLine(e.systemLocationVector,a.systemLocationVector);this.scene.add(n)}},buildStarMesh(){let e=5;var t=new V["SphereGeometry"](e,32,32),a=new V["MeshBasicMaterial"]({color:13421823}),n=new V["Mesh"](t,a);return n},buildLine(e,t){var a=[];a.push(new V["Vector3"](e.x,e.y,e.z)),a.push(new V["Vector3"](t.x,t.y,t.z));var n=(new V["BufferGeometry"]).setFromPoints(a),i=new V["LineBasicMaterial"]({color:13421823}),s=new V["Line"](n,i);return s.frustrumCulled=!1,s},rebuild:function(){},animate:function(){requestAnimationFrame(this.animate),this.isHidden()||(this.controls.update(),this.renderer.render(this.scene,this.camera))},onMouseMove:function(e){let t=document.getElementById("starmapcanvas").getBoundingClientRect();this.mouse.x=(e.clientX-t.x)/t.width*2-1,this.mouse.y=-(e.clientY-t.y)/t.height*2+1;var a=new V["Vector3"](this.mouse.x,this.mouse.y,1);a.unproject(this.camera);var n=new V["Raycaster"](this.camera.position,a.sub(this.camera.position).normalize());let i=Fi;var s,o=n.intersectObjects(i,!0);"undefined"!=typeof o&&o.length?(s=o[0].object,console.log("intersect",s),this.setNewHoveredMesh(s)):s=void 0},setNewHoveredMesh(e){for(var t of Fi)t.material.color.set(this.getBaseColorForStarmesh(t));if(e){e.material.color.set(16777215);let t=e.userData;this.hoveredSystem=t}},getBaseColorForStarmesh(e){e.userData.uuid;let t=null;if(this.myPossessedUnit){t=this.myPossessedUnit.grid;let n=e.userData.celestials;for(var a of n)if(console.log("meep",a,this.myPossessedUnit),a.uuid==this.myPossessedUnit.grid)return 16777096}return 11184810},onWindowResize(){let e=document.getElementById("starmapcanvas").getBoundingClientRect();this.camera.aspect=e.width/e.height,this.camera.updateProjectionMatrix(),this.renderer.setSize(e.width,e.height)},entitiesChanged:function(e,t,a){e&&(this.myPossessedUnit=e,this.grid=a),this.setNewHoveredMesh(null)},setToggledOpen:function(e){this.toggledOpen=e,this.$nextTick(()=>{this.onWindowResize(),this.rebuild(),this.controls.reset(),this.hoveredSystem=null})}}},ji=zi,Bi=Object(l["a"])(ji,Oi,Ri,!1,null,null,null),Hi=Bi.exports,Gi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.hidden?e._e():a("div",{staticClass:"absolute  py-4 px-6 left-0  ",staticStyle:{background:"#111a",top:"2%"}},[e.grid?a("div",[a("div",{staticClass:"text-centered w-full text-gray-100  cursor-pointer mb-1 capitalize",on:{click:function(t){return e.onClick("solarsystem")}}},[e._v("  "+e._s(e.grid.solarsystem)+" ")]),a("div",{staticClass:"text-centered w-full text-blue-400 text-sm  cursor-pointer mb-1 capitalize",on:{click:function(t){return e.onClick("constellation")}}},[e._v("  "+e._s(e.grid.constellation)+" Constellation ")])]):e._e()])},Wi=[],$i={name:"ShipHud",data(){return{hidden:!1,myPossessedUnit:null,grid:null,compiledStats:{}}},props:["localActionCallback","commandCallback"],components:{},methods:{entitiesChanged:function(e,t,a){this.myPossessedUnit=e,this.grid=a,Ve.a.unitIsDockedAtStation(e)?this.setHidden(!0):this.setHidden(!1)},setHidden:function(e){this.hidden=e},playersChanged:function(e,t){},onClick(e){console.log("on click"),this.localActionCallback("openStarmap")}}},Yi=$i,Qi=Object(l["a"])(Yi,Gi,Wi,!1,null,null,null),Ji=Qi.exports,Zi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.hidden?e._e():a("div",{staticClass:"absolute  py-4 px-6 left-0 right-0  ",staticStyle:{bottom:"2%","min-height":"160px",width:"30%",margin:"auto"}},[a("TargetHud",{ref:"targethud",class:{hidden:e.hidden}}),a("div",{staticClass:"py-2 my-2 border-t-2 border-gray-400",staticStyle:{background:"#111a","min-height":"140px"}},[a("div",{staticClass:"hidden text-centered w-full text-gray-100  mb-4 capitalize"},[e._v("  Modules ")]),a("div",{ref:"highsloticons",staticClass:"iconrow"},e._l(e.equippedModules["high"],(function(t){return a("CustomIcon",{attrs:{iconImageData:{iconSlot:t.textureIconSlot,texturePath:t.texturePath,tintColor:t.textureIconTint,activated:t.engaged},clickedCallback:e.clickedIcon,onClickParams:{equipmentSlotId:t.slotId,engage:!t.engaged}}})})),1),a("div",{ref:"midsloticons",staticClass:"iconrow"},e._l(e.equippedModules["mid"],(function(t){return a("CustomIcon",{attrs:{iconImageData:{iconSlot:t.textureIconSlot,texturePath:t.texturePath,tintColor:t.textureIconTint,activated:t.engaged},clickedCallback:e.clickedIcon,onClickParams:{equipmentSlotId:t.slotId,engage:!t.engaged}}})})),1),a("div",{ref:"lowsloticons",staticClass:"iconrow"},e._l(e.equippedModules["low"],(function(t){return a("CustomIcon",{attrs:{iconImageData:{iconSlot:t.textureIconSlot,texturePath:t.texturePath,tintColor:t.textureIconTint,activated:t.engaged},clickedCallback:e.clickedIcon,onClickParams:{equipmentSlotId:t.slotId,engage:!t.engaged}}})})),1)])],1)},Xi=[],Ki=a("06b6"),es=a.n(Ki),ts=a("7e9c"),as=a.n(ts),ns=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.hidden?e._e():a("div",{staticClass:"   py-2 px-4    ",staticStyle:{background:"#111a"}},[a("div",{staticClass:"text-centered w-full text-gray-100 text-sm cursor-pointer mb-0 capitalize"},[e._v(" Target Name    ")]),a("br"),a("div",{staticClass:"flex"},[a("div",{staticClass:"w-1/2"},[a("div",{staticClass:"bg-blue-500 text-xs text-white px-1",staticStyle:{height:"20px"}},[e._v(" Shields "+e._s(e.compiledStats.currentShields)+"/"+e._s(e.compiledStats.maxShields)+" ")])]),a("div",{staticClass:"w-1/2"},[a("div",{staticClass:"bg-gray-700 text-xs text-white px-1",staticStyle:{height:"20px"}},[e._v(" Armor "+e._s(e.compiledStats.currentArmor)+"/"+e._s(e.compiledStats.maxArmor)+" ")])])])])},is=[],ss={name:"ShipHud",data(){return{hidden:!1,myPossessedUnit:null,compiledStats:{}}},methods:{entitiesChanged:function(e,t){this.myPossessedUnit=e,this.compiledStats=Di.a.getCompiledStatsAndVitals(e),Ve.a.unitIsDockedAtStation(e)?this.setHidden(!0):this.setHidden(!1)},getMenuTitle:function(){return this.myPossessedUnit?this.myPossessedUnit.basetype:""},setHidden:function(e){this.hidden=e},formattedLocationVector:function(){let e=this.myPossessedUnit.locationVector;return e?{x:e.x.toFixed(2),y:e.y.toFixed(2),z:e.z.toFixed(2)}:{x:"?",y:"?",z:"?"}},playersChanged:function(e,t){}}},os=ss,rs=Object(l["a"])(os,ns,is,!1,null,null,null),ls=rs.exports,cs=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"m-2 cursor-pointer border-2 custom-icon-border  rounded",staticStyle:{width:"32px",height:"32px"},style:e.iconClass,on:{click:e.onClick}})},ds=[],us={name:"CustomIcon",props:["iconImageData","clickedCallback","onClickParams"],data(){return{hidden:!1,iconClass:""}},created(){this.rebuild(this.iconImageData)},watch:{iconImageData:function(e,t){this.rebuild(e)}},methods:{rebuild:function(e){let t="/assets/".concat(e.texturePath),a=e.iconSlot,n=e.tintColor,i=as.a.getBackgroundOffsetFromImageSlot(a,32,5),s="#888";e.activated&&(s="#57965c !important"),this.iconClass={backgroundImage:'url("'+t+'"',backgroundRepeat:"no-repeat",backgroundPosition:i,backgroundSize:"160px 160px",backgroundColor:n,backgroundBlendMode:"multiply",borderColor:s}},setHidden:function(e){this.hidden=e},onClick:function(){this.clickedCallback(this.onClickParams)}}},ps=us,ms=(a("67b2"),Object(l["a"])(ps,cs,ds,!1,null,null,null)),hs=ms.exports,ys={name:"ShipModulesPanel",data(){return{hidden:!1,myPossessedUnit:null,compiledStats:{},equippedModules:{high:[],mid:[],low:[]},primaryTargetUnitId:null}},props:["commandCallback"],components:{CustomIcon:hs,TargetHud:ls},methods:{clickedIcon:function(e){console.log("clicked icon",e);let t={targetUnitId:this.primaryTargetUnitId,equipmentSlotId:e.equipmentSlotId,engage:e.engage};this.commandCallback("setModuleActivation",t)},primaryTargetChanged:function(e){this.primaryTargetUnitId=e._id},equipmentSlotsChanged:function(e){this.rebuildIcons(e)},rebuildIcons:function(e){let t={high:[],mid:[],low:[]};if(this.myPossessedUnit)for(var a of e){a.slotId,a.active;let e=a.equipmenttype,i=a.unitId,s=(fe.a.getEquipmentTypeData(e),Nt.a.getItemTypeByInternalName(e)),o=s.iconName,r=as.a.getIconDetailsFromIconName(o);a.slotType=es.a.getSlotType(a);try{a.texturePath=Ue.lookupAssetName(r.atlasname),a.textureIconSlot=r.slot,a.textureIconTint=r.tint}catch(n){console.log(n)}i==this.myPossessedUnit._id&&t[a.slotType].push(a)}this.equippedModules=t},entitiesChanged:function(e,t){this.myPossessedUnit=e,Ve.a.unitIsDockedAtStation(e)?this.setHidden(!0):this.setHidden(!1)},setHidden:function(e){this.hidden=e},playersChanged:function(e,t){}}},gs=ys,fs=Object(l["a"])(gs,Zi,Xi,!1,null,null,null),bs=fs.exports,vs=function(){var e=this,t=e.$createElement,a=e._self._c||t;return!e.hidden&&e.canLootTarget?a("div",{staticClass:"absolute  py-2 px-2   border-t-2 border-gray-400 ",staticStyle:{background:"#111a",bottom:"40%",left:"30%",height:"200px",width:"160px"}},[a("div",{staticClass:"  text-centered w-full text-gray-100  mb-4 capitalize"},[e._v("  Loot ")]),a("div",{staticClass:"border-2 border-gray-400 overflow-y-auto",staticStyle:{height:"100px"}},[a("ItemList",{attrs:{itemArray:e.itemArray,rightClickRowCallback:e.handleItemActionMenuCallback,context:"loot"}})],1),a("div",{staticClass:"mt-2 p-1"},[a("div",{staticClass:"cursor-pointer inline text-black bg-gray-300 p-1 mt-4 rounded text-xs",class:{"text-gray-500":!e.itemArray||0==e.itemArray.length},on:{click:function(t){return e.command("lootall")}}},[e._v(" Loot All ")])])]):e._e()},_s=[],ws={name:"LootPanel",data(){return{hidden:!1,canLootTarget:!1,myPossessedUnit:null,lootingTargetUnit:null,itemArray:[],dataError:null}},props:["localActionCallback","commandCallback","dataRequestCallback","handleItemActionMenuCallback"],components:{ItemList:Lt},created(){setInterval(this.refresh.bind(this),2e3)},methods:{clickedIcon:function(e){},refresh:async function(){if(this.canLootUnit(this.myPossessedUnit,this.lootingTargetUnit)?(this.canLootTarget||this.localActionCallback("openShipCargoPanel"),this.canLootTarget=!0):this.canLootTarget=!1,!this.hidden&&this.canLootTarget&&this.canLootTarget){console.log("request items for loot panel");var e=await this.dataRequestCallback({requestType:"inventory",containerEncapsulatingUnitId:this.lootingTargetUnit._id,containerOwnerPublicAddress:this.lootingTargetUnit.owningPlayerAddress});this.inventoryDataChanged(e.data)}},inventoryDataChanged:function(e){this.itemArray=e},canLootUnit:function(e,t){if(!e||!t)return!1;let a=Ve.a.unitHasService(t,"looting"),n=Ve.a.unitsWithinServiceRange(e,t);return a&&n},lootingTargetChanged:function(e){this.lootingTargetUnit=e,this.refresh()},entitiesChanged:function(e,t){this.myPossessedUnit=e,Ve.a.unitIsDockedAtStation(e)?this.setHidden(!0):this.setHidden(!1)},setHidden:function(e){this.hidden=e},resetPanel:function(e){this.lootingTargetUnit=null,this.refresh()},playersChanged:function(e,t){},command:function(e){if("lootall"==e){if(!this.itemArray||0==this.itemArray.length)return;this.commandCallback("lootall",{containerEncapsulatingUnitId:this.lootingTargetUnit._id,containerOwnerPublicAddress:this.lootingTargetUnit.owningPlayerAddress})}}}},Cs=ws,xs=Object(l["a"])(Cs,vs,_s,!1,null,null,null),ks=xs.exports,Ts=function(){var e=this,t=e.$createElement,a=e._self._c||t;return!e.hidden&&e.toggledOpen?a("div",{staticClass:"absolute  py-2 px-2   border-t-2 border-gray-400 ",staticStyle:{background:"#111a",bottom:"40%",right:"30%",height:"300px",width:"260px"}},[a("div",{staticClass:"  text-centered w-full text-gray-100  mb-4 capitalize"},[e._v("  Cargo ")]),a("div",{staticClass:"border-2 border-gray-400 overflow-y-auto",staticStyle:{height:"240px"}},[a("ItemList",{attrs:{itemArray:e.itemArray,rightClickRowCallback:e.handleItemActionMenuCallback,context:"cargo"}})],1)]):e._e()},Ss=[],Is={name:"ShipCargoPanel",data(){return{hidden:!1,toggledOpen:!1,myPossessedUnit:null,lootingTargetUnit:null,itemArray:[]}},props:["commandCallback","dataRequestCallback","handleItemActionMenuCallback"],components:{ItemList:Lt},created(){setInterval(this.refresh.bind(this),2e3)},methods:{clickedIcon:function(e){},refresh:async function(){if(!this.hidden&&this.toggledOpen)if(this.myPossessedUnit){console.log("request items for shipcargo ");var e=await this.dataRequestCallback({requestType:"inventory",containerEncapsulatingUnitId:this.myPossessedUnit._id,containerOwnerPublicAddress:this.myPossessedUnit.owningPlayerAddress});this.itemArray=[],this.inventoryDataChanged(e.data)}else console.log("WARN: ship cargo has no possessed unit ")},inventoryDataChanged:function(e){e&&e.length>0&&(this.itemArray=e)},canLootUnit:function(e,t){if(!e||!t)return!1;let a=Ve.a.unitHasService(t,"looting"),n=Ve.a.unitsWithinServiceRange(e,t);return a&&n},lootingTargetChanged:function(e){console.log("looting target changed ! "),this.lootingTargetUnit=e,this.refresh()},entitiesChanged:function(e,t){this.myPossessedUnit=e,Ve.a.unitIsDockedAtStation(e)?this.setHidden(!0):this.setHidden(!1)},setHidden:function(e){this.hidden=e},setToggledOpen:function(e){this.toggledOpen=e,this.refresh()},resetPanel:function(e){this.toggledOpen=!1,this.refresh()},playersChanged:function(e,t){}}},As=Is,Ps=Object(l["a"])(As,Ts,Ss,!1,null,null,null),Ds=Ps.exports,Ms=!1;const Us=new V["Clock"];a("0f27");const Ns=a("3c84");var Es,Os,Rs,Ls,qs,Vs,Fs,zs,js,Bs,Hs=new at,Gs=new V["Vector2"],Ws=new V["Raycaster"],$s=new V["Object3D"],Ys=!1,Qs={name:"GameCanvas",data(){return{assetsLoaded:!1,renderer:null,scene:null,camera:null,controls:null,rect:null,connected:!1,rightClickTargetData:{},connectionError:null,loadingStepName:""}},components:{OverviewPanel:li,RightClickMenu:_i,ShipHud:Ei,ShipModulesPanel:bs,NavigationPanel:Ji,StarMap:Hi,StationPanel:ti,ItemActionMenu:Si,LootPanel:ks,ShipCargoPanel:Ds},methods:{startGameClient:async function(){if(Ms)return;Ms=!0,F["install"](V);while(!this.assetsLoaded&&"undefined"==typeof Es)await Ns(1e3),console.log("assets loading...");const e=2e4,t=50;this.scene=new V["Scene"],this.camera=new V["PerspectiveCamera"](t,window.innerWidth/window.innerHeight,.1,e),this.renderer=new V["WebGLRenderer"]({antialias:!0,powerPreference:"high-performance"}),this.renderer.setSize(window.innerWidth,window.innerHeight),document.getElementById("gamecanvas").appendChild(this.renderer.domElement),this.scene.add($s),$s.add(Os.getListener()),this.controls=new F["TPSCameraControls"](this.camera,$s,this.renderer.domElement),this.controls.minDistance=20,this.controls.maxDistance=520,this.controls.dollyTo(130),this.controls.rotateTo(1,1,!1),this.controls.addEventListener("update",()=>{});const a=16777215,n=2.4,i=new V["AmbientLight"](a,n);if(this.scene.add(i),Ys){const e=new V["DirectionalLight"](a,n);e.position.set(0,10,0),e.target.position.set(-5,0,0),this.scene.add(e),this.scene.add(e.target)}js=await Fs.getMesh("purplenebula"),js.material=await Fs.getMaterial("purplenebula"),$s.add(js),this.rect=this.renderer.domElement.getBoundingClientRect(),gamecanvas.addEventListener("mousemove",this.onDocumentMouseMove,!1),gamecanvas.addEventListener("mousedown",this.onMouseDown,!1),gamecanvas.addEventListener("dblclick",this.onDoubleClick,!1),window.addEventListener("resize",this.onWindowResize,!1),window.addEventListener("contextmenu",this.onContextMenu,!1),Ls=new He(this.handleClientCommand),Es=new he(Rs,this.scene,qs,Vs,Ls),Hs.setEntityManager(Es);let s=Rs.getSelectedFaction();Hs.requestSpawn(s),this.$nextTick(()=>{Ls.getTargettingEventEmitter().on("lootingTargetChanged",function(e){try{this.$refs.lootpanel.lootingTargetChanged(e),this.$refs.shipcargopanel.lootingTargetChanged(e)}catch(t){}}.bind(this)),Ls.getTargettingEventEmitter().on("primaryTargetChanged",function(e){try{this.$refs.overview.primaryTargetChanged(e),this.$refs.shipmodulespanel.primaryTargetChanged(e)}catch(t){}}.bind(this)),Es.getEntitiesEventEmitter().on("playersChanged",function(e,t){try{this.$refs.stationpanel.playersChanged(e,t),this.$refs.shiphud.playersChanged(e,t),this.$refs.shipmodulespanel.playersChanged(e,t),this.$refs.overview.playersChanged(e,t),this.$refs.itemactionmenu.playersChanged(e,t),this.$refs.lootpanel.playersChanged(e,t),this.$refs.shipcargopanel.playersChanged(e,t)}catch(a){}}.bind(this)),Es.getEntitiesEventEmitter().on("entitiesChanged",function(e,t,a){this.refreshSkyboxForGrid(a);try{this.$refs.overview.entitiesChanged(e,t,a),this.$refs.shiphud.entitiesChanged(e,t,a),this.$refs.rclickmenu.entitiesChanged(e,t,a),this.$refs.shipmodulespanel.entitiesChanged(e,t,a),this.$refs.navigationpanel.entitiesChanged(e,t,a),this.$refs.stationpanel.entitiesChanged(e,t,a),this.$refs.starmap.entitiesChanged(e,t,a),this.$refs.lootpanel.entitiesChanged(e,t,a),this.$refs.shipcargopanel.entitiesChanged(e,t,a)}catch(n){}}.bind(this)),Es.getEntitiesEventEmitter().on("targetLocksChanged",function(e){try{this.$refs.overview.targetLocksChanged(e),this.$refs.rclickmenu.targetLocksChanged(e)}catch(t){}}.bind(this)),Es.getEntitiesEventEmitter().on("equipmentSlotsChanged",function(e){try{this.$refs.shipmodulespanel.equipmentSlotsChanged(e)}catch(t){}}.bind(this)),Os&&Es.getEntitiesEventEmitter().on("entitySoundEvent",function(e){Os.playSoundFromEvent(e)}.bind(this))});this.animate()},initialize:async function(){await this.preloadAssets()},preloadAssets:async function(){Vs=new Ue(this.handleLoadingStepCallback),await Vs.preloadAssets(),Fs=new j(Vs),await Fs.preloadAssets(),qs=new Ie(this.handleLoadingStepCallback),await qs.preloadAssets(),Os=new Le(this.handleLoadingStepCallback),await Os.preloadAssets(),this.assetsLoaded=!0},connectToServer:async function(){if(!this.connected){var e=await window.ethereum.request({method:"eth_requestAccounts"});Rs=new Ce(e[0]),await new Promise((e,t)=>{Hs.init(Rs,this.handleConnectionErrorMessage,(function(t){Rs.acceptPlayerDataFromServer(t),e()}))}),this.connected=!0,this.startGameClient()}},animate:function(){const e=Us.getDelta();requestAnimationFrame(this.animate);this.controls.update(e);Es.update(this.scene,1e3*e),this.updateCameraPosition(),zs||this.renderer.render(this.scene,this.camera)},updateCameraPosition(){this.controls.minDistance=20;Es.getMyPlayerData();let e=Es.getMyPossessedUnit();if(e){let a=e.dockedInStation,n=Es.getSceneObjectForEntity(e._id);if(a){var t=Es.getDataForEntityById(a);n=Es.getSceneObjectForEntity(a),t&&Ve.a.getBaseTypeData(t).collisionRadius>20&&(this.controls.minDistance=Ve.a.getBaseTypeData(t).collisionRadius)}if(n){let e=new V["Vector3"];e.lerpVectors($s.position,n.position,.2),$s.position=e}else console.log("WARN - no scene object for my focus unit")}},onDocumentMouseMove:function(e){e.preventDefault();let t=document.getElementById("gamecanvas").getBoundingClientRect();Gs.x=e.clientX/t.width*2-1,Gs.y=-e.clientY/t.height*2+1},onContextMenu:function(e){e.preventDefault()},onMouseDown:function(e){var t;if(e.preventDefault(),this.hideStarMap(),this.hideAllRightClickMenus(),!e)e=window.event;if(e.which?t=3==e.which:e.button&&(t=2==e.button),!t)return;let a=document.getElementById("gamecanvas").getBoundingClientRect();Gs.x=(e.clientX-a.x)/a.width*2-1,Gs.y=-(e.clientY-a.y)/a.height*2+1,Ws.setFromCamera(Gs,this.camera);var n,i=Es.getClickableEntities();console.log("clickables ",i);var s=Ws.intersectObjects(i,!0);n="undefined"!=typeof s&&s.length?s[0].object:void 0,this.openRightClickMenuForSceneObject(n)},openRightClickMenuForSceneObject(e){this.resetAllLootMenus(),this.hideAllRightClickMenus(),this.$refs.rclickmenu.buildTargettingData(e);var t=-40;this.$refs.rclickmenu.setOffsets({left:event.clientX+"px",top:event.clientY+t+"px"}),this.$refs.rclickmenu.setHidden(!1)},openItemActionMenuForItem(e){this.hideAllRightClickMenus(),this.$refs.itemactionmenu.buildTargettingData(e);var t=-40;this.$refs.itemactionmenu.setOffsets({left:event.clientX+"px",top:event.clientY+t+"px"}),this.$refs.itemactionmenu.setHidden(!1)},hideAllRightClickMenus(){this.$refs.itemactionmenu.setHidden(!0),this.$refs.rclickmenu.setHidden(!0)},hideStarMap(){this.$refs.starmap.setToggledOpen(!1),this.setPauseRendering(!1)},async refreshSkyboxForGrid(e){if(!Bs||e.uuid!=Bs.uuid){Bs=Object.assign({},e);let t=fe.a.getSkyboxForGrid(e);js.material=await Fs.getMaterial(t)}},setPauseRendering(e){zs=e},resetAllLootMenus(){this.$refs.shipcargopanel.resetPanel(),this.$refs.lootpanel.resetPanel()},onDoubleClick:function(e){var t;if(e.preventDefault(),!e)e=window.event;if(e.which?t=3==e.which:e.button&&(t=2==e.button),!t){Ws.setFromCamera(Gs,this.camera);var a=this.camera.getWorldDirection(),n=new V["Vector3"](a.x,a.y,a.z).normalize();console.log("set new facing vector",n),this.handleClientCommand("setShipDirectionVector",{vector:n})}},async handleItemActionMenuCallback(e){this.openItemActionMenuForItem(e)},async handleLoadingStepCallback(e){this.loadingStepName=e},async handleDevToolsRequest(e){var t=await Hs.requestAPIData(e);console.log("got response from dev tool request",t)},async handleClientDataRequest(e){if(console.log("handleClientDataRequest",e),"walletDetails"==e.requestType){let e=await ve.a.getWalletDetails(Hs.getPublicAddress());return e}var t=await Hs.requestAPIData(e);return this.$refs.stationpanel&&this.$refs.stationpanel.onReceivedDataRequestResponse(t),t},async handleLocalActionCommand(e,t){if("openStarmap"==e&&(this.$refs.starmap.setToggledOpen(!0),this.setPauseRendering(!0)),"closeStarmap"==e&&this.hideStarMap(),"closeRightClickMenus"==e&&this.hideAllRightClickMenus(),"openShipCargoPanel"==e&&this.$refs.shipcargopanel.setToggledOpen(!0),"setPrimaryTarget"==e&&Ls.setPrimaryTarget(t),"setLootingTarget"==e&&Ls.setLootingTarget(t),"startsell"==e&&this.$refs.stationpanel.openModalOfType("makeMarketOrder",t),"destackItem"==e&&this.$refs.stationpanel.openModalOfType("destackItem",t),"trashItem"==e&&this.$refs.stationpanel.openModalOfType("trashItem",t),"salvageItem"==e&&this.$refs.stationpanel.openModalOfType("salvageItem",t),"startProducingFromBlueprint"==e&&this.$refs.stationpanel.openModalOfType("produceItem",t),"openFittingPanel"==e&&this.$refs.stationpanel.openSubPanel("hangarFitting",t),"openHangarCargoPanel"==e&&this.$refs.stationpanel.openSubPanel("hangarCargo",t),"buyoutOrder"==e){let e=Hs.getPublicAddress(),i=t.order,s={requestType:"buyoutOrderTx",orderData:i};var a=null;try{a=await ve.a.startBuyoutOrderWeb3({item:i,publicAddress:e})}catch(n){console.log("buyout order error",n)}a&&a.ethTx&&a.ethTx.transactionHash?(s.txSuccess=!0,s.txHash=a.ethTx.transactionHash,this.handleClientDataRequest(s)):(s.txSuccess=!1,this.handleClientDataRequest(s))}if("cancelOrder"==e){let e=Hs.getPublicAddress(),i=t.order,s={requestType:"cancelOrderTx",orderData:i};a=null;try{a=await ve.a.startCancelOrderWeb3({item:i,publicAddress:e})}catch(n){console.log("cancel order error",n)}console.log("  start cancel2 ",a),a&&a.ethTx&&a.ethTx.transactionHash?(s.txSuccess=!0,s.txHash=a.ethTx.transactionHash,this.handleClientDataRequest(s)):(s.txSuccess=!1,this.handleClientDataRequest(s))}if("approve"==e){await ve.a.approveTokensToPayspec(Hs.getPublicAddress())}},handleClientCommand(e,t){"setShipDirectionVector"!=e&&"lock"!=e||this.resetAllLootMenus(),this.playLocalSoundForLocalCommand(e,t),Hs.sendClientCommand(e,t)},handleOverviewRowClicked(e){var t=Es.getSceneObjectForEntity(e._id);t?this.openRightClickMenuForSceneObject(t):console.log("WARN: cannot handle right click",e,t)},onWindowResize:function(e){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight),this.$refs.starmap&&this.$refs.starmap.onWindowResize()},playLocalSoundForLocalCommand:function(e,t){var a=null;"initiateWarp"==e&&(a={playerUnit:null,actionUnit:null,soundName:"warpdriveactive"}),"dock"==e&&(a={playerUnit:null,actionUnit:null,soundName:"transmitdockingrequest"}),"lootall"==e&&(a={playerUnit:null,actionUnit:null,soundName:"lootitems"}),"lock"==e&&(a={playerUnit:null,actionUnit:null,soundName:"locking"}),a&&Os.playSoundFromEvent(a)},handleConnectionErrorMessage:function(e){this.connectionError=e}},mounted(){}},Js=Qs,Zs=Object(l["a"])(Js,L,q,!1,null,null,null),Xs=Zs.exports;a("9424");a("60af").MaticPOSClient,a("a3ae");a("99e5");var Ks=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"flex-shrink-0 py-12 text-center bg-gray-900"},[a("div",[a("router-link",{staticClass:"font-semibold text-gray-700 hover:underline",attrs:{to:"/"}},[e._v("Home")]),a("span",{staticClass:"mx-4 text-gray-500"},[e._v("|")]),a("router-link",{staticClass:"font-semibold text-gray-700 hover:underline",attrs:{to:"/login"}},[e._v("Connect")]),a("span",{staticClass:"mx-4 text-gray-500"},[e._v("|")]),a("router-link",{staticClass:"font-semibold text-gray-700 hover:underline",attrs:{to:"/docs"}},[e._v("Docs")])],1),e._m(0)])},eo=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mt-2"},[a("a",{staticClass:"text-sm font-semibold text-gray-600 hover:underline",attrs:{href:"https://github.com/etherportals"}},[e._v("\n      Source on GitHub\n    ")])])}],to={},ao=Object(l["a"])(to,Ks,eo,!1,null,null,null),no=ao.exports;a("99e5");var io={name:"Home",components:{MetamaskDropdown:R,GameCanvas:Xs,Footer:no},data(){return{activeAccountAddress:null,network:"ethereum",providerNetworkID:null,assetName:"0xBTC",roomId:null}},created(){},mounted(){console.log(this.$refs.gameCanvas),this.checkSignedIn(),window.ethereum.selectedAddress&&(U.init(),this.readWeb3Data(),this.startGameConnection())},methods:{async startGameConnection(){await this.$refs.gameCanvas.initialize()},async checkSignedIn(){await window.ethereum,console.log(window.ethereum),window.ethereum.selectedAddress||this.$router.replace("/login")},async readWeb3Data(){var e=await U.getConnectedAccounts();this.providerNetworkID=await U.getProviderNetworkID(),this.activeAccountAddress=e[0]},async setNetwork(e){this.network=e,this.$refs.txform.updateAll()},async selectAsset(e){this.assetName=e,this.$refs.txform.updateAll()}}},so=io,oo=Object(l["a"])(so,m,h,!1,null,null,null),ro=oo.exports,lo=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"flex items-center justify-center"},[n("div",{staticClass:"bg-white rounded-lg shadow-md px-6 py-6"},[n("h2",{staticClass:"font-semibold text-gray-900 text-2xl leading-tight border-b-2 border-gray-200 pb-4"},[e._v("Connect to Web3")]),e.error?e._e():n("p",{staticClass:"mt-4 text-gray-700"},[e._v("Please select a Web3 Provider below to continue.")]),e.error?n("p",{staticClass:"bg-red-500 text-white p-12"},[e._v(" "+e._s(e.error)+" ")]):e._e(),e.error?e._e():n("div",{staticClass:"mt-6"},[n("button",{staticClass:"bg-transparent hover:bg-blue-500 text-blue-700 font-semibold hover:text-white py-2 px-4 border border-blue-500 hover:border-transparent rounded",on:{click:e.requestMetamask}},[n("img",{staticClass:"inline mr-4",attrs:{src:a("c62a")}}),e._v("  Continue with Metamask\n      ")]),n("Modal",{attrs:{open:e.open},on:{close:function(t){e.open=!1}}},[n("div",{staticClass:"max-w-lg w-full bg-white rounded-lg shadow-2xl px-6 py-6"},[n("h2",{staticClass:"font-semibold text-gray-900 text-2xl leading-tight border-b-2 border-gray-200 pb-4"},[e._v("Delete account")]),n("p",{staticClass:"mt-4 text-gray-700"},[e._v("Are you absolutely sure you want to cancel your subscription and delete your account? This action cannot be undone.")]),n("div",{staticClass:"mt-6"},[n("button",{staticClass:"px-4 py-2 text-white font-semibold bg-red-500 hover:bg-red-600 border border-transparent rounded focus:outline-none focus:shadow-outline",attrs:{type:"button"},on:{click:function(t){e.open=!1}}},[e._v("\n              Delete my account\n            ")]),n("button",{staticClass:"ml-4 px-4 py-2 text-gray-800 font-semibold bg-white hover:bg-gray-100 border rounded focus:outline-none focus:shadow-outline",on:{click:function(t){e.open=!1}}},[e._v("\n              Cancel\n            ")])])])])],1)])])},co=[],uo=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("portal",{attrs:{to:"modals"}},[e.showModal?a("div",{staticClass:"fixed inset-0 flex items-center justify-center"},[a("transition",{attrs:{"enter-active-class":"transition-all transition-fast ease-out-quad","leave-active-class":"transition-all transition-medium ease-in-quad","enter-class":"opacity-0","enter-to-class":"opacity-100","leave-class":"opacity-100","leave-to-class":"opacity-0",appear:""},on:{"before-leave":function(t){e.backdropLeaving=!0},"after-leave":function(t){e.backdropLeaving=!1}}},[e.showBackdrop?a("div",[a("div",{staticClass:"absolute inset-0 bg-black opacity-25",on:{click:e.close}})]):e._e()]),a("transition",{attrs:{"enter-active-class":"transition-all transition-fast ease-out-quad","leave-active-class":"transition-all transition-medium ease-in-quad","enter-class":"opacity-0 scale-70","enter-to-class":"opacity-100 scale-100","leave-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-70",appear:""},on:{"before-leave":function(t){e.cardLeaving=!0},"after-leave":function(t){e.cardLeaving=!1}}},[e.showContent?a("div",{staticClass:"relative"},[e._t("default")],2):e._e()])],1):e._e()])},po=[],mo={props:["open"],data(){return{showModal:!1,showBackdrop:!1,showContent:!1,backdropLeaving:!1,cardLeaving:!1}},created(){const e=e=>{this.open&&27===e.keyCode&&this.close()};document.addEventListener("keydown",e),this.$once("hook:destroyed",()=>{document.removeEventListener("keydown",e)})},watch:{open:{handler:function(e){e?this.show():this.close()},immediate:!0},leaving(e){!1===e&&(this.showModal=!1,this.$emit("close"))}},computed:{leaving(){return this.backdropLeaving||this.cardLeaving}},methods:{show(){this.showModal=!0,this.showBackdrop=!0,this.showContent=!0},close(){this.showBackdrop=!1,this.showContent=!1}}},ho=mo,yo=Object(l["a"])(ho,uo,po,!1,null,null,null),go=yo.exports;const fo=a("99e5"),bo=async()=>!!window.ethereum&&(window.web3=new fo(window.ethereum),await window.ethereum.enable(),!0);var vo={components:{Modal:go},created(){this.checkForProvider()},data(){return{error:null,open:!1}},methods:{checkForProvider(){window.ethereum||(this.error="No Web3 Provider detected. Please install Metamask or use a compatible Web3 browser.")},async requestMetamask(){window.ethereum.selectedAddress||await bo();const e=await window.ethereum.request({method:"eth_requestAccounts"}),t=e[0];console.log("got acct",t),t&&this.$router.replace("/")}}},_o=vo,wo=Object(l["a"])(_o,lo,co,!1,null,null,null),Co=wo.exports,xo=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"about"},[e._m(0),a("div",{staticClass:"lg:flex mb-4"},[a("div",{staticClass:"w-full lg:w-1/3 bg-gray-300 overflow-y-scroll "},[a("div",{staticClass:"m-6 p-4 bg-gray-100"},[a("ul",[a("li",{staticClass:"text-lg text-gray-500"},[e._v(" Getting Started ")]),a("li",[a("a",{attrs:{href:"#"},on:{click:function(t){return e.setContent("purpose")}}},[e._v(" Purpose Statement ")])]),a("li",[a("a",{attrs:{href:"#"},on:{click:function(t){return e.setContent("connecting")}}},[e._v(" Connecting with Metamask ")])])])])]),a("div",{staticClass:"w-full lg:w-2/3 bg-gray-300  "},[a("div",{staticClass:"m-6 p-4 bg-gray-100"},["purpose"==e.activeContent?a("div",[a("h3",{staticClass:"text-lg"},[e._v(" Portals ")]),a("br"),a("p",[e._v("?")])]):e._e(),"connecting"==e.activeContent?a("div",[a("h3",{staticClass:"text-lg"},[e._v(" Getting Connected ")]),a("br"),e._m(1),a("br"),a("p",[e._v(" Once you have installed Metamask, you will need to add a Custom RPC for the Matic Network so that you will be able to digitally sign transactions for the Matic Network.   To do this, click on the 'Networks' dropdown at the very top of Metamask and change it from 'Main Ethereum Network' to 'Custom RPC' and use the following information: ")]),a("br"),e._m(2),a("br"),a("p",[e._v(" Once you have added the Matic Network information to Metamask, switch Metamask back to 'Ethereum Mainnet Network'.  During the use of the Dapp, you may be asked to switch over to the 'Matic Mainnet Network' when you intend to digitally sign transactions for the Matic Network and now you are prepared to do so.  ")])]):e._e()])])])])},ko=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("nav",{staticClass:"w-full z-10 pin-t",attrs:{id:"header"}},[a("div",{staticClass:"h-1 z-20 pin-t",staticStyle:{background:"linear-gradient(to right, #4dc0b5 var(--scroll), transparent 0)"},attrs:{id:"progress"}}),a("div",{staticClass:"w-full mx-auto flex flex-wrap items-center justify-between mt-0 py-3 bg-white px-4"},[a("div",{staticClass:"pl-4"},[a("a",{staticClass:"text-black text-base no-underline hover:no-underline font-extrabold text-xl",attrs:{href:"#"}},[e._v("\n  \t\t\t\t\tPortals\n  \t\t\t\t")])])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[e._v(" To connect to, you will need a Web3 compatible browser or extension such as Metamask. ("),a("a",{attrs:{href:"https://metamask.io",target:"_blank"}},[e._v("https://metamask.io")]),e._v(")    ")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ul",[a("li",[e._v(' Network Name: "Matic Network"')]),a("li",[e._v(' New RPC URL: "https://rpc-mainnet.matic.network"')]),a("li",[e._v(' Chain ID: "137" ')]),a("li",[e._v(' Symbol: "M" ')]),a("li",[e._v(' Block Explorer URL: "https://explorer.matic.network" ')])])}],To={name:"Docs",props:[],data(){return{activeContent:"purpose"}},methods:{setContent(e){console.log("set content",e),this.activeContent=e}}},So=To,Io=Object(l["a"])(So,xo,ko,!1,null,null,null),Ao=Io.exports,Po=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"flex items-center justify-center"},[e._v("\n  Not Found!\n  "),a("router-link",{attrs:{to:"/"}},[e._v("Go Home")])],1)},Do=[],Mo={name:"NotFound",data(){return{}},methods:{}},Uo=Mo,No=Object(l["a"])(Uo,Po,Do,!1,null,null,null),Eo=No.exports;n["default"].use(p["a"]);var Oo=new p["a"]({routes:[{path:"/",name:"home",component:ro},{path:"/#",name:"home",component:ro},{path:"/room/:id",name:"room",component:ro},{path:"/login",name:"login",component:Co},{path:"/docs",name:"docs",component:Ao},{path:"/*",component:Eo}]});a("db43");n["default"].config.productionTip=!1,n["default"].use(s.a),new n["default"]({router:Oo,render:e=>e(u)}).$mount("#app")},"581d":function(e){e.exports=JSON.parse('{"defi":{"skybox":"purplenebula","base_blueprint_groups":["basic","alpha","beta"]},"unikron":{"skybox":"purplenebula","base_blueprint_groups":["basic","gamma","delta"]},"legacy":{"skybox":"simplenebula","base_blueprint_groups":["basic","gamma","delta"]},"synthesis":{"skybox":"redeclipse","base_blueprint_groups":["basic","gamma","delta"]}}')},6:function(e,t){},"64a9":function(e,t,a){},"67b2":function(e,t,a){"use strict";var n=a("5508"),i=a.n(n);i.a},6843:function(e,t,a){const n=a("fb2c"),i=a("8de5"),s=a("7767"),o=a("37e8"),r=a("0764");e.exports=class e{static getProductionData(e){return e?n[e]:null}static getBlueprintGroupData(e){return i[e]}static getItemsInputForProduction(t){let a=e.getProductionData(t.internalName);return a?a.input:null}static async getBaseBlueprintsAvailableAtStation(t,a){let n=await s.findGridWithUUID(t.grid,a),i=n.constellation,o=s.getConstellationTypeData(i),r=o.base_blueprint_groups;return e.getBlueprintsFromBlueprintGroups(r)}static getBlueprintsFromBlueprintGroups(t){let a=[];for(var n of t){let t=e.getBlueprintGroupData(n);a=a.concat(t)}return a}static async startProducingItem(t,a,n,i){let r=a.internalName,l=parseInt(+n);if(!r)return{success:!1,error:"cannot produce with null itemTypeName"};if(isNaN(l))return{success:!1,error:"cannot produce that quantity"};let c=await s.findPlayerByAddress(t,i),d=await s.playerDockedInStation(c,i),u=await i.findById("units",d);if(!u)return{success:!1,error:"No docked station to produce in"};let p=await o.getContainerFromPlayerAndUnitOwner(t,d,i),m=e.getTotalInputItemsToProduce(r,l);console.log(" inputItemsTotal ",m);let h=await e.containerHasItems(m,p,i);if(!h)return console.log("WARN: input items not found! "),{success:!1,error:"input items not found"};let y={playerPublicAddress:t,stationUnitId:d,producingItemTypeName:r,quantityToProduce:l},g=await e.createNewProductionSlot(y,i);return await e.updateProductionSlot(g,i),g}static async updateProductionSlot(t,a){console.log("updateProductionSlot",t);let n=t.producingItemTypeName,i=t.quantityToProduce,s=t.stationUnitId,l=t.playerPublicAddress,c=await o.getContainerFromPlayerAndUnitOwner(l,s,a),d=(o.getItemTypeByInternalName(n),e.getTotalInputItemsToProduce(n,i));if("pending"==t.status){for(var u of d){let n=await e.findItemInContainerWithQuantity(u.internalName,u.quantity,c._id,a);n&&await e.escrowItemForProductionSlot(n,u.quantity,t,a)}let n=d.length,i=0;for(var u of d){let e=await a.findOne("items",{escrowedForProductionSlot:t._id,remainingQuantityToSpawn:null});e&&i++}i>=n&&await a.updateAndFindOne("productionSlot",{_id:t._id,status:"pending"},{status:"active"})}let p=await a.findOne("productionSlot",{_id:t._id,status:"active"});if(p){let n=p.startedAtUnixTime,i=Date.now(),s=e.getTimeToProduce(p),o=i-n>=s;await e.removeEscrowedItemsForActiveProductionSlot(t,a);let l=await a.findAll("items",{escrowedForProductionSlot:t._id});0==l.length&&o&&(console.log("all escrowed items for production removed - setting slot to complete "),await a.updateAndFindOne("productionSlot",{_id:t._id,status:"active"},{status:"complete",quantityOutputToSpawn:0,childStackLockId:r.getRandomHash()}))}let m=await a.findOne("productionSlot",{_id:t._id,status:"complete"});if(m){try{await e.spawnOutputItemForCompletedProductionSlot(m,a)}catch(h){console.log(h)}let n=await a.findOne("items",{spawnLockId:m.childStackLockId});console.log("outputItem",n),n&&await a.deleteOne("productionSlot",{_id:t._id,status:"complete"})}}static getTimeToProduce(t){let a=e.getProductionData(t.producingItemTypeName),n=+a.timeFactor,i=+t.quantityToProduce,s=i*n*1e3;return s}static async escrowItemForProductionSlot(e,t,a,n){let i=parseInt(t);if(isNaN(i))return console.trace("WARN: Tried to escrow item for production with input quantity NAN "),null;let s=e.stackQuantity,l=s-i;if(t<=0||t>s)return console.trace("WARN: Tried to escrow item for production with invalid input quantity ",e,t),null;let c=await n.updateAndFindOne("items",o.getAllowedToMoveQueryConcatenation({_id:e._id}),{escrowedForProductionSlot:a._id,stackQuantity:i,remainingQuantityToSpawn:l,childStackLockId:r.getRandomHash()}),d=c.value;return await o.spawnRemainderStackForItem(d,n),d}static async removeEscrowedItemsForActiveProductionSlot(e,t){let a=await t.findAll("items",{escrowedForProductionSlot:e._id});for(var n of a)await o.spawnRemainderStackForItem(n,t);let i=await t.deleteMany("items",{escrowedForProductionSlot:e._id,remainingQuantityToSpawn:null});return i}static async spawnOutputItemForCompletedProductionSlot(e,t){let a=e.stationUnitId,n=e.playerPublicAddress,i=await o.getContainerFromPlayerAndUnitOwner(n,a,t);if(!i)return console.trace("WARN: tried to spawn output item to invalid container ",e),null;if(!e.childStackLockId)return console.trace("WARN: tried to spawn output item with no child stack lock id ",e),null;let s=await o.spawnNewItem({containerId:i._id,internalName:e.producingItemTypeName,stackQuantity:e.quantityToProduce,spawnLockId:e.childStackLockId},t);return s}static getTotalInputItemsToProduce(t,a){let n=o.getItemTypeByInternalName(t),i=e.getItemsInputForProduction(n);console.log("meep input items ",t,n,i);let s=i.map((function(e){return{internalName:e.internalName,quantity:+e.quantity*a}}));return s}static async getNextAvailableSlotIdForPlayerAtStation(e,t){return 0}static async createNewProductionSlot(t,a){let n=Date.now(),i=await e.getNextAvailableSlotIdForPlayerAtStation(t.playerPublicAddress,t.stationUnitId,a),s=await a.insertOne("productionSlot",{playerPublicAddress:t.playerPublicAddress,stationUnitId:t.stationUnitId,slotId:i,producingItemTypeName:t.producingItemTypeName,quantityToProduce:t.quantityToProduce,startedAtUnixTime:n,status:"pending"}),o=await a.findById("productionSlot",s.insertedId);return o}static async containerHasItems(t,a,n){for(var i of t){let t=await e.findItemInContainerWithQuantity(i.internalName,i.quantity,a._id,n);if(!t)return!1}return!0}static async findItemInContainerWithQuantity(e,t,a,n){if(t=parseInt(+t),isNaN(t))return console.trace("WARN: input quantity NAN"),!1;let i={internalName:e,containerId:a,stackQuantity:{$gte:t}},s=o.getAllowedToMoveQueryConcatenation(i);return await n.findOne("items",s)}}},6985:function(e){e.exports=JSON.parse('{"laser1":{"atlasname":"weapons_sheet","slot":8,"tint":"#eaac4f"}}')},"6a87":function(e){e.exports=JSON.parse('{"corvette":{"modelname":"corvette","name":"corvette","internalName":"corvette","unittype":"ship","scaleFactor":1,"collisionRadius":1,"vitals":{"energy":100,"armor":100,"shields":100},"stats":{"max_energy":100,"max_armor":100,"max_shields":100,"mass":40,"speed":15,"warp_strength":0,"sensor_frequency":100,"sensor_range":500,"signature_radius":50,"cpu_size":15,"shield_regen":1,"energy_regen":1,"cargo_size":100},"slots":{"high":1,"mid":1,"low":1}},"katana":{"modelname":"destroyerB","name":"katana","internalName":"katana","unittype":"ship","scaleFactor":1,"collisionRadius":1,"vitals":{"energy":100,"armor":140,"shields":200},"stats":{"max_energy":100,"max_armor":100,"max_shields":100,"mass":60,"speed":15,"warp_strength":0,"sensor_frequency":100,"sensor_range":500,"signature_radius":50,"cpu_size":50,"shield_regen":1,"energy_regen":2,"cargo_size":100},"slots":{"high":1,"mid":2,"low":1}},"nymph":{"modelname":"destroyerA","name":"nymph","internalName":"nymph","unittype":"ship","scaleFactor":1,"collisionRadius":1,"vitals":{"energy":100,"armor":160,"shields":120},"stats":{"max_energy":100,"max_armor":100,"max_shields":100,"mass":40,"speed":21,"warp_strength":0,"sensor_frequency":100,"sensor_range":500,"signature_radius":50,"cpu_size":35,"shield_regen":2,"energy_regen":1,"cargo_size":100},"slots":{"high":1,"mid":2,"low":1}},"hedron":{"hedron":"haulerA","name":"hedron","internalName":"hedron","unittype":"ship","scaleFactor":1,"collisionRadius":1,"vitals":{"energy":100,"armor":200,"shields":300},"stats":{"max_energy":100,"max_armor":200,"max_shields":300,"mass":120,"speed":10,"warp_strength":0,"sensor_frequency":100,"sensor_range":500,"signature_radius":50,"cpu_size":50,"shield_regen":1,"energy_regen":2,"cargo_size":1100},"slots":{"high":0,"mid":2,"low":3}},"capsule":{"modelname":"capsule","name":"capsule","internalName":"capsule","unittype":"capsule","scaleFactor":1,"collisionRadius":1,"vitals":{"energy":0,"armor":100,"shields":100},"stats":{"max_energy":0,"max_armor":100,"max_shields":100,"mass":20,"speed":15,"warp_strength":0,"sensor_frequency":100,"sensor_range":200,"signature_radius":10,"cpu_size":0,"shield_regen":1},"slots":{"high":0,"mid":0,"low":0}},"minordrone":{"modelname":"lightDroneOrange","name":"minor drone","internalName":"minordrone","unittype":"ship","scaleFactor":1,"collisionRadius":1,"vitals":{"energy":50,"armor":25,"shields":25},"stats":{"max_energy":50,"max_armor":25,"max_shields":25,"mass":40,"speed":12,"warp_strength":0,"sensor_frequency":100,"sensor_range":500,"signature_radius":50,"cpu_size":50,"shield_regen":1},"slots":{"high":2,"mid":2,"low":1}},"scoutdrone":{"modelname":"scoutDroneRed","name":"scout drone","internalName":"scoutdrone","unittype":"ship","scaleFactor":1,"collisionRadius":1,"vitals":{"energy":50,"armor":25,"shields":45},"stats":{"max_energy":50,"max_armor":25,"max_shields":45,"mass":40,"speed":15,"warp_strength":0,"sensor_frequency":100,"sensor_range":500,"signature_radius":50,"cpu_size":50,"shield_regen":1},"slots":{"high":2,"mid":2,"low":1}},"attackdrone":{"modelname":"attackDroneRed","name":"attack drone","internalName":"scoutdrone","unittype":"ship","scaleFactor":1,"collisionRadius":1,"vitals":{"energy":50,"armor":35,"shields":55},"stats":{"max_energy":50,"max_armor":35,"max_shields":55,"mass":60,"speed":11,"warp_strength":0,"sensor_frequency":100,"sensor_range":500,"signature_radius":50,"cpu_size":50,"shield_regen":1},"slots":{"high":2,"mid":2,"low":1}},"renegadelancer":{"modelname":"frigateA","name":"renegade lancer","internalName":"renegadelancer","unittype":"ship","scaleFactor":1,"collisionRadius":1,"vitals":{"energy":100,"armor":50,"shields":45},"stats":{"max_energy":100,"max_armor":50,"max_shields":45,"mass":40,"speed":17,"warp_strength":0,"sensor_frequency":200,"sensor_range":500,"signature_radius":50,"cpu_size":50,"shield_regen":1},"slots":{"high":2,"mid":2,"low":1}},"renegadebomber":{"modelname":"destroyerA","name":"renegade bomber","internalName":"renegadebomber","unittype":"ship","scaleFactor":1,"collisionRadius":1,"vitals":{"energy":100,"armor":90,"shields":45},"stats":{"max_energy":100,"max_armor":50,"max_shields":45,"mass":40,"speed":12,"warp_strength":0,"sensor_frequency":200,"sensor_range":500,"signature_radius":50,"cpu_size":50,"shield_regen":1},"slots":{"high":2,"mid":2,"low":1}},"renegadewingleader":{"modelname":"destroyerB","name":"renegade wingleader","internalName":"renegadewingleader","unittype":"ship","scaleFactor":1,"collisionRadius":1,"vitals":{"energy":100,"armor":150,"shields":145},"stats":{"max_energy":100,"max_armor":150,"max_shields":145,"mass":40,"speed":17,"warp_strength":0,"sensor_frequency":200,"sensor_range":500,"signature_radius":50,"cpu_size":50,"shield_regen":2},"slots":{"high":2,"mid":2,"low":1}},"synthetichunter":{"modelname":"probe","name":"synthetic hunter","internalName":"synthetichunter","unittype":"ship","scaleFactor":1,"collisionRadius":1,"vitals":{"energy":100,"armor":80,"shields":25},"stats":{"max_energy":100,"max_armor":80,"max_shields":25,"mass":40,"speed":22,"warp_strength":0,"sensor_frequency":200,"sensor_range":500,"signature_radius":50,"cpu_size":50,"shield_regen":2},"slots":{"high":2,"mid":2,"low":1}},"syntheticassimilator":{"modelname":"cruiserA","name":"synthetic assimilator","internalName":"syntheticassimilator","unittype":"ship","scaleFactor":1,"collisionRadius":1,"vitals":{"energy":150,"armor":180,"shields":225},"stats":{"max_energy":150,"max_armor":180,"max_shields":225,"mass":100,"speed":14,"warp_strength":0,"sensor_frequency":400,"sensor_range":500,"signature_radius":150,"cpu_size":50,"shield_regen":2},"slots":{"high":2,"mid":2,"low":1}},"darkchildhorror":{"modelname":"cruiserA","name":"darkchild horror","internalName":"darkchildhorror","unittype":"ship","scaleFactor":1,"collisionRadius":1,"vitals":{"energy":150,"armor":180,"shields":225},"stats":{"max_energy":150,"max_armor":180,"max_shields":225,"mass":100,"speed":14,"warp_strength":0,"sensor_frequency":400,"sensor_range":500,"signature_radius":150,"cpu_size":50,"shield_regen":2},"slots":{"high":2,"mid":2,"low":1}},"shipwreck":{"modelname":"shipDebrisA","name":"shipwreck","internalName":"shipwreck","unittype":"wreck","scaleFactor":1,"collisionRadius":5,"interactRadius":100,"services":["looting"],"vitals":{"energy":0,"armor":200,"shields":0},"stats":{"max_energy":0,"max_armor":200,"max_shields":0,"mass":40,"speed":0,"warp_strength":0,"sensor_frequency":0,"sensor_range":0,"signature_radius":50,"cpu_size":0,"shield_regen":0},"slots":{"high":0,"mid":0,"low":0}},"structurewreck":{"modelname":"structureDebrisA","name":"structurewreck","internalName":"structurewreck","unittype":"wreck","scaleFactor":5,"collisionRadius":50,"interactRadius":100,"services":["looting"],"vitals":{"energy":0,"armor":200,"shields":0},"stats":{"max_energy":0,"max_armor":200,"max_shields":0,"mass":40,"speed":0,"warp_strength":0,"sensor_frequency":0,"sensor_range":0,"signature_radius":50,"cpu_size":0,"shield_regen":0},"slots":{"high":0,"mid":0,"low":0}},"planetA":{"modelname":"planetA","internalName":"planetA","name":"Large Water Planet","unittype":"doodad","scaleFactor":200,"collisionRadius":600,"vitals":{"energy":0,"armor":10000,"shields":0},"invulnerable":true,"stats":{"max_energy":0,"max_armor":10000,"max_shields":0}},"planetB":{"modelname":"planetB","internalName":"planetB","name":"Ice Planet","unittype":"doodad","scaleFactor":200,"collisionRadius":600,"vitals":{"energy":0,"armor":10000,"shields":0},"invulnerable":true,"stats":{"max_energy":0,"max_armor":10000,"max_shields":0}},"planetC":{"modelname":"planetC","name":"Water Planet","unittype":"doodad","scaleFactor":150,"collisionRadius":600,"vitals":{"energy":0,"armor":10000,"shields":0},"invulnerable":true,"stats":{"max_energy":0,"max_armor":10000,"max_shields":0}},"planetD":{"modelname":"planetD","name":"Barren Planet","unittype":"doodad","scaleFactor":200,"collisionRadius":600,"vitals":{"energy":0,"armor":10000,"shields":0},"invulnerable":true,"stats":{"max_energy":0,"max_armor":10000,"max_shields":0}},"planetE":{"modelname":"planetE","name":"Broken Planet","unittype":"doodad","scaleFactor":200,"collisionRadius":600,"vitals":{"energy":0,"armor":10000,"shields":0},"invulnerable":true,"stats":{"max_energy":0,"max_armor":10000,"max_shields":0}},"planetF":{"modelname":"planetF","name":"Small Moon","unittype":"doodad","scaleFactor":200,"collisionRadius":600,"vitals":{"energy":0,"armor":10000,"shields":0},"invulnerable":true,"stats":{"max_energy":0,"max_armor":10000,"max_shields":0}},"planetH":{"modelname":"planetH","name":"Large Moon","unittype":"doodad","scaleFactor":200,"collisionRadius":600,"vitals":{"energy":0,"armor":10000,"shields":0},"invulnerable":true,"stats":{"max_energy":0,"max_armor":10000,"max_shields":0}},"planetI":{"modelname":"planetI","name":"Island Planet","unittype":"doodad","scaleFactor":200,"collisionRadius":600,"vitals":{"energy":0,"armor":10000,"shields":0},"invulnerable":true,"stats":{"max_energy":0,"max_armor":10000,"max_shields":0}},"planetL":{"modelname":"planetL","name":"Ice Comet","unittype":"doodad","scaleFactor":100,"collisionRadius":300,"vitals":{"energy":0,"armor":10000,"shields":0},"invulnerable":true,"stats":{"max_energy":0,"max_armor":10000,"max_shields":0}},"warpgateA":{"modelname":"warpgateA","name":"Ancient Warp Gate","unittype":"warpgate","scaleFactor":1,"collisionRadius":25,"interactRadius":100,"services":["jumping"],"vitals":{"energy":0,"armor":10000,"shields":10000},"invulnerable":true,"stats":{"max_energy":0,"max_armor":10000,"max_shields":10000}},"warpgateB":{"modelname":"warpgateB","name":"Warp Gate","unittype":"warpgate","scaleFactor":1,"collisionRadius":25,"interactRadius":100,"services":["jumping"],"vitals":{"energy":0,"armor":10000,"shields":10000},"invulnerable":true,"stats":{"max_energy":0,"max_armor":10000,"max_shields":10000}},"warpgateC":{"modelname":"warpgateC","name":"Warp Gate","unittype":"warpgate","scaleFactor":1,"collisionRadius":25,"interactRadius":100,"services":["jumping"],"vitals":{"energy":0,"armor":10000,"shields":10000},"invulnerable":true,"stats":{"max_energy":0,"max_armor":10000,"max_shields":10000}},"warpgateD":{"modelname":"warpgateD","name":"Warp Gate","unittype":"warpgate","scaleFactor":1,"collisionRadius":25,"interactRadius":100,"services":["jumping"],"vitals":{"energy":0,"armor":10000,"shields":10000},"invulnerable":true,"stats":{"max_energy":0,"max_armor":10000,"max_shields":10000}},"warpgateE":{"modelname":"warpgateE","name":"Warp Gate","unittype":"warpgate","scaleFactor":1,"collisionRadius":25,"interactRadius":100,"services":["jumping"],"vitals":{"energy":0,"armor":10000,"shields":10000},"invulnerable":true,"stats":{"max_energy":0,"max_armor":10000,"max_shields":10000}},"warpgateF":{"modelname":"warpgateF","name":"Warp Gate","unittype":"warpgate","scaleFactor":1,"collisionRadius":25,"interactRadius":100,"services":["jumping"],"vitals":{"energy":0,"armor":10000,"shields":10000},"invulnerable":true,"stats":{"max_energy":0,"max_armor":10000,"max_shields":10000}},"warpgateG":{"modelname":"warpgateG","name":"Warp Gate","unittype":"warpgate","scaleFactor":1,"collisionRadius":25,"interactRadius":100,"services":["jumping"],"vitals":{"energy":0,"armor":10000,"shields":10000},"invulnerable":true,"stats":{"max_energy":0,"max_armor":10000,"max_shields":10000}},"warpgateH":{"modelname":"warpgateH","name":"Warp Gate","unittype":"warpgate","scaleFactor":1,"collisionRadius":25,"interactRadius":100,"services":["jumping"],"vitals":{"energy":0,"armor":10000,"shields":10000},"invulnerable":true,"stats":{"max_energy":0,"max_armor":10000,"max_shields":10000}},"stationC":{"modelname":"stationC","name":"Station","unittype":"station","scaleFactor":2,"collisionRadius":100,"interactRadius":150,"services":["docking","market"],"vitals":{"energy":10000,"armor":10000,"shields":10000},"invulnerable":true,"stats":{"max_energy":10000,"max_armor":10000,"max_shields":10000}},"stationB":{"modelname":"stationB","name":"Station","unittype":"station","scaleFactor":2,"collisionRadius":100,"interactRadius":150,"services":["docking","market"],"vitals":{"energy":10000,"armor":10000,"shields":10000},"invulnerable":true,"stats":{"max_energy":10000,"max_armor":10000,"max_shields":10000}},"stationD":{"modelname":"stationD","name":"Station","unittype":"station","scaleFactor":2,"collisionRadius":100,"interactRadius":150,"services":["docking","market"],"vitals":{"energy":10000,"armor":10000,"shields":10000},"invulnerable":true,"stats":{"max_energy":10000,"max_armor":10000,"max_shields":10000}},"rocksA":{"modelname":"rocksA","name":"Large Rocks","unittype":"doodad","scaleFactor":50,"collisionRadius":1,"vitals":{"energy":0,"armor":10000,"shields":0},"invulnerable":true,"stats":{"max_energy":0,"max_armor":10000,"max_shields":0}},"artifactA":{"modelname":"artifact1","name":"Curious Artifact","unittype":"doodad","scaleFactor":5,"collisionRadius":1,"vitals":{"energy":0,"armor":10000,"shields":0},"invulnerable":true,"stats":{"max_energy":0,"max_armor":10000,"max_shields":10000}},"artifactB":{"modelname":"artifact2","name":"Hostile Artifact","unittype":"doodad","scaleFactor":5,"collisionRadius":1,"vitals":{"energy":0,"armor":10000,"shields":0},"invulnerable":true,"stats":{"max_energy":0,"max_armor":10000,"max_shields":0}},"artifactC":{"modelname":"artifact3","name":"Mysterious Artifact","unittype":"doodad","scaleFactor":5,"collisionRadius":1,"vitals":{"energy":0,"armor":10000,"shields":0},"invulnerable":true,"stats":{"max_energy":0,"max_armor":10000,"max_shields":0}},"artifactD":{"modelname":"artifact4","name":"Strange Artifact","unittype":"doodad","scaleFactor":5,"collisionRadius":5,"vitals":{"energy":0,"armor":10000,"shields":0},"invulnerable":true,"stats":{"max_energy":0,"max_armor":10000,"max_shields":0}},"artifactE":{"modelname":"artifact5","name":"Dangerous Artifact","unittype":"doodad","scaleFactor":5,"collisionRadius":5,"vitals":{"energy":0,"armor":10000,"shields":0},"invulnerable":true,"stats":{"max_energy":0,"max_armor":10000,"max_shields":0}},"ruinedStructure":{"modelname":"structureDebrisA","name":"Ruined Structure","unittype":"doodad","scaleFactor":5,"collisionRadius":5,"vitals":{"energy":0,"armor":10000,"shields":0},"invulnerable":true,"stats":{"max_energy":0,"max_armor":10000,"max_shields":0}},"ruinedShip":{"modelname":"shipDebrisA","name":"Ruined Ship","unittype":"doodad","scaleFactor":5,"collisionRadius":5,"vitals":{"energy":0,"armor":10000,"shields":0},"invulnerable":true,"stats":{"max_energy":0,"max_armor":10000,"max_shields":0}},"ruinedShipyardA":{"modelname":"ruinedshipyard1","name":"Ruined Shipyard","unittype":"doodad","scaleFactor":5,"collisionRadius":5,"vitals":{"energy":0,"armor":10000,"shields":0},"invulnerable":true,"stats":{"max_energy":0,"max_armor":10000,"max_shields":0}},"ruinedShipyardB":{"modelname":"ruinedshipyard2","name":"Ruined Shipyard","unittype":"doodad","scaleFactor":5,"collisionRadius":5,"vitals":{"energy":0,"armor":10000,"shields":0},"invulnerable":true,"stats":{"max_energy":0,"max_armor":10000,"max_shields":0}},"chunkyblock":{"modelname":"chunkyblock","name":"Artifact","unittype":"doodad","scaleFactor":5,"collisionRadius":5,"vitals":{"energy":0,"armor":10000,"shields":0},"invulnerable":true,"stats":{"max_energy":0,"max_armor":10000,"max_shields":0}},"ancientGateA":{"modelname":"ancientgate","name":"Ancient Gate","unittype":"doodad","scaleFactor":5,"collisionRadius":5,"vitals":{"energy":0,"armor":10000,"shields":0},"invulnerable":true,"stats":{"max_energy":0,"max_armor":10000,"max_shields":0}},"ancientGateB":{"modelname":"ancientgate2","name":"Ancient Gate","unittype":"doodad","scaleFactor":5,"collisionRadius":5,"vitals":{"energy":0,"armor":10000,"shields":0},"invulnerable":true,"stats":{"max_energy":0,"max_armor":10000,"max_shields":0}},"solarArray":{"modelname":"solararray","name":"Solar Array","unittype":"doodad","scaleFactor":5,"collisionRadius":5,"vitals":{"energy":0,"armor":10000,"shields":0},"invulnerable":true,"stats":{"max_energy":0,"max_armor":10000,"max_shields":0}}}')},"6dc1":function(e){e.exports=JSON.parse('{"drones":{"internalName":"drones","publicAddress":"0xB3d2Cd64D8D0aA3Aca81346AC9d74eb57E4CB771","homeGridUUID":""},"gaia":{"internalName":"gaia","publicAddress":"0xC8cFe25eF7923c5F9e3d4982047C82cE8dD73F6F","homeGridUUID":""},"satoshislegion":{"internalName":"satoshislegion","publicAddress":"0x5E8EBC53146fBDD2b0F9fa21bD637cB3bD3beE92","homeGridUUID":"86dbca36ab49ae87","startGridUUID":"3a18a44ca7cc6000","allowsPlayers":true},"childrenofethereum":{"internalName":"childrenofethereum","publicAddress":"0x4860b5273468d66f52D56D4D0913e32DD611419C","homeGridUUID":"86dbca36ab49ae87","startGridUUID":"3a18a44ca7cc6000","allowsPlayers":true},"synthetics":{"internalName":"synthetics","publicAddress":"0x952cfcC32966e1940ADbAac2425F9E8fA84cd358","homeGridUUID":"86dbca36ab49ae87","startGridUUID":"3a18a44ca7cc6000","allowsPlayers":true},"renegades":{"internalName":"renegades","publicAddress":"0x1cd59A9fBd08BFc3671eB0B855161eFD8995Ad87","homeGridUUID":"86dbca36ab49ae87","startGridUUID":"3a18a44ca7cc6000","allowsPlayers":true}}')},7:function(e,t){},7002:function(e,t){function a(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return[]},a.resolve=a,e.exports=a,a.id="7002"},7767:function(e,t,a){const n=a("5a89");var i=a("f9f6"),s=a("2912"),o=a("581d");const r=a("6a87"),l=a("2bd2"),c=a("6dc1"),d=a("8ef7");e.exports=class e{constructor(){}static getNameForUnit(e){return e.mobtype?l[e.mobtype].name:e.basetype?r[e.basetype].name:"?"}static getSkyboxForGrid(e){let t=e.constellation,a=o[t];return a.skybox}static celestialGridIsPermanent(e){return"anomaly"!=e.celestialtype}static canDeployStructureOnGrid(e){if("planet"==e.celestialtype)return!0}static getUnitBaseTypeData(e){return e?r[e.basetype]:null}static getMobTypeData(e){return e?l[e.mobtype]:null}static getFactionData(e){return e?c[e]:null}static getConstellationTypeData(e){return e?o[e]:null}static getEquipmentTypeData(e){return d[e]}static async findUnitById(e,t){return await t.findById("units",e)}static async findGridWithUUID(e,t){return await t.findOne("celestialgrid",{uuid:e})}static async findPlayerByAddress(e,t){return await t.findOne("activePlayers",{publicAddress:e.toLowerCase()})}static async findAllEquipmentOnShip(e,t){return await t.findAll("equipmentSlots",{unitId:e._id})}static async findAllEquipmentEngagedTargettingShip(e,t){return await t.findAll("equipmentSlots",{targetUnitId:e._id,engaged:!0})}static playerOwnsUnit(e,t){return t.owningPlayerAddress.toLowerCase()==e.publicAddress.toLowerCase()}static async getPlayerHomeStation(t,a){let n="86dbca36ab49ae87";if(t.playerFaction){let a=e.getFactionData(t.playerFaction);a&&a.allowsPlayers&&(n=t.homeStationGridUUID)}let i=await e.findGridWithUUID(n,a),s=await a.findOne("units",{grid:i.uuid,unittype:"station"});return s}static getPlayerOwnerAddressForUnit(t){let a=t.owningPlayerAddress;if(!a){if(!t.aiFaction)return console.trace("WARN: null owner address for ",t),null;a=e.getFactionData(t.aiFaction).publicAddress}return a}static getCelestialsInSolarsystem(e){return i[e.toLowerCase()].celestials}static async getListOfGridsWithPlayers(e){var t=await e.findAll("celestialgrid",{hasActivePlayerUnits:!0});return t}static getCelestialData(t){var a=s[t.type];return{name:e.getCelestialName(t,a),uuid:t.uuid,celestialtype:a.celestialtype,staticEntities:a.entities,warpInLocationVector:new n.Vector3(t.x,t.y,t.z),basetype:t.type}}static getCelestialName(e,t){switch(t.celestialtype){case"warpgate":return"Warp Gate - ".concat(e.jumpDestinationSystemName);case"anomaly":return e.name;case"planet":return e.name;case"structure":return e.name}}static async getEntitiesOnGrid(e,t){var a=await t.findOne("celestialgrid",{uuid:e}),n=await t.findAll("units",{grid:e,active:!0});return{grid:a,entities:n}}static async getActiveItemContainerEncapsulatingUnitIDForPlayer(t,a){let n=await e.getPossessedUnitForPlayer(t,a),i=await e.playerDockedInStation(t,a);return i?n.dockedInStation:t.possessedUnitId?t.possessedUnitId:(console.log("WARN: Could not get active item container for ",t),null)}static getFacingVectorFromGridToGrid(e,t){var a=new n.Vector3(e.gridLocationVector.x,e.gridLocationVector.y,e.gridLocationVector.z),i=a.clone().sub(t.gridLocationVector).normalize().negate();return i}static async playerDockedInStation(t,a){let n=await e.getPossessedUnitForPlayer(t,a);return n.dockedInStation}static async getPossessedUnitForPlayer(e,t){return await t.findById("units",e.possessedUnitId)}}},"7e9c":function(e,t,a){const n=a("6985");e.exports=class{static getBackgroundOffsetFromImageSlot(e,t,a){let n=Math.floor(e%a),i=Math.floor(e/a),s=Math.floor(-1*n*t).toString(),o=Math.floor(-1*i*t).toString();return s.concat("px ").concat(o).concat("px")}static getIconDetailsFromIconName(e){return n[e]}}},8:function(e,t){},"8de5":function(e){e.exports=JSON.parse('{"basic":["heavyarmorplating","basicarmorplating","warpcore","fluxreactor","teslacoil","reinforcedarmorplate","smallcoprocessor","shieldbattery","energycore","supercapacitor"],"alpha":[],"beta":[],"gamma":[],"delta":[]}')},"8ef7":function(e){e.exports=JSON.parse('{"devcannon":{"activation_energy":0,"activation_cooldown_ticks":5,"activation_sound_name":"dramatic_laser","effect_range":400,"bullet_type":"laser","target_type":"other","equipment_slot":"high","cpu":0,"weapon_stats":{"damage_em":999,"damage_kin":20,"weapon_range":1000,"weapon_optimal":900,"weapon_tracking":10}},"civiliancannon":{"activation_energy":0,"activation_cooldown_ticks":5,"activation_sound_name":"impact_shot","effect_range":400,"bullet_type":"laser","target_type":"other","equipment_slot":"high","cpu":1,"weapon_stats":{"damage_em":20,"damage_kin":0,"weapon_range":400,"weapon_optimal":200,"weapon_tracking":10}},"roguephotoncannon":{"activation_energy":0,"activation_cooldown_ticks":10,"activation_sound_name":"tiny_laser","effect_range":400,"bullet_type":"laser","target_type":"other","equipment_slot":"high","cpu":0,"weapon_stats":{"damage_em":10,"damage_kin":0,"weapon_range":300,"weapon_optimal":200,"weapon_tracking":10},"stat_bonuses_self":{"energy":0,"armor":0,"shields":0,"mass":0,"speed":0,"warp_strength":0},"vitals_deltas_self":{},"stat_bonuses_target":{"energy":0,"armor":0,"shields":0,"mass":0,"speed":0,"warp_strength":0},"vitals_deltas_target":{}},"roguebarragecannon":{"activation_energy":0,"activation_cooldown_ticks":10,"activation_sound_name":"definite_shot","effect_range":400,"bullet_type":"explosive","target_type":"other","equipment_slot":"high","cpu":10,"weapon_stats":{"damage_em":10,"damage_kin":30,"weapon_range":100,"weapon_optimal":80,"weapon_tracking":10},"stat_bonuses_self":{},"vitals_deltas_self":{},"stat_bonuses_target":{},"vitals_deltas_target":{}},"roguerailgun":{"activation_energy":0,"activation_cooldown_ticks":20,"activation_sound_name":"electric_laser","bullet_type":"explosive","effect_range":400,"target_type":"other","equipment_slot":"high","cpu":10,"weapon_stats":{"damage_em":10,"damage_kin":30,"weapon_range":500,"weapon_optimal":200,"weapon_tracking":10},"stat_bonuses_self":{},"vitals_deltas_self":{},"stat_bonuses_target":{},"vitals_deltas_target":{}},"roguebomblauncher":{"activation_energy":0,"activation_cooldown_ticks":20,"activation_sound_name":"electric_laser","effect_range":400,"bullet_type":"explosive","target_type":"other","equipment_slot":"high","cpu":10,"weapon_stats":{"damage_em":10,"damage_kin":30,"weapon_range":100,"weapon_optimal":50,"weapon_tracking":400},"stat_bonuses_self":{},"vitals_deltas_self":{},"stat_bonuses_target":{},"vitals_deltas_target":{}},"lightrailgun":{"activation_energy":5,"activation_cooldown_ticks":10,"activation_sound_name":"electric_laser","effect_range":400,"bullet_type":"laser","target_type":"other","equipment_slot":"high","cpu":20,"weapon_stats":{"damage_em":30,"damage_kin":10,"weapon_range":500,"weapon_optimal":200,"weapon_tracking":40},"stat_bonuses_self":{},"vitals_deltas_self":{},"stat_bonuses_target":{},"vitals_deltas_target":{}},"hypercannon":{"activation_energy":5,"activation_cooldown_ticks":10,"activation_sound_name":"impact_shot","effect_range":400,"bullet_type":"laser","target_type":"other","equipment_slot":"high","cpu":20,"weapon_stats":{"damage_em":30,"damage_kin":10,"weapon_range":150,"weapon_optimal":100,"weapon_tracking":400},"stat_bonuses_self":{},"vitals_deltas_self":{},"stat_bonuses_target":{},"vitals_deltas_target":{}},"vectormissilebay":{"activation_energy":5,"activation_cooldown_ticks":10,"activation_sound_name":"missile_launch","effect_range":400,"bullet_type":"explosive","target_type":"other","equipment_slot":"high","cpu":20,"weapon_stats":{"damage_em":10,"damage_kin":10,"weapon_range":500,"weapon_optimal":500,"weapon_tracking":2000},"stat_bonuses_self":{},"vitals_deltas_self":{},"stat_bonuses_target":{},"vitals_deltas_target":{}},"rapidrocketlauncher":{"activation_energy":5,"activation_cooldown_ticks":4,"activation_sound_name":"missile_launch","effect_range":400,"bullet_type":"explosive","target_type":"other","equipment_slot":"high","cpu":20,"weapon_stats":{"damage_em":0,"damage_kin":15,"weapon_range":100,"weapon_optimal":100,"weapon_tracking":2000},"stat_bonuses_self":{},"vitals_deltas_self":{},"stat_bonuses_target":{},"vitals_deltas_target":{}},"gatlingcannon":{"activation_energy":1,"activation_cooldown_ticks":4,"activation_sound_name":"hard_shot","effect_range":400,"bullet_type":"explosive","target_type":"other","equipment_slot":"high","cpu":10,"weapon_stats":{"damage_em":4,"damage_kin":5,"weapon_range":200,"weapon_optimal":100,"weapon_tracking":500},"stat_bonuses_self":{},"vitals_deltas_self":{},"stat_bonuses_target":{},"vitals_deltas_target":{}},"smallenergyneutralizer":{"activation_energy":3,"activation_cooldown_ticks":4,"effect_range":400,"target_type":"other","equipment_slot":"high","cpu":25,"weapon_stats":{},"vitals_deltas_target":{"energy":-4}},"mediumenergyneutralizer":{"activation_energy":8,"activation_cooldown_ticks":4,"effect_range":400,"target_type":"other","equipment_slot":"high","cpu":125,"weapon_stats":{},"vitals_deltas_target":{"energy":-12}},"smallshieldregenerator":{"activation_energy":2,"activation_cooldown_ticks":10,"effect_range":400,"target_type":"self","equipment_slot":"mid","cpu":10,"weapon_stats":{},"vitals_deltas_self":{"shields":25}},"smallshieldrecharger":{"target_type":"passive","equipment_slot":"mid","effect_range":400,"cpu":10,"weapon_stats":{},"stat_bonuses_self":{"shield_regen":1}},"smallbatteryrecharger":{"target_type":"passive","equipment_slot":"low","cpu":10,"weapon_stats":{},"stat_bonuses_self":{"energy_regen":2}},"smallcapacitorbank":{"target_type":"passive","equipment_slot":"low","cpu":10,"weapon_stats":{},"stat_bonuses_self":{"max_energy":50}},"smallcoprocessor":{"target_type":"passive","equipment_slot":"low","cpu":0,"weapon_stats":{},"stat_bonuses_self":{"cpu_size":15}},"smallcargoexpansion":{"target_type":"passive","equipment_slot":"low","cpu":0,"weapon_stats":{},"stat_bonuses_self":{"cargo_size":50,"mass":10}},"atomicpropulsor":{"activation_energy":2,"activation_cooldown_ticks":10,"target_type":"self","equipment_slot":"mid","cpu":15,"weapon_stats":{},"stat_bonuses_self":{"speed":10}},"warpfielddisruptor":{"activation_energy":2,"activation_cooldown_ticks":10,"effect_range":250,"target_type":"other","equipment_slot":"mid","cpu":25,"weapon_stats":{},"stat_bonuses_target":{"warp_strength":-1}},"smallstasiswebifier":{"activation_energy":2,"activation_cooldown_ticks":10,"effect_range":250,"target_type":"other","equipment_slot":"mid","cpu":15,"weapon_stats":{},"stat_bonuses_target":{"speed":-15}},"heavyarmorplating":{"target_type":"passive","equipment_slot":"low","cpu":25,"weapon_stats":{},"stat_bonuses_self":{"max_armor":100,"mass":6}},"basicarmorplating":{"target_type":"passive","equipment_slot":"low","cpu":5,"weapon_stats":{},"stat_bonuses_self":{"max_armor":50,"mass":5}}}')},9:function(e,t){},9174:function(e){e.exports=JSON.parse('{"targetlock":{"path":"ui/targetlock2.png"},"targetlock_green":{"path":"ui/targetlock2_green.png"},"materials_sheet":{"path":"icon_sheets/materials_sheet.jpg"},"modules_sheet":{"path":"icon_sheets/modules_sheet.jpg"},"weapons_sheet":{"path":"icon_sheets/weapons_sheet.jpg"},"explosions_1":{"path":"sprites/explo1.png"},"explosions_2":{"path":"sprites/explo2.png"}}')},9424:function(e,t){e.exports={assets:{"0xBTC":{Decimals:8,EthereumContract:"0xb6ed7644c69416d67b522e20bc294a9a9b405b31",MaticContract:"0x71B821aa52a49F32EEd535fCA6Eb5aa130085978",EthereumPredicateContract:"0x40ec5b33f54e0e8a33a975908c5ba1c14e5bbbdf"},Matic:{Decimals:18,EthereumContract:"0x7d1afa7b718fb893db30a3abc0cfc608aacfebb0",MaticContract:"0x0000000000000000000000000000000000001010",EthereumPredicateContract:"0x40ec5b33f54e0e8a33a975908c5ba1c14e5bbbdf"},Dai:{Decimals:18,EthereumContract:"0x6b175474e89094c44da98b954eedeac495271d0f",MaticContract:"0x8f3Cf7ad23Cd3CaDbD9735AFf958023239c6A063",EthereumPredicateContract:"0x40ec5b33f54e0e8a33a975908c5ba1c14e5bbbdf"},KIWI:{Decimals:8,EthereumContract:"0x2bf91c18cd4ae9c2f2858ef9fe518180f7b5096d",MaticContract:"0x578360AdF0BbB2F10ec9cEC7EF89Ef495511ED5f",EthereumPredicateContract:"0x40ec5b33f54e0e8a33a975908c5ba1c14e5bbbdf"},WETH:{Decimals:18,EthereumContract:"0xa45b966996374E9e65ab991C6FE4Bfce3a56DDe8",MaticContract:"0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619",EthereumPredicateContract:"0x40ec5b33f54e0e8a33a975908c5ba1c14e5bbbdf"}}}},"95df":function(e,t){e.exports={tokenName:"0xBTC",tokenContractAddress:"0x71B821aa52a49F32EEd535fCA6Eb5aa130085978",tokenDecimals:8}},"9cc2":function(e){e.exports=JSON.parse('{"jumpgate_connections":[{"systemA":"the circle","systemB":"antonopoulos","type":"warpgate1"},{"systemA":"the circle","systemB":"hallow","type":"warpgate1"},{"systemA":"the circle","systemB":"llarval","type":"warpgate1"},{"systemA":"hallow","systemB":"misery","type":"warpgate2"},{"systemA":"the void","systemB":"misery","type":"warpgate2"},{"systemA":"cerberus","systemB":"hallow","type":"warpgate1"},{"systemA":"V-II","systemB":"antonopoulos","type":"warpgate1"},{"systemA":"tarcq","systemB":"antonopoulos","type":"warpgate1"},{"systemA":"tarcq","systemB":"the fringe","type":"warpgate1"},{"systemA":"rekkt","systemB":"antonopoulos","type":"warpgate1"},{"systemA":"tarcq","systemB":"majora minor","type":"warpgate1"},{"systemA":"rekkt","systemB":"majora minor","type":"warpgate1"},{"systemA":"majora minor","systemB":"mikers","type":"warpgate1"},{"systemA":"mikers","systemB":"xel","type":"warpgate1"},{"systemA":"mikers","systemB":"orwyn","type":"warpgate1"},{"systemA":"orwyn","systemB":"adastar","type":"warpgate1"},{"systemA":"orwyn","systemB":"synthesis","type":"warpgate1"},{"systemA":"V-II","systemB":"turbulensa","type":"warpgate1"},{"systemA":"llarval","systemB":"turbulensa","type":"warpgate4"},{"systemA":"llarval","systemB":"hal","type":"warpgate4"},{"systemA":"hal","systemB":"azlehria","type":"warpgate7"},{"systemA":"hal","systemB":"M-VIS","type":"warpgate7"},{"systemA":"satoshi","systemB":"azlehria","type":"warpgate7"},{"systemA":"szabo","systemB":"azlehria","type":"warpgate7"},{"systemA":"M-VIS","systemB":"azlehria","type":"warpgate7"},{"systemA":"satoshi","systemB":"hal","type":"warpgate7"}]}')},a284:function(e,t){e.exports=class{static isValidObjectId(e){return e&&"object"===typeof e}static documentIdsAreEqual(e,t){return e?t?e.toString()==t.toString():(console.trace("id2 null"),!1):(console.trace("id1 null"),!1)}}},a2cc:function(e,t,a){a("5a89");const n=a("7767");e.exports=class e{constructor(){}static getInitialVitalsForEntityType(t){let a=e.getInitialStatsForEntityType(t),i=n.getUnitBaseTypeData({basetype:t}).vitals;return{energy:Math.min(i.energy,a.max_energy),shields:Math.min(i.shields,a.max_shields),armor:Math.min(i.armor,a.max_armor)}}static getInitialStatsForEntityType(e){return n.getUnitBaseTypeData({basetype:e}).stats}static async modifyUnitVitals(e,t,a){let i=await n.findUnitById(e,a);if(!t||0==Object.keys(t).length)return;if(!i)return;let s=i.vitals,o=i.stats,r=Object.assign({},s);isNaN(t.energy)||(r.energy=Math.min(Math.max(parseInt(s.energy)+parseInt(t.energy),0),parseInt(o.max_energy))),isNaN(t.shields)||(r.shields=Math.min(Math.max(parseInt(s.shields)+parseInt(t.shields),0),parseInt(o.max_shields))),isNaN(t.armor)||(r.armor=Math.min(Math.max(parseInt(s.armor)+parseInt(t.armor),0),parseInt(o.max_armor)));let l=await a.updateAndFindOne("units",{_id:i._id},{"vitals.energy":r.energy,"vitals.shields":r.shields,"vitals.armor":r.armor});return l}static getUnitStatTypes(){return["max_energy","max_armor","max_shields","mass","speed","warp_strength","sensor_frequency","sensor_range","signature_radius","cpu_size","shield_regen"]}static async rebuildStatsForUnit(t,a){let i=await n.findUnitById(t._id,a);console.log("rebuildStatsForUnit",t,i),i||console.trace("tried to rebuild stats for ",i);let s=e.getInitialStatsForEntityType(i.basetype),o=await n.findAllEquipmentOnShip(i,a);for(var r of o){let t=n.getEquipmentTypeData(r.equipmenttype),a=t.stat_bonuses_self;if(a){let t=Object.keys(a);for(var l of t){let t=a[l];t&&!isNaN(t)&&(s[stattype]=Math.max(s[stattype]+parseInt(t),e.getMinimumValueForStatType(l)))}}}let c=await n.findAllEquipmentEngagedTargettingShip(i,a);for(var d of c){let t=n.getEquipmentTypeData(d.equipmenttype),a=t.stat_bonuses_target;if(a){let t=Object.keys(a);for(var l of t){let t=a[l];t&&!isNaN(t)&&(s[stattype]=Math.max(s[stattype]+parseInt(t),e.getMinimumValueForStatType(l)))}}}return await a.updateAndFindOne("units",{_id:i._id},{stats:s})}static getMinimumValueForStatType(e){return"warp_strength"==e?-100:"max_armor"==e||"signature_radius"==e?1:0}static getCompiledStatsAndVitals(e){return e&&e.vitals&&e.stats?{currentEnergy:e.vitals.energy,maxEnergy:e.stats.max_energy,currentArmor:e.vitals.armor,maxArmor:e.stats.max_armor,currentShields:e.vitals.shields,maxShields:e.stats.max_shields,speed:e.stats.speed,mass:e.stats.mass,sensorRange:e.stats.sensor_range,warpStrength:e.stats.warp_strength,sensorFrequency:e.stats.sensor_frequency,signatureRadius:e.stats.signature_radius,cpuSize:e.stats.cpu_size,shieldRegen:e.stats.shield_regen}:{currentEnergy:0,maxEnergy:0,currentArmor:0,maxArmor:0,currentShields:0,maxShields:0,speed:0,mass:0,sensorRange:0,warpStrength:0,sensorFrequency:0,signatureRadius:0,cpuSize:0,shieldRegen:0}}}},a38e:function(e,t,a){},a39f:function(e){e.exports=JSON.parse('{"title":"Items","children":[{"title":"Raw Material","children":[{"title":"Metal Scrap","itemInternalName":"metalscrap"},{"title":"Flux Coil","itemInternalName":"fluxcoil"}]}]}')},a3ae:function(e,t){e.exports={root:{RPC:"https://mainnet.infura.io/v3/ff7c8dd5cc424fc1b78b5509d033dea2",DERC20:"0xb6ed7644c69416d67b522e20bc294a9a9b405b31"},child:{RPC:"https://rpc-mainnet.matic.network",DERC20:"0x71B821aa52a49F32EEd535fCA6Eb5aa130085978"},user:{privateKey:"YOUR PK HERE",address:"0x123ABC_YOUR_ADDRESS_HERE",amount:"100000000000",amount1:"2300000000000000"}}},a485:function(e,t,a){"use strict";var n=a("a38e"),i=a.n(n);i.a},b5dd:function(e,t,a){
/*!
* meshwalk
 * https://github.com/yomotsu/meshwalk.js
 * (c) 2015 @yomotsu
 * Released under the MIT License.
 */
(function(e,a){a(t)})(0,(function(e){"use strict";var t,a,n,i,s,o,r,l,c,d,u,p,m,h,y,g,f,b,v,_,w,C,x,k,T,S,I,A,P,D,M,U,N,E,O,R,L,q,V,F,z,j,B,H,G,W=[];function $(e){t&&e===t?console.error("[THREE] already installed. `install` should be called only once."):(t=e,W.forEach((function(e){return e()})))}function Y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Q(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function J(e,t,a){return t&&Q(e.prototype,t),a&&Q(e,a),e}function Z(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}function X(e){return X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},X(e)}function K(e,t){return K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},K(e,t)}function ee(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(j){return!1}}function te(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ae(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?te(e):t}function ne(e){var t=ee();return function(){var a,n=X(e);if(t){var i=X(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return ae(this,a)}}function ie(e,t){while(!Object.prototype.hasOwnProperty.call(e,t))if(e=X(e),null===e)break;return e}function se(e,t,a){return se="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,a){var n=ie(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(a):i.value}},se(e,t,a||e)}function oe(e,t){s.addVectors(e.max,e.min).multiplyScalar(.5),o.subVectors(e.max,s);var a=o.x*Math.abs(t.normal.x)+o.y*Math.abs(t.normal.y)+o.z*Math.abs(t.normal.z),n=t.normal.dot(s)-t.constant;return Math.abs(n)<=a}function re(e,t,a,n){var i,x,k,T;return s.addVectors(n.max,n.min).multiplyScalar(.5),o.subVectors(n.max,s),r.subVectors(e,s),l.subVectors(t,s),c.subVectors(a,s),d.subVectors(l,r),u.subVectors(c,l),p.subVectors(r,c),m.set(0,-d.z,d.y),h.set(0,-u.z,u.y),y.set(0,-p.z,p.y),g.set(d.z,0,-d.x),f.set(u.z,0,-u.x),b.set(p.z,0,-p.x),v.set(-d.y,d.x,0),_.set(-u.y,u.x,0),w.set(-p.y,p.x,0),i=r.dot(m),x=l.dot(m),k=c.dot(m),T=o.y*Math.abs(d.z)+o.z*Math.abs(d.y),!(Math.max(-Math.max(i,x,k),Math.min(i,x,k))>T)&&(i=r.dot(h),x=l.dot(h),k=c.dot(h),T=o.y*Math.abs(u.z)+o.z*Math.abs(u.y),!(Math.max(-Math.max(i,x,k),Math.min(i,x,k))>T)&&(i=r.dot(y),x=l.dot(y),k=c.dot(y),T=o.y*Math.abs(p.z)+o.z*Math.abs(p.y),!(Math.max(-Math.max(i,x,k),Math.min(i,x,k))>T)&&(i=r.dot(g),x=l.dot(g),k=c.dot(g),T=o.x*Math.abs(d.z)+o.z*Math.abs(d.x),!(Math.max(-Math.max(i,x,k),Math.min(i,x,k))>T)&&(i=r.dot(f),x=l.dot(f),k=c.dot(f),T=o.x*Math.abs(u.z)+o.z*Math.abs(u.x),!(Math.max(-Math.max(i,x,k),Math.min(i,x,k))>T)&&(i=r.dot(b),x=l.dot(b),k=c.dot(b),T=o.x*Math.abs(p.z)+o.z*Math.abs(p.x),!(Math.max(-Math.max(i,x,k),Math.min(i,x,k))>T)&&(i=r.dot(v),x=l.dot(v),k=c.dot(v),T=o.x*Math.abs(d.y)+o.y*Math.abs(d.x),!(Math.max(-Math.max(i,x,k),Math.min(i,x,k))>T)&&(i=r.dot(_),x=l.dot(_),k=c.dot(_),T=o.x*Math.abs(u.y)+o.y*Math.abs(u.x),!(Math.max(-Math.max(i,x,k),Math.min(i,x,k))>T)&&(i=r.dot(w),x=l.dot(w),k=c.dot(w),T=o.x*Math.abs(p.y)+o.y*Math.abs(p.x),!(Math.max(-Math.max(i,x,k),Math.min(i,x,k))>T)&&(!(Math.max(r.x,l.x,c.x)<-o.x||Math.min(r.x,l.x,c.x)>o.x)&&(!(Math.max(r.y,l.y,c.y)<-o.y||Math.min(r.y,l.y,c.y)>o.y)&&(!(Math.max(r.z,l.z,c.z)<-o.z||Math.min(r.z,l.z,c.z)>o.z)&&(C.normal.copy(u).cross(d).normalize(),C.constant=C.normal.dot(e),oe(n,C)))))))))))))}function le(e,t){var a=0;return e.center.x<t.min.x&&(a+=(t.min.x-e.center.x)*(t.min.x-e.center.x)),e.center.x>t.max.x&&(a+=(e.center.x-t.max.x)*(e.center.x-t.max.x)),e.center.y<t.min.y&&(a+=(t.min.y-e.center.y)*(t.min.y-e.center.y)),e.center.y>t.max.y&&(a+=(e.center.y-t.max.y)*(e.center.y-t.max.y)),e.center.z<t.min.z&&(a+=(t.min.z-e.center.z)*(t.min.z-e.center.z)),e.center.z>t.max.z&&(a+=(e.center.z-t.max.z)*(e.center.z-t.max.z)),a<=e.radius*e.radius}function ce(e,t,a,s,o){x.subVectors(t,e.center),k.subVectors(a,e.center),T.subVectors(s,e.center);var r=e.radius*e.radius;S.crossVectors(n.subVectors(k,x),i.subVectors(T,x));var l=x.dot(S),c=S.dot(S);if(l*l>r*c)return!1;var d=x.dot(x),u=x.dot(k),p=x.dot(T),m=k.dot(k),h=k.dot(T),y=T.dot(T);if(d>r&u>d&p>d||m>r&u>m&h>m||y>r&p>y&h>y)return!1;I.subVectors(k,x),A.subVectors(T,k),P.subVectors(x,T);var g=u-d,f=h-m,b=p-y,v=I.dot(I),_=A.dot(A),w=P.dot(P);if(D.subVectors(x.multiplyScalar(v),I.multiplyScalar(g)),M.subVectors(k.multiplyScalar(_),A.multiplyScalar(f)),U.subVectors(T.multiplyScalar(w),P.multiplyScalar(b)),N.subVectors(T.multiplyScalar(v),D),E.subVectors(x.multiplyScalar(_),M),O.subVectors(k.multiplyScalar(w),U),D.dot(D)>r*v*v&&D.dot(N)>=0||M.dot(M)>r*_*_&&M.dot(E)>=0||U.dot(U)>r*w*w&&U.dot(O)>=0)return!1;var C=Math.sqrt(l*l/c)-e.radius-1;R.set(-o.x,-o.y,-o.z);var L=e.center.clone().add(R.multiplyScalar(C));return{distance:C,contactPoint:L}}function de(e,t,n,i,s){L.subVectors(i,n),q.subVectors(s,n),V.subVectors(e,t),F.copy(L).cross(q);var o=V.dot(F);if(o<=0)return!1;z.subVectors(e,n);var r=z.dot(F);if(r<0)return 0;if(r>o)return 0;j.copy(V).cross(z);var l=q.dot(j);if(l<0||l>o)return 0;var c=-1*a.copy(L).dot(j);if(c<0||l+c>o)return 0;var d=1/o;r*=d,l*=d,c*=d;var u=1-l-c;B.copy(n).multiplyScalar(u),H.copy(i).multiplyScalar(l),G.copy(s).multiplyScalar(c);var p=B.clone().add(H).add(G);return{contactPoint:p}}W.push((function(){a=new t.Vector3,n=new t.Vector3,i=new t.Vector3,s=new t.Vector3,o=new t.Vector3})),W.push((function(){r=new t.Vector3,l=new t.Vector3,c=new t.Vector3,d=new t.Vector3,u=new t.Vector3,p=new t.Vector3,m=new t.Vector3,h=new t.Vector3,y=new t.Vector3,g=new t.Vector3,f=new t.Vector3,b=new t.Vector3,v=new t.Vector3,_=new t.Vector3,w=new t.Vector3,C=new t.Plane})),W.push((function(){x=new t.Vector3,k=new t.Vector3,T=new t.Vector3,S=new t.Vector3,I=new t.Vector3,A=new t.Vector3,P=new t.Vector3,D=new t.Vector3,M=new t.Vector3,U=new t.Vector3,N=new t.Vector3,E=new t.Vector3,O=new t.Vector3,R=new t.Vector3})),W.push((function(){L=new t.Vector3,q=new t.Vector3,V=new t.Vector3,F=new t.Vector3,z=new t.Vector3,j=new t.Vector3,B=new t.Vector3,H=new t.Vector3,G=new t.Vector3}));var ue=function(){function e(a,n,i){Y(this,e),this.min=a,this.max=n,this.maxDepth=i,this.nodes=[],this.isOctree=!0;for(var s=new t.Vector3,o=new t.Vector3,r=new t.Vector3,l=0;l<this.maxDepth;l++){this.nodes.push([]);var c=Math.pow(2,l),d=Math.pow(4,l);s.subVectors(this.max,this.min).divideScalar(c);for(var u=0,p=Math.pow(8,l);u<p;u++){var m=u%c,h=u/d|0,y=(u/c|0)%c;o.set(this.min.x+m*s.x,this.min.y+h*s.y,this.min.z+y*s.z),r.copy(o).add(s);var g=e.getMortonNumber(m,h,y);this.nodes[l][g]=new me(this,l,g,o,r)}}}return J(e,[{key:"importThreeMesh",value:function(e){e.updateMatrix();var a=e.geometry.uuid,n=e.geometry.clone();if(n.applyMatrix4(e.matrix),n.computeVertexNormals(),n instanceof t.BufferGeometry){if(void 0!==n.index)for(var i=n.index.array,s=n.attributes.position.array,o=0!==n.groups.length?n.groups:[{start:0,count:i.length,materialIndex:0}],r=0,l=o.length;r<l;++r)for(var c=o[r].start,d=o[r].count,u=o[r].materialIndex,p=c,m=c+d;p<m;p+=3){var h=u+i[p],y=u+i[p+1],g=u+i[p+2],f=(new t.Vector3).fromArray(s,3*h),b=(new t.Vector3).fromArray(s,3*y),v=(new t.Vector3).fromArray(s,3*g),_=(new t.Vector3).subVectors(v,b),w=(new t.Vector3).subVectors(f,b),C=_.cross(w).normalize().clone(),x=new he(f,b,v,C,a);this.addFace(x)}}else{n.computeFaceNormals();for(var k=0,T=n.faces.length;k<T;k++){var S=new he(n.vertices[n.faces[k].a],n.vertices[n.faces[k].b],n.vertices[n.faces[k].c],n.faces[k].normal,a);this.addFace(S)}}}},{key:"addFace",value:function(e){for(var t=[],a=this.nodes[0].slice(0),n=0,i=this.maxDepth;n<i;n++){for(var s=0,o=a.length;s<o;s++){var r=a[s],l=re(e.a,e.b,e.c,r);l&&(r.trianglePool.push(e),n+1!==this.maxDepth&&(t=t.concat(r.getChildNodes())))}if(0===t.length)break;a=t.slice(0),t.length=0}}},{key:"removeThreeMesh",value:function(e){this.nodes.forEach((function(t){t.forEach((function(t){var a=[];t.trianglePool.forEach((function(t){t.meshID!==e&&a.push(t)})),t.trianglePool=a}))}))}},{key:"getIntersectedNodes",value:function(e,t){var a=[],n=[],i=le(e,this);if(!i)return[];for(var s=this.nodes[0].slice(0),o=0,r=t;o<r;o++){for(var l=0,c=s.length;l<c;l++){var d=s[l],u=le(e,d);if(u){var p=o+1===t;p?0!==d.trianglePool.length&&n.push(d):a=a.concat(d.getChildNodes())}}s=a.slice(0),a.length=0}return n}}]),e}();ue.separate3Bit=function(e){return e=61455&(e|e<<8),e=798915&(e|e<<4),e=2396745&(e|e<<2),e},ue.getMortonNumber=function(e,t,a){return ue.separate3Bit(e)|ue.separate3Bit(t)<<1|ue.separate3Bit(a)<<2},ue.uniqTrianglesFromNodes=function(e){var t=[],a=!1;if(0===e.length)return[];if(1===e.length)return e[0].trianglePool.slice(0);for(var n=0,i=e.length;n<i;n++)for(var s=0,o=e[n].trianglePool.length;s<o;s++){for(var r=0,l=t.length;r<l;r++)e[n].trianglePool[s]===t[r]&&(a=!0);a||t.push(e[n].trianglePool[s]),a=!1}return t};var pe,me=function(){function e(a,n,i,s,o){Y(this,e),this.tree=a,this.depth=n,this.mortonNumber=i,this.min=new t.Vector3(s.x,s.y,s.z),this.max=new t.Vector3(o.x,o.y,o.z),this.trianglePool=[]}return J(e,[{key:"getParentNode",value:function(){if(0===this.depth)return null;this.tree.nodes[this.depth][this.mortonNumber>>3]}},{key:"getChildNodes",value:function(){if(this.tree.maxDepth===this.depth)return null;var e=this.mortonNumber<<3;return[this.tree.nodes[this.depth+1][e],this.tree.nodes[this.depth+1][e+1],this.tree.nodes[this.depth+1][e+2],this.tree.nodes[this.depth+1][e+3],this.tree.nodes[this.depth+1][e+4],this.tree.nodes[this.depth+1][e+5],this.tree.nodes[this.depth+1][e+6],this.tree.nodes[this.depth+1][e+7]]}}]),e}(),he=function e(t,a,n,i,s){Y(this,e),this.a=t.clone(),this.b=a.clone(),this.c=n.clone(),this.normal=i.clone(),this.meshID=s};W.push((function(){pe=new t.Sphere}));var ye,ge,fe,be,ve,_e,we,Ce,xe,ke=function(){function e(){Y(this,e),this.colliderPool=[],this.characterPool=[]}return J(e,[{key:"add",value:function(e){e.isOctree?this.colliderPool.push(e):e.isCharacterController&&(this.characterPool.push(e),e.world=this)}},{key:"step",value:function(e){for(var t=0,a=this.characterPool.length;t<a;t++){for(var n=this.characterPool[t],i=void 0,s=0,o=this.colliderPool.length;s<o;s++){var r=this.colliderPool[s];pe.set(n.center,n.radius+n.groundPadding);var l=r.getIntersectedNodes(pe,r.maxDepth);i=ue.uniqTrianglesFromNodes(l)}n.collisionCandidate=i,n.update(e)}}}]),e}(),Te=function(){function e(){Y(this,e),this._listeners={}}return J(e,[{key:"addEventListener",value:function(e,t){var a=this._listeners;void 0===a[e]&&(a[e]=[]),-1===a[e].indexOf(t)&&a[e].push(t)}},{key:"hasEventListener",value:function(e,t){var a=this._listeners;return void 0!==a[e]&&-1!==a[e].indexOf(t)}},{key:"removeEventListener",value:function(e,t){var a=this._listeners,n=a[e];if(void 0!==n){var i=n.indexOf(t);-1!==i&&n.splice(i,1)}}},{key:"dispatchEvent",value:function(e){var t=this._listeners,a=t[e.type];if(void 0!==a){e.target=this;for(var n=a.slice(0),i=0,s=n.length;i<s;i++)n[i].call(this,e)}}}]),e}(),Se=-20,Ie=1e3,Ae=.5*Math.PI,Pe=1.5*Math.PI;W.push((function(){ye=new t.Vector2,ge=new t.Vector2,fe=new t.Vector3,be=new t.Vector3,ve=new t.Vector3,_e=new t.Vector3,we=new t.Vector3,Ce=new t.Vector3,xe=new t.Vector3}));var De=function(e){Z(n,e);var a=ne(n);function n(e,i){var s;Y(this,n),s=a.call(this),s.isCharacterController=!0,s.object=e,s.center=s.object.position.clone(),s.radius=i,s.groundPadding=.5,s.maxSlopeGradient=Math.cos(50*t.Math.DEG2RAD),s.isGrounded=!1,s.isOnSlope=!1,s.isIdling=!1,s.isRunning=!1,s.isJumping=!1,s.direction=0,s.movementSpeed=10,s.velocity=new t.Vector3(0,-10,0),s.currentJumpPower=0,s.jumpStartTime=0,s.groundHeight=0,s.groundNormal=new t.Vector3,s.collisionCandidate,s.contactInfo=[];var o,r,l,c,d=!0;return s._events=function(){if(d)return d=!1,o=s.isGrounded,r=s.isOnSlope,l=s.isRunning,void(c=s.isJumping);l||s.isRunning||!s.isGrounded||s.isIdling?!l&&s.isRunning&&!s.isJumping&&s.isGrounded||!o&&s.isGrounded&&s.isRunning||r&&!s.isOnSlope&&s.isRunning&&s.isGrounded?(s.isIdling=!1,s.dispatchEvent({type:"startWalking"})):!c&&s.isJumping?(s.isIdling=!1,s.dispatchEvent({type:"startJumping"})):!r&&s.isOnSlope?s.dispatchEvent({type:"startSliding"}):!o||s.isGrounded||s.isJumping||s.dispatchEvent({type:"startFalling"}):(s.isIdling=!0,s.dispatchEvent({type:"startIdling"})),!o&&s.isGrounded,o=s.isGrounded,r=s.isOnSlope,l=s.isRunning,c=s.isJumping},s}return J(n,[{key:"update",value:function(e){this.isGrounded=!1,this.isOnSlope=!1,this.groundHeight=-1/0,this.groundNormal.set(0,1,0),this._updateGrounding(),this._updateJumping(),this._updatePosition(e),this._collisionDetection(),this._solvePosition(),this._updateVelocity(),this._events()}},{key:"_updateVelocity",value:function(){var e=-Math.cos(this.direction),t=-Math.sin(this.direction),a=!1;if(this.velocity.set(t*this.movementSpeed*this.isRunning,Se,e*this.movementSpeed*this.isRunning),0!==this.contactInfo.length||this.isJumping){if(!this.isGrounded||this.isOnSlope||this.isJumping)if(this.isOnSlope){var n=Se,i=-n/(1-this.groundNormal.y)*.2;this.velocity.x=this.groundNormal.x*i,this.velocity.y=Se,this.velocity.z=this.groundNormal.z*i}else this.isGrounded||this.isOnSlope||!this.isJumping||(this.velocity.y=this.currentJumpPower*-Se);else this.velocity.y=0;ye.set(t,e);for(var s=Math.atan2(-ye.y,-ye.x),o=0,r=this.contactInfo.length;o<r;o++){var l=this.contactInfo[o].face.normal;if(!(this.maxSlopeGradient<l.y||this.isOnSlope)){!a&&l.y<0&&(a=!0),ge.set(l.x,l.z).normalize();var c=Math.atan2(ge.y,ge.x);Math.abs(s-c)>=Ae&&Math.abs(s-c)<=Pe||(ge.set(ye.dot(ge)*ge.x,ye.dot(ge)*ge.y),ye.sub(ge),this.velocity.x=ye.x*this.movementSpeed*this.isRunning,this.velocity.z=ye.y*this.movementSpeed*this.isRunning)}}a&&(this.velocity.y=Math.min(0,this.velocity.y),this.isJumping=!1)}}},{key:"_updateGrounding",value:function(){var e,t,a=this.collisionCandidate;fe.set(this.center.x,this.center.y+this.radius,this.center.z),be.set(this.center.x,this.center.y-1e10,this.center.z);for(var n=0,i=a.length;n<i;n++)t=de(fe,be,a[n].a,a[n].b,a[n].c),(t&&!e||t&&t.contactPoint.y>e.contactPoint.y)&&(e=t,e.face=a[n]);if(e){this.groundHeight=e.contactPoint.y,this.groundNormal.copy(e.face.normal);var s=fe.y,o=this.center.y-this.radius-this.groundPadding;if(this.isJumping&&0<this.currentJumpPower)return this.isOnSlope=!1,void(this.isGrounded=!1);this.isGrounded=o<=this.groundHeight&&this.groundHeight<=s,this.isOnSlope=this.groundNormal.y<=this.maxSlopeGradient,this.isGrounded&&(this.isJumping=!1)}}},{key:"_updatePosition",value:function(e){var t=this.groundHeight+this.radius,a=this.center.x+this.velocity.x*e,n=this.center.y+this.velocity.y*e,i=this.center.z+this.velocity.z*e;this.center.set(a,this.isGrounded?t:n,i)}},{key:"_collisionDetection",value:function(){var e=this.collisionCandidate;this.contactInfo.length=0;for(var t=0,a=e.length;t<a;t++){var n=ce(this,e[t].a,e[t].b,e[t].c,e[t].normal);n&&(n.face=e[t],this.contactInfo.push(n))}}},{key:"_solvePosition",value:function(){var e,t;if(0!==this.contactInfo.length){xe.set(0,0,0);for(var a=0,n=this.contactInfo.length;a<n;a++)if(e=this.contactInfo[a].face,t=this.contactInfo[a].face.normal,!(this.maxSlopeGradient<t.y)){var i=this.maxSlopeGradient<=e.normal.y&&e.normal.y<1;if(this.isJumping&&0>=this.currentJumpPower&&i&&(this.isJumping=!1,this.isGrounded=!0),this.isGrounded||this.isOnSlope){ve.copy(t).multiplyScalar(-this.radius).add(this.center),we.set(t.x,0,t.z).normalize();var s=e.a.dot(t),o=(s-(t.x*ve.x+t.y*ve.y+t.z*ve.z))/(t.x*we.x+t.y*we.y+t.z*we.z);_e.copy(we).multiplyScalar(o).add(ve),Ce.subVectors(_e,ve),Math.abs(xe.x)>Math.abs(Ce.x)&&(xe.x+=Ce.x),Math.abs(xe.z)>Math.abs(Ce.z)&&(xe.z+=Ce.z)}else;}this.center.add(xe),this.object.position.copy(this.center)}else this.object.position.copy(this.center)}},{key:"setDirection",value:function(){}},{key:"jump",value:function(){this.isJumping||!this.isGrounded||this.isOnSlope||(this.jumpStartTime=performance.now(),this.currentJumpPower=1,this.isJumping=!0)}},{key:"_updateJumping",value:function(){if(this.isJumping){var e=performance.now()-this.jumpStartTime,t=e/Ie;this.currentJumpPower=Math.cos(Math.min(t,1)*Math.PI)}}}]),n}(Te),Me=200,Ue=2*Math.PI,Ne=function(e,t){return(e%t+t)%t},Ee=function(e,t){var a=Ne(e-t,Ue),n=Ne(t-e,Ue);return a<n?-a:n},Oe=function(){function e(t){Y(this,e),this.mesh=t,this.motion={},this.mixer=new THREE.AnimationMixer(t),this.currentMotionName="";for(var a=0,n=this.mesh.geometry.animations.length;a<n;a++){var i=this.mesh.geometry.animations[a];this.motion[i.name]=this.mixer.clipAction(i),this.motion[i.name].setEffectiveWeight(1)}}return J(e,[{key:"play",value:function(e){if(this.currentMotionName!==e){if(this.motion[this.currentMotionName]){var t=this.motion[this.currentMotionName].play(),a=this.motion[e].play();t.enabled=!0,a.enabled=!0,t.crossFadeTo(a,.3)}else this.motion[e].enabled=!0,this.motion[e].play();this.currentMotionName=e}}},{key:"turn",value:function(e,t){var a=this,n=this.mesh.rotation.y,i=e,s=Ee(n,i),o=Date.now(),r=o+Me,l=0;if(t)this.mesh.rotation.y=i;else if(this._targetRotY!==i){this._targetRotY=i;var c=i;(function e(){var t=Date.now(),i=c!==a._targetRotY;if(!i){if(t>=r)return a.mesh.rotation.y=c,void delete a._targetRotY;requestAnimationFrame(e),l=(t-o)/Me,a.mesh.rotation.y=n+s*l}})()}}},{key:"update",value:function(e){this.mixer.update(e)}}]),e}(),Re=87,Le=38,qe=83,Ve=40,Fe=65,ze=37,je=68,Be=39,He=32,Ge=Math.PI/180,We=0*Ge,$e=45*Ge,Ye=90*Ge,Qe=135*Ge,Je=180*Ge,Ze=225*Ge,Xe=270*Ge,Ke=315*Ge,et=function(e){Z(a,e);var t=ne(a);function a(){var e;return Y(this,a),e=t.call(this),e.isDisabled=!1,e.isUp=!1,e.isDown=!1,e.isLeft=!1,e.isRight=!1,e.isMoveKeyHolding=!1,e.frontAngle=0,e._keydownListener=tt.bind(te(e)),e._keyupListener=at.bind(te(e)),e._blurListener=nt.bind(te(e)),window.addEventListener("keydown",e._keydownListener),window.addEventListener("keyup",e._keyupListener),window.addEventListener("blur",e._blurListener),e}return J(a,[{key:"jump",value:function(){this.dispatchEvent({type:"jumpkeypress"})}},{key:"updateAngle",value:function(){var e=this.isUp,t=this.isDown,a=this.isLeft,n=this.isRight;!e||a||t||n?e&&a&&!t&&!n?this.frontAngle=$e:e||!a||t||n?!e&&a&&t&&!n?this.frontAngle=Qe:e||a||!t||n?!e&&!a&&t&&n?this.frontAngle=Ze:e||a||t||!n?e&&!a&&!t&&n&&(this.frontAngle=Ke):this.frontAngle=Xe:this.frontAngle=Je:this.frontAngle=Ye:this.frontAngle=We}}]),a}(Te);function tt(e){if(!this.isDisabled&&!it(e)){switch(e.keyCode){case Re:case Le:this.isUp=!0;break;case qe:case Ve:this.isDown=!0;break;case Fe:case ze:this.isLeft=!0;break;case je:case Be:this.isRight=!0;break;case He:this.jump();break;default:return}var t=this.frontAngle;this.updateAngle(),t!==this.frontAngle&&this.dispatchEvent({type:"movekeychange"}),(this.isUp||this.isDown||this.isLeft||this.isRight)&&!this.isMoveKeyHolding&&(this.isMoveKeyHolding=!0,this.dispatchEvent({type:"movekeyon"}))}}function at(e){if(!this.isDisabled){switch(e.keyCode){case Re:case Le:this.isUp=!1;break;case qe:case Ve:this.isDown=!1;break;case Fe:case ze:this.isLeft=!1;break;case je:case Be:this.isRight=!1;break;case He:break;default:return}var t=this.frontAngle;this.updateAngle(),t!==this.frontAngle&&this.dispatchEvent({type:"movekeychange"}),this.isUp||this.isDown||this.isLeft||this.isRight||e.keyCode!==Re&&e.keyCode!==Le&&e.keyCode!==qe&&e.keyCode!==Ve&&e.keyCode!==Fe&&e.keyCode!==ze&&e.keyCode!==je&&e.keyCode!==Be||(this.isMoveKeyHolding=!1,this.dispatchEvent({type:"movekeyoff"}))}}function nt(){this.isUp=!1,this.isDown=!1,this.isLeft=!1,this.isRight=!1,this.isMoveKeyHolding&&(this.isMoveKeyHolding=!1,this.dispatchEvent({type:"movekeyoff"}))}function it(e){var t=e.target;return"INPUT"===t.tagName||"SELECT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable}
/*!
   * camera-controls
   * https://github.com/yomotsu/camera-controls
   * (c) 2017 @yomotsu
   * Released under the MIT License.
   */
/*! *****************************************************************************
  Copyright (c) Microsoft Corporation. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0
  	THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.
  	See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** */var st,ot=function(e,t){return ot=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])},ot(e,t)};function rt(e,t){function a(){this.constructor=e}ot(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}(function(e){e[e["NONE"]=0]="NONE",e[e["ROTATE"]=1]="ROTATE",e[e["TRUCK"]=2]="TRUCK",e[e["DOLLY"]=3]="DOLLY",e[e["ZOOM"]=4]="ZOOM",e[e["TOUCH_ROTATE"]=5]="TOUCH_ROTATE",e[e["TOUCH_TRUCK"]=6]="TOUCH_TRUCK",e[e["TOUCH_DOLLY"]=7]="TOUCH_DOLLY",e[e["TOUCH_ZOOM"]=8]="TOUCH_ZOOM",e[e["TOUCH_DOLLY_TRUCK"]=9]="TOUCH_DOLLY_TRUCK",e[e["TOUCH_ZOOM_TRUCK"]=10]="TOUCH_ZOOM_TRUCK"})(st||(st={}));var lt=2*Math.PI,ct=Math.PI/2,dt=62.5,ut=1e-5;function pt(e){return Math.abs(e)<ut}function mt(e,t){return pt(e-t)}function ht(e,t){return Math.round(e/t)*t}function yt(e){return isFinite(e)?e:e<0?-Number.MAX_VALUE:Number.MAX_VALUE}function gt(e){return Math.abs(e)<Number.MAX_VALUE?e:e*(1/0)}function ft(e){return"TouchEvent"in window&&e instanceof TouchEvent}function bt(e,t){if(t.set(0,0),ft(e)){for(var a=e,n=0;n<a.touches.length;n++)t.x+=a.touches[n].clientX,t.y+=a.touches[n].clientY;return t.x/=a.touches.length,t.y/=a.touches.length,t}var i=e;return t.set(i.clientX,i.clientY),t}function vt(e,t){return!e.isPerspectiveCamera&&(console.warn(t+" is not supported in OrthographicCamera"),!0)}var _t,wt,Ct,xt,kt,Tt,St,It,At,Pt,Dt,Mt,Ut,Nt,Et,Ot,Rt,Lt,qt=function(){function e(){this._listeners={}}return e.prototype.addEventListener=function(e,t){var a=this._listeners;void 0===a[e]&&(a[e]=[]),-1===a[e].indexOf(t)&&a[e].push(t)},e.prototype.removeEventListener=function(e,t){var a=this._listeners,n=a[e];if(void 0!==n){var i=n.indexOf(t);-1!==i&&n.splice(i,1)}},e.prototype.removeAllEventListeners=function(e){e?Array.isArray(this._listeners[e])&&(this._listeners[e].length=0):this._listeners={}},e.prototype.dispatchEvent=function(e){var t=this._listeners,a=t[e.type];if(void 0!==a){e.target=this;for(var n=a.slice(0),i=0,s=n.length;i<s;i++)n[i].call(this,e)}},e}(),Vt=/Mac/.test(navigator.platform),Ft=Object.freeze(st),zt=1/8,jt=function(e){function t(t,a){var n=e.call(this)||this;if(n.enabled=!0,n.minPolarAngle=0,n.maxPolarAngle=Math.PI,n.minAzimuthAngle=-1/0,n.maxAzimuthAngle=1/0,n.minDistance=0,n.maxDistance=1/0,n.minZoom=.01,n.maxZoom=1/0,n.dampingFactor=.05,n.draggingDampingFactor=.25,n.azimuthRotateSpeed=1,n.polarRotateSpeed=1,n.dollySpeed=1,n.truckSpeed=2,n.dollyToCursor=!1,n.verticalDragToForward=!1,n.boundaryFriction=0,n.colliderMeshes=[],n._state=st.NONE,n._viewport=null,n._dollyControlAmount=0,n._boundaryEnclosesCamera=!1,n._needsUpdate=!0,n._updatedLastTime=!1,n._camera=t,n._yAxisUpSpace=(new _t.Quaternion).setFromUnitVectors(n._camera.up,Ct),n._yAxisUpSpaceInverse=n._yAxisUpSpace.clone().inverse(),n._state=st.NONE,n._domElement=a,n._target=new _t.Vector3,n._targetEnd=n._target.clone(),n._spherical=(new _t.Spherical).setFromVector3(Tt.copy(n._camera.position).applyQuaternion(n._yAxisUpSpace)),n._sphericalEnd=n._spherical.clone(),n._zoom=n._camera.zoom,n._zoomEnd=n._zoom,n._nearPlaneCorners=[new _t.Vector3,new _t.Vector3,new _t.Vector3,new _t.Vector3],n._updateNearPlaneCorners(),n._boundary=new _t.Box3(new _t.Vector3(-1/0,-1/0,-1/0),new _t.Vector3(1/0,1/0,1/0)),n._target0=n._target.clone(),n._position0=n._camera.position.clone(),n._zoom0=n._zoom,n._dollyControlAmount=0,n._dollyControlCoord=new _t.Vector2,n.mouseButtons={left:st.ROTATE,middle:st.DOLLY,right:st.TRUCK,wheel:n._camera.isPerspectiveCamera?st.DOLLY:n._camera.isOrthographicCamera?st.ZOOM:st.NONE},n.touches={one:st.TOUCH_ROTATE,two:n._camera.isPerspectiveCamera?st.TOUCH_DOLLY_TRUCK:n._camera.isOrthographicCamera?st.TOUCH_ZOOM_TRUCK:st.NONE,three:st.TOUCH_TRUCK},n._domElement){var i=new _t.Vector2,s=new _t.Vector2,o=new _t.Vector2,r=new _t.Vector4,l=function(e,t){if(n._camera.isPerspectiveCamera){var a=n._camera,i=Tt.copy(a.position).sub(n._target),s=a.getEffectiveFOV()*_t.Math.DEG2RAD,o=i.length()*Math.tan(.5*s),l=n.truckSpeed*e*o/r.w,c=n.truckSpeed*t*o/r.w;n.verticalDragToForward?(n.truck(l,0,!0),n.forward(-c,!0)):n.truck(l,c,!0)}else if(n._camera.isOrthographicCamera){var d=n._camera;l=e*(d.right-d.left)/d.zoom/r.z,c=t*(d.top-d.bottom)/d.zoom/r.w;n.truck(l,c,!0)}},c=function(e,t){var a=lt*n.azimuthRotateSpeed*e/r.w,i=lt*n.polarRotateSpeed*t/r.w;n.rotate(a,i,!0)},d=function(e,t,a){var i=Math.pow(.95,-e*n.dollySpeed),s=n._sphericalEnd.radius*i,o=n._sphericalEnd.radius;n.dollyTo(s),n.dollyToCursor&&(n._dollyControlAmount+=n._sphericalEnd.radius-o,n._dollyControlCoord.set(t,a))},u=function(e){var t=Math.pow(.95,e*n.dollySpeed);n.zoomTo(n._zoom*t)},p=function(e){if(n.enabled){e.preventDefault();var t=n._state;switch(e.button){case _t.MOUSE.LEFT:n._state=n.mouseButtons.left;break;case _t.MOUSE.MIDDLE:n._state=n.mouseButtons.middle;break;case _t.MOUSE.RIGHT:n._state=n.mouseButtons.right;break}t!==n._state&&f(e)}},m=function(e){if(n.enabled){e.preventDefault();var t=n._state;switch(e.touches.length){case 1:n._state=n.touches.one;break;case 2:n._state=n.touches.two;break;case 3:n._state=n.touches.three;break}t!==n._state&&f(e)}},h=-1,y=function(e){if(n.enabled&&n.mouseButtons.wheel!==st.NONE){if(e.preventDefault(),n.dollyToCursor||n.mouseButtons.wheel===st.ROTATE||n.mouseButtons.wheel===st.TRUCK){var t=performance.now();h-t<1e3&&n._getClientRect(r),h=t}var a=Vt?-1:-3,i=1===e.deltaMode?e.deltaY/a:e.deltaY/(10*a),s=n.dollyToCursor?(e.clientX-r.x)/r.z*2-1:0,o=n.dollyToCursor?(e.clientY-r.y)/r.w*-2+1:0;switch(n.mouseButtons.wheel){case st.ROTATE:c(e.deltaX,e.deltaY);break;case st.TRUCK:l(e.deltaX,e.deltaY);break;case st.DOLLY:d(-i,s,o);break;case st.ZOOM:u(-i);break}n.dispatchEvent({type:"control",originalEvent:e})}},g=function(e){n.enabled&&e.preventDefault()},f=function(e){if(n.enabled){e.preventDefault(),bt(e,kt),n._getClientRect(r),i.copy(kt),s.copy(kt);var t=ft(e)&&e.touches.length>=2;if(t){var a=e,l=kt.x-a.touches[1].clientX,c=kt.y-a.touches[1].clientY,d=Math.sqrt(l*l+c*c);o.set(0,d);var u=.5*(a.touches[0].clientX+a.touches[1].clientX),p=.5*(a.touches[0].clientY+a.touches[1].clientY);s.set(u,p)}document.addEventListener("mousemove",b),document.addEventListener("touchmove",b,{passive:!1}),document.addEventListener("mouseup",v),document.addEventListener("touchend",v),n.dispatchEvent({type:"controlstart",originalEvent:e})}},b=function(e){if(n.enabled){e.preventDefault(),bt(e,kt);var t=s.x-kt.x,a=s.y-kt.y;switch(s.copy(kt),n._state){case st.ROTATE:case st.TOUCH_ROTATE:c(t,a);break;case st.DOLLY:case st.ZOOM:var p=n.dollyToCursor?(i.x-r.x)/r.z*2-1:0,m=n.dollyToCursor?(i.y-r.y)/r.w*-2+1:0;n._state===st.DOLLY?d(a*zt,p,m):u(a*zt);break;case st.TOUCH_DOLLY:case st.TOUCH_ZOOM:case st.TOUCH_DOLLY_TRUCK:case st.TOUCH_ZOOM_TRUCK:var h=e,y=kt.x-h.touches[1].clientX,g=kt.y-h.touches[1].clientY,f=Math.sqrt(y*y+g*g),b=o.y-f;o.set(0,f);p=n.dollyToCursor?(s.x-r.x)/r.z*2-1:0,m=n.dollyToCursor?(s.y-r.y)/r.w*-2+1:0;n._state===st.TOUCH_DOLLY||n._state===st.TOUCH_DOLLY_TRUCK?d(b*zt,p,m):u(b*zt),n._state!==st.TOUCH_DOLLY_TRUCK&&n._state!==st.TOUCH_ZOOM_TRUCK||l(t,a);break;case st.TRUCK:case st.TOUCH_TRUCK:l(t,a);break}n.dispatchEvent({type:"control",originalEvent:e})}},v=function(e){n.enabled&&(n._state=st.NONE,document.removeEventListener("mousemove",b),document.removeEventListener("touchmove",b,{passive:!1}),document.removeEventListener("mouseup",v),document.removeEventListener("touchend",v),n.dispatchEvent({type:"controlend",originalEvent:e}))};n._domElement.addEventListener("mousedown",p),n._domElement.addEventListener("touchstart",m),n._domElement.addEventListener("wheel",y),n._domElement.addEventListener("contextmenu",g),n._removeAllEventListeners=function(){n._domElement.removeEventListener("mousedown",p),n._domElement.removeEventListener("touchstart",m),n._domElement.removeEventListener("wheel",y),n._domElement.removeEventListener("contextmenu",g),document.removeEventListener("mousemove",b),document.removeEventListener("touchmove",b,{passive:!1}),document.removeEventListener("mouseup",v),document.removeEventListener("touchend",v)}}return n.update(0),n}return rt(t,e),t.install=function(e){_t=e.THREE,wt=Object.freeze(new _t.Vector3(0,0,0)),Ct=Object.freeze(new _t.Vector3(0,1,0)),xt=Object.freeze(new _t.Vector3(0,0,1)),kt=new _t.Vector2,Tt=new _t.Vector3,St=new _t.Vector3,It=new _t.Vector3,At=new _t.Vector3,Pt=new _t.Vector3,Dt=new _t.Spherical,Mt=new _t.Spherical,Ut=new _t.Box3,Nt=new _t.Box3,Et=new _t.Quaternion,Ot=new _t.Quaternion,Rt=new _t.Matrix4,Lt=new _t.Raycaster},Object.defineProperty(t,"ACTION",{get:function(){return Ft},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentAction",{get:function(){return this._state},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"distance",{get:function(){return this._spherical.radius},set:function(e){this._spherical.radius===e&&this._sphericalEnd.radius===e||(this._spherical.radius=e,this._sphericalEnd.radius=e,this._needsUpdate=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"azimuthAngle",{get:function(){return this._spherical.theta},set:function(e){this._spherical.theta===e&&this._sphericalEnd.theta===e||(this._spherical.theta=e,this._sphericalEnd.theta=e,this._needsUpdate=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"polarAngle",{get:function(){return this._spherical.phi},set:function(e){this._spherical.phi===e&&this._sphericalEnd.phi===e||(this._spherical.phi=e,this._sphericalEnd.phi=e,this._needsUpdate=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"phiSpeed",{set:function(e){console.warn("phiSpeed was renamed. use azimuthRotateSpeed instead"),this.azimuthRotateSpeed=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"thetaSpeed",{set:function(e){console.warn("thetaSpeed was renamed. use polarRotateSpeed instead"),this.polarRotateSpeed=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"boundaryEnclosesCamera",{get:function(){return this._boundaryEnclosesCamera},set:function(e){this._boundaryEnclosesCamera=e,this._needsUpdate=!0},enumerable:!0,configurable:!0}),t.prototype.rotate=function(e,t,a){void 0===a&&(a=!1),this.rotateTo(this._sphericalEnd.theta+e,this._sphericalEnd.phi+t,a)},t.prototype.rotateTo=function(e,t,a){void 0===a&&(a=!1);var n=_t.Math.clamp(e,this.minAzimuthAngle,this.maxAzimuthAngle),i=_t.Math.clamp(t,this.minPolarAngle,this.maxPolarAngle);this._sphericalEnd.theta=n,this._sphericalEnd.phi=i,this._sphericalEnd.makeSafe(),a||(this._spherical.theta=this._sphericalEnd.theta,this._spherical.phi=this._sphericalEnd.phi),this._needsUpdate=!0},t.prototype.dolly=function(e,t){void 0===t&&(t=!1),this.dollyTo(this._sphericalEnd.radius-e,t)},t.prototype.dollyTo=function(e,t){void 0===t&&(t=!1),vt(this._camera,"dolly")||(this._sphericalEnd.radius=_t.Math.clamp(e,this.minDistance,this.maxDistance),t||(this._spherical.radius=this._sphericalEnd.radius),this._needsUpdate=!0)},t.prototype.zoom=function(e,t){void 0===t&&(t=!1),this.zoomTo(this._zoomEnd+e,t)},t.prototype.zoomTo=function(e,t){void 0===t&&(t=!1),this._zoomEnd=_t.Math.clamp(e,this.minZoom,this.maxZoom),t||(this._zoom=this._zoomEnd),this._needsUpdate=!0},t.prototype.pan=function(e,t,a){void 0===a&&(a=!1),console.log("`pan` has been renamed to `truck`"),this.truck(e,t,a)},t.prototype.truck=function(e,t,a){void 0===a&&(a=!1),this._camera.updateMatrix(),At.setFromMatrixColumn(this._camera.matrix,0),Pt.setFromMatrixColumn(this._camera.matrix,1),At.multiplyScalar(e),Pt.multiplyScalar(-t);var n=Tt.copy(At).add(Pt);this._encloseToBoundary(this._targetEnd,n,this.boundaryFriction),a||this._target.copy(this._targetEnd),this._needsUpdate=!0},t.prototype.forward=function(e,t){void 0===t&&(t=!1),Tt.setFromMatrixColumn(this._camera.matrix,0),Tt.crossVectors(this._camera.up,Tt),Tt.multiplyScalar(e),this._encloseToBoundary(this._targetEnd,Tt,this.boundaryFriction),t||this._target.copy(this._targetEnd),this._needsUpdate=!0},t.prototype.moveTo=function(e,t,a,n){void 0===n&&(n=!1),this._targetEnd.set(e,t,a),n||this._target.copy(this._targetEnd),this._needsUpdate=!0},t.prototype.fitTo=function(e,t,a){var n=void 0===a?{}:a,i=n.paddingLeft,s=void 0===i?0:i,o=n.paddingRight,r=void 0===o?0:o,l=n.paddingBottom,c=void 0===l?0:l,d=n.paddingTop,u=void 0===d?0:d,p=e.isBox3?Ut.copy(e):Ut.setFromObject(e),m=ht(this._sphericalEnd.theta,ct),h=ht(this._sphericalEnd.phi,ct);this.rotateTo(m,h,t);var y=Tt.setFromSpherical(this._sphericalEnd).normalize(),g=Et.setFromUnitVectors(y,xt),f=mt(Math.abs(y.y),1);f&&g.multiply(Ot.setFromAxisAngle(Ct,m));var b=Nt.makeEmpty();St.copy(p.min).applyQuaternion(g),b.expandByPoint(St),St.copy(p.min).setX(p.max.x).applyQuaternion(g),b.expandByPoint(St),St.copy(p.min).setY(p.max.y).applyQuaternion(g),b.expandByPoint(St),St.copy(p.max).setZ(p.min.z).applyQuaternion(g),b.expandByPoint(St),St.copy(p.min).setZ(p.max.z).applyQuaternion(g),b.expandByPoint(St),St.copy(p.max).setY(p.min.y).applyQuaternion(g),b.expandByPoint(St),St.copy(p.max).setX(p.min.x).applyQuaternion(g),b.expandByPoint(St),St.copy(p.max).applyQuaternion(g),b.expandByPoint(St),g.setFromUnitVectors(xt,y),b.min.x-=s,b.min.y-=c,b.max.x+=r,b.max.y+=u;var v=b.getSize(Tt),_=b.getCenter(St).applyQuaternion(g),w=this._camera.isPerspectiveCamera,C=this._camera.isOrthographicCamera;if(w){var x=this.getDistanceToFit(v.x,v.y,v.z);return this.moveTo(_.x,_.y,_.z,t),void this.dollyTo(x,t)}if(C){var k=this._camera,T=k.right-k.left,S=k.top-k.bottom,I=Math.min(T/v.x,S/v.y);return this.moveTo(_.x,_.y,_.z,t),void this.zoomTo(I,t)}},t.prototype.setLookAt=function(e,t,a,n,i,s,o){void 0===o&&(o=!1);var r=Tt.set(e,t,a),l=St.set(n,i,s);this._targetEnd.copy(l),this._sphericalEnd.setFromVector3(r.sub(l).applyQuaternion(this._yAxisUpSpace)),this.normalizeRotations(),o||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd)),this._needsUpdate=!0},t.prototype.lerpLookAt=function(e,t,a,n,i,s,o,r,l,c,d,u,p,m){void 0===m&&(m=!1);var h=Tt.set(e,t,a),y=St.set(n,i,s);Dt.setFromVector3(h.sub(y).applyQuaternion(this._yAxisUpSpace));var g=Tt.set(c,d,u);this._targetEnd.copy(y).lerp(g,p);var f=St.set(o,r,l);Mt.setFromVector3(f.sub(g).applyQuaternion(this._yAxisUpSpace));var b=Mt.theta-Dt.theta,v=Mt.phi-Dt.phi,_=Mt.radius-Dt.radius;this._sphericalEnd.set(Dt.radius+_*p,Dt.phi+v*p,Dt.theta+b*p),this.normalizeRotations(),m||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd)),this._needsUpdate=!0},t.prototype.setPosition=function(e,t,a,n){void 0===n&&(n=!1),this.setLookAt(e,t,a,this._targetEnd.x,this._targetEnd.y,this._targetEnd.z,n)},t.prototype.setTarget=function(e,t,a,n){void 0===n&&(n=!1);var i=this.getPosition(Tt);this.setLookAt(i.x,i.y,i.z,e,t,a,n)},t.prototype.setBoundary=function(e){if(!e)return this._boundary.min.set(-1/0,-1/0,-1/0),this._boundary.max.set(1/0,1/0,1/0),void(this._needsUpdate=!0);this._boundary.copy(e),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._needsUpdate=!0},t.prototype.setViewport=function(e,t,a,n){null!==e?(this._viewport=this._viewport||new _t.Vector4,"number"===typeof e?this._viewport.set(e,t,a,n):this._viewport.copy(e)):this._viewport=null},t.prototype.getDistanceToFit=function(e,t,a){if(vt(this._camera,"getDistanceToFit"))return this._spherical.radius;var n=this._camera,i=e/t,s=n.getEffectiveFOV()*_t.Math.DEG2RAD,o=n.aspect,r=i<o?t:e/o;return.5*r/Math.tan(.5*s)+.5*a},t.prototype.getTarget=function(e){var t=e&&e.isVector3?e:new _t.Vector3;return t.copy(this._targetEnd)},t.prototype.getPosition=function(e){var t=e&&e.isVector3?e:new _t.Vector3;return t.setFromSpherical(this._sphericalEnd).applyQuaternion(this._yAxisUpSpaceInverse).add(this._targetEnd)},t.prototype.normalizeRotations=function(){this._sphericalEnd.theta=this._sphericalEnd.theta%lt,this._sphericalEnd.theta<0&&(this._sphericalEnd.theta+=lt),this._spherical.theta+=lt*Math.round((this._sphericalEnd.theta-this._spherical.theta)/lt)},t.prototype.reset=function(e){void 0===e&&(e=!1),this.setLookAt(this._position0.x,this._position0.y,this._position0.z,this._target0.x,this._target0.y,this._target0.z,e),this.zoomTo(this._zoom0,e)},t.prototype.saveState=function(){this._target0.copy(this._target),this._position0.copy(this._camera.position),this._zoom0=this._zoom},t.prototype.updateCameraUp=function(){this._yAxisUpSpace.setFromUnitVectors(this._camera.up,Ct),this._yAxisUpSpaceInverse.copy(this._yAxisUpSpace).inverse()},t.prototype.update=function(e){var t=this._state===st.NONE?this.dampingFactor:this.draggingDampingFactor,a=1-Math.exp(-t*e*dt),n=this._sphericalEnd.theta-this._spherical.theta,i=this._sphericalEnd.phi-this._spherical.phi,s=this._sphericalEnd.radius-this._spherical.radius,o=Tt.subVectors(this._targetEnd,this._target);if(pt(n)&&pt(i)&&pt(s)&&pt(o.x)&&pt(o.y)&&pt(o.z)?(this._spherical.copy(this._sphericalEnd),this._target.copy(this._targetEnd)):(this._spherical.set(this._spherical.radius+s*a,this._spherical.phi+i*a,this._spherical.theta+n*a),this._target.add(o.multiplyScalar(a)),this._needsUpdate=!0),0!==this._dollyControlAmount){if(this._camera.isPerspectiveCamera){var r=this._camera,l=Tt.setFromSpherical(this._sphericalEnd).applyQuaternion(this._yAxisUpSpaceInverse).normalize().negate(),c=St.copy(l).cross(r.up).normalize();0===c.lengthSq()&&(c.x=1);var d=It.crossVectors(c,l),u=this._sphericalEnd.radius*Math.tan(r.getEffectiveFOV()*_t.Math.DEG2RAD*.5),p=this._sphericalEnd.radius-this._dollyControlAmount,m=(p-this._sphericalEnd.radius)/this._sphericalEnd.radius,h=Tt.copy(this._targetEnd).add(c.multiplyScalar(this._dollyControlCoord.x*u*r.aspect)).add(d.multiplyScalar(this._dollyControlCoord.y*u));this._targetEnd.lerp(h,m),this._target.copy(this._targetEnd)}this._dollyControlAmount=0}var y=this._collisionTest();this._spherical.radius=Math.min(this._spherical.radius,y),this._spherical.makeSafe(),this._camera.position.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(this._target),this._camera.lookAt(this._target),this._boundaryEnclosesCamera&&this._encloseToBoundary(this._camera.position.copy(this._target),Tt.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse),1);var g=this._zoomEnd-this._zoom;this._zoom+=g*a,this._camera.zoom!==this._zoom&&(pt(g)&&(this._zoom=this._zoomEnd),this._camera.zoom=this._zoom,this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0);var f=this._needsUpdate;return f&&!this._updatedLastTime?(this.dispatchEvent({type:"wake"}),this.dispatchEvent({type:"update"})):f?this.dispatchEvent({type:"update"}):!f&&this._updatedLastTime&&this.dispatchEvent({type:"sleep"}),this._updatedLastTime=f,this._needsUpdate=!1,f},t.prototype.toJSON=function(){return JSON.stringify({enabled:this.enabled,minDistance:this.minDistance,maxDistance:yt(this.maxDistance),minZoom:this.minZoom,maxZoom:yt(this.maxZoom),minPolarAngle:this.minPolarAngle,maxPolarAngle:yt(this.maxPolarAngle),minAzimuthAngle:yt(this.minAzimuthAngle),maxAzimuthAngle:yt(this.maxAzimuthAngle),dampingFactor:this.dampingFactor,draggingDampingFactor:this.draggingDampingFactor,dollySpeed:this.dollySpeed,truckSpeed:this.truckSpeed,dollyToCursor:this.dollyToCursor,verticalDragToForward:this.verticalDragToForward,target:this._targetEnd.toArray(),position:this._camera.position.toArray(),zoom:this._camera.zoom,target0:this._target0.toArray(),position0:this._position0.toArray(),zoom0:this._zoom0})},t.prototype.fromJSON=function(e,t){void 0===t&&(t=!1);var a=JSON.parse(e),n=Tt.fromArray(a.position);this.enabled=a.enabled,this.minDistance=a.minDistance,this.maxDistance=gt(a.maxDistance),this.minZoom=a.minZoom,this.maxZoom=gt(a.maxZoom),this.minPolarAngle=a.minPolarAngle,this.maxPolarAngle=gt(a.maxPolarAngle),this.minAzimuthAngle=gt(a.minAzimuthAngle),this.maxAzimuthAngle=gt(a.maxAzimuthAngle),this.dampingFactor=a.dampingFactor,this.draggingDampingFactor=a.draggingDampingFactor,this.dollySpeed=a.dollySpeed,this.truckSpeed=a.truckSpeed,this.dollyToCursor=a.dollyToCursor,this.verticalDragToForward=a.verticalDragToForward,this._target0.fromArray(a.target0),this._position0.fromArray(a.position0),this._zoom0=a.zoom0,this.moveTo(a.target[0],a.target[1],a.target[2],t),Dt.setFromVector3(n.sub(this._targetEnd).applyQuaternion(this._yAxisUpSpace)),this.rotateTo(Dt.theta,Dt.phi,t),this.zoomTo(a.zoom,t),this._needsUpdate=!0},t.prototype.dispose=function(){this._removeAllEventListeners()},t.prototype._encloseToBoundary=function(e,t,a){var n=t.lengthSq();if(0===n)return e;var i=St.copy(t).add(e),s=this._boundary.clampPoint(i,It),o=s.sub(i),r=o.lengthSq();if(0===r)return e.add(t);if(r===n)return e;if(0===a)return e.add(t).add(o);var l=1+a*r/t.dot(o);return e.add(St.copy(t).multiplyScalar(l)).add(o.multiplyScalar(1-a))},t.prototype._updateNearPlaneCorners=function(){if(this._camera.isPerspectiveCamera){var e=this._camera,t=e.near,a=e.getEffectiveFOV()*_t.Math.DEG2RAD,n=Math.tan(.5*a)*t,i=n*e.aspect;this._nearPlaneCorners[0].set(-i,-n,0),this._nearPlaneCorners[1].set(i,-n,0),this._nearPlaneCorners[2].set(i,n,0),this._nearPlaneCorners[3].set(-i,n,0)}else if(this._camera.isOrthographicCamera){e=this._camera;var s=1/e.zoom,o=e.left*s,r=e.right*s,l=e.top*s,c=e.bottom*s;this._nearPlaneCorners[0].set(o,l,0),this._nearPlaneCorners[1].set(r,l,0),this._nearPlaneCorners[2].set(r,c,0),this._nearPlaneCorners[3].set(o,c,0)}},t.prototype._collisionTest=function(){var e=1/0,t=this.colliderMeshes.length>=1;if(!t)return e;if(vt(this._camera,"_collisionTest"))return e;e=this._spherical.radius;var a=Tt.setFromSpherical(this._spherical).divideScalar(e);Rt.lookAt(wt,a,this._camera.up);for(var n=0;n<4;n++){var i=St.copy(this._nearPlaneCorners[n]);i.applyMatrix4(Rt);var s=It.addVectors(this._target,i);Lt.set(s,a),Lt.far=e;var o=Lt.intersectObjects(this.colliderMeshes);0!==o.length&&o[0].distance<e&&(e=o[0].distance)}return e},t.prototype._getClientRect=function(e){var t=this._domElement.getBoundingClientRect();return e.x=t.left,e.y=t.top,this._viewport?(e.x+=this._viewport.x,e.y+=t.height-this._viewport.w-this._viewport.y,e.z=this._viewport.z,e.w=this._viewport.w):(e.z=t.width,e.w=t.height),e},t.prototype._removeAllEventListeners=function(){},t}(qt);W.push((function(){jt.install({THREE:t})}));var Bt=function(e){Z(n,e);var a=ne(n);function n(e,i,s){var o,r;Y(this,n),r=a.call(this,e,s),r.minDistance=9,r.maxDistance=90,r.azimuthRotateSpeed=.3,r.polarRotateSpeed=.2,r.minPolarAngle=0*t.Math.DEG2RAD,r.maxPolarAngle=180*t.Math.DEG2RAD,r.draggingDampingFactor=1,r.mouseButtons.right=jt.ACTION.NONE,r.mouseButtons.middle=jt.ACTION.NONE,r.touches.two=jt.ACTION.TOUCH_DOLLY,r.touches.three=jt.ACTION.TOUCH_DOLLY;var l=new t.Vector3(0,1,0);return r.update=function(e){var t=i.position.x+l.x,a=i.position.y+l.y,s=i.position.z+l.z;r.moveTo(t,a,s,!1),se((o=te(r),X(n.prototype)),"update",o).call(o,e)},r}return J(n,[{key:"frontAngle",get:function(){return this.azimuthAngle}}]),n}(jt);e.AnimationController=Oe,e.CharacterController=De,e.KeyInputControl=et,e.Octree=ue,e.TPSCameraControls=Bt,e.World=ke,e.install=$,Object.defineProperty(e,"__esModule",{value:!0})}))},b771:function(e){e.exports=JSON.parse('{"contracts":{"ethereum_network":{},"matic_network":{"payspec":{"address":"0xDE5E0dE83672503dFaF99707D7457eaACEC8248a"},"_0xbitcoin":{"address":"0x71B821aa52a49F32EEd535fCA6Eb5aa130085978"}}}}')},c62a:function(e,t,a){e.exports=a.p+"img/metamask.1e38b912.svg"},c636:function(e){e.exports=JSON.parse('[{"type":"function","stateMutability":"nonpayable","payable":false,"outputs":[{"type":"uint256","name":"amt"}],"name":"withdrawTokens","inputs":[{"type":"address","name":"tokenAddress"},{"type":"uint256","name":"amount"}],"constant":false},{"type":"function","stateMutability":"nonpayable","payable":false,"outputs":[{"type":"uint256","name":"amt"}],"name":"depositTokens","inputs":[{"type":"address","name":"tokenAddress"},{"type":"uint256","name":"amount"}],"constant":false},{"type":"function","stateMutability":"nonpayable","payable":false,"outputs":[],"name":"acceptOwnership","inputs":[],"constant":false},{"type":"function","stateMutability":"view","payable":false,"outputs":[{"type":"address","name":""}],"name":"owner","inputs":[],"constant":true},{"type":"function","stateMutability":"view","payable":false,"outputs":[{"type":"uint256","name":""}],"name":"balances","inputs":[{"type":"address","name":""},{"type":"address","name":""}],"constant":true},{"type":"function","stateMutability":"view","payable":false,"outputs":[{"type":"address","name":""}],"name":"newOwner","inputs":[],"constant":true},{"type":"function","stateMutability":"view","payable":false,"outputs":[{"type":"uint256","name":"amt"}],"name":"getBalance","inputs":[{"type":"address","name":"tokenAddress"},{"type":"address","name":"accountAddress"}],"constant":true},{"type":"function","stateMutability":"nonpayable","payable":false,"outputs":[],"name":"moveTokens","inputs":[{"type":"address","name":"tokenAddress"},{"type":"address","name":"origin"},{"type":"address","name":"destination"},{"type":"uint256","name":"amount"}],"constant":false},{"type":"function","stateMutability":"nonpayable","payable":false,"outputs":[],"name":"transferOwnership","inputs":[{"type":"address","name":"_newOwner"}],"constant":false},{"type":"event","name":"MoveTokens","inputs":[{"type":"address","name":"_token","indexed":false},{"type":"address","name":"_from","indexed":true},{"type":"address","name":"_to","indexed":true},{"type":"uint256","name":"amount","indexed":false}],"anonymous":false},{"type":"event","name":"OwnershipTransferred","inputs":[{"type":"address","name":"_from","indexed":true},{"type":"address","name":"_to","indexed":true}],"anonymous":false}]')},cd29:function(e){e.exports=JSON.parse('{"shield_damage_explosion":{"textureName":"explosions_2","tilesHoriz":4,"tilesVert":4,"minTile":0,"maxTile":7,"loop":false},"armor_damage_explosion":{"textureName":"explosions_2","tilesHoriz":4,"tilesVert":4,"minTile":8,"maxTile":15,"loop":false},"ship_death_explosion":{"textureName":"explosions_1","tilesHoriz":4,"tilesVert":4,"minTile":0,"maxTile":11,"loop":false}}')},db43:function(e,t,a){},dd97:function(e){e.exports=JSON.parse('[{"type":"constructor","stateMutability":"nonpayable","payable":false,"inputs":[]},{"type":"event","name":"CancelledInvoice","inputs":[{"type":"bytes32","name":"uuid","internalType":"bytes32","indexed":false}],"anonymous":false},{"type":"event","name":"CreatedInvoice","inputs":[{"type":"bytes32","name":"uuid","internalType":"bytes32","indexed":false}],"anonymous":false},{"type":"event","name":"OwnershipTransferred","inputs":[{"type":"address","name":"_from","internalType":"address","indexed":true},{"type":"address","name":"_to","internalType":"address","indexed":true}],"anonymous":false},{"type":"event","name":"PaidInvoice","inputs":[{"type":"bytes32","name":"uuid","internalType":"bytes32","indexed":false},{"type":"address","name":"from","internalType":"address","indexed":false}],"anonymous":false},{"type":"fallback","stateMutability":"payable","payable":true},{"type":"function","stateMutability":"nonpayable","payable":false,"outputs":[],"name":"acceptOwnership","inputs":[],"constant":false},{"type":"function","stateMutability":"nonpayable","payable":false,"outputs":[{"type":"bool","name":"","internalType":"bool"}],"name":"cancelInvoice","inputs":[{"type":"string","name":"description","internalType":"string"},{"type":"uint256","name":"nonce","internalType":"uint256"},{"type":"address","name":"token","internalType":"address"},{"type":"uint256","name":"amountDue","internalType":"uint256"},{"type":"address","name":"payTo","internalType":"address"},{"type":"address[]","name":"feeAddresses","internalType":"address[]"},{"type":"uint256[]","name":"feePercents","internalType":"uint256[]"},{"type":"uint256","name":"ethBlockExpiresAt","internalType":"uint256"},{"type":"bytes32","name":"expecteduuid","internalType":"bytes32"}],"constant":false},{"type":"function","stateMutability":"nonpayable","payable":false,"outputs":[{"type":"bool","name":"","internalType":"bool"}],"name":"createAndPayInvoice","inputs":[{"type":"string","name":"description","internalType":"string"},{"type":"uint256","name":"nonce","internalType":"uint256"},{"type":"address","name":"token","internalType":"address"},{"type":"uint256","name":"amountDue","internalType":"uint256"},{"type":"address","name":"payTo","internalType":"address"},{"type":"address[]","name":"feeAddresses","internalType":"address[]"},{"type":"uint256[]","name":"feePercents","internalType":"uint256[]"},{"type":"uint256","name":"ethBlockExpiresAt","internalType":"uint256"},{"type":"bytes32","name":"expecteduuid","internalType":"bytes32"}],"constant":false},{"type":"function","stateMutability":"view","payable":false,"outputs":[{"type":"uint256","name":"","internalType":"uint256"}],"name":"getInvoiceAmountPaid","inputs":[{"type":"bytes32","name":"invoiceUUID","internalType":"bytes32"}],"constant":true},{"type":"function","stateMutability":"view","payable":false,"outputs":[{"type":"string","name":"","internalType":"string"}],"name":"getInvoiceDescription","inputs":[{"type":"bytes32","name":"invoiceUUID","internalType":"bytes32"}],"constant":true},{"type":"function","stateMutability":"view","payable":false,"outputs":[{"type":"uint256","name":"","internalType":"uint256"}],"name":"getInvoiceEthBlockPaidAt","inputs":[{"type":"bytes32","name":"invoiceUUID","internalType":"bytes32"}],"constant":true},{"type":"function","stateMutability":"view","payable":false,"outputs":[{"type":"address","name":"","internalType":"address"}],"name":"getInvoicePayer","inputs":[{"type":"bytes32","name":"invoiceUUID","internalType":"bytes32"}],"constant":true},{"type":"function","stateMutability":"view","payable":false,"outputs":[{"type":"address","name":"","internalType":"address"}],"name":"getInvoiceTokenCurrency","inputs":[{"type":"bytes32","name":"invoiceUUID","internalType":"bytes32"}],"constant":true},{"type":"function","stateMutability":"view","payable":false,"outputs":[{"type":"bytes32","name":"uuid","internalType":"bytes32"}],"name":"getInvoiceUUID","inputs":[{"type":"string","name":"description","internalType":"string"},{"type":"uint256","name":"nonce","internalType":"uint256"},{"type":"address","name":"token","internalType":"address"},{"type":"uint256","name":"amountDue","internalType":"uint256"},{"type":"address","name":"payTo","internalType":"address"},{"type":"address[]","name":"feeAddresses","internalType":"address[]"},{"type":"uint256[]","name":"feePercents","internalType":"uint256[]"},{"type":"uint256","name":"expiresAt","internalType":"uint256"}],"constant":true},{"type":"function","stateMutability":"view","payable":false,"outputs":[{"type":"uint256","name":"","internalType":"uint256"}],"name":"invoiceExpiresAt","inputs":[{"type":"bytes32","name":"invoiceUUID","internalType":"bytes32"}],"constant":true},{"type":"function","stateMutability":"view","payable":false,"outputs":[{"type":"bool","name":"","internalType":"bool"}],"name":"invoiceHasExpired","inputs":[{"type":"bytes32","name":"invoiceUUID","internalType":"bytes32"}],"constant":true},{"type":"function","stateMutability":"view","payable":false,"outputs":[{"type":"bool","name":"","internalType":"bool"}],"name":"invoiceWasCancelled","inputs":[{"type":"bytes32","name":"invoiceUUID","internalType":"bytes32"}],"constant":true},{"type":"function","stateMutability":"view","payable":false,"outputs":[{"type":"bool","name":"","internalType":"bool"}],"name":"invoiceWasCreated","inputs":[{"type":"bytes32","name":"invoiceUUID","internalType":"bytes32"}],"constant":true},{"type":"function","stateMutability":"view","payable":false,"outputs":[{"type":"bool","name":"","internalType":"bool"}],"name":"invoiceWasDisabled","inputs":[{"type":"bytes32","name":"invoiceUUID","internalType":"bytes32"}],"constant":true},{"type":"function","stateMutability":"view","payable":false,"outputs":[{"type":"bool","name":"","internalType":"bool"}],"name":"invoiceWasPaid","inputs":[{"type":"bytes32","name":"invoiceUUID","internalType":"bytes32"}],"constant":true},{"type":"function","stateMutability":"nonpayable","payable":false,"outputs":[],"name":"lockContract","inputs":[],"constant":false},{"type":"function","stateMutability":"view","payable":false,"outputs":[{"type":"address","name":"","internalType":"address"}],"name":"newOwner","inputs":[],"constant":true},{"type":"function","stateMutability":"view","payable":false,"outputs":[{"type":"address","name":"","internalType":"address"}],"name":"owner","inputs":[],"constant":true},{"type":"function","stateMutability":"nonpayable","payable":false,"outputs":[],"name":"transferOwnership","inputs":[{"type":"address","name":"_newOwner","internalType":"address"}],"constant":false}]')},ddeb:function(e){e.exports=JSON.parse('{"production":{"gameServer":{"url":"","port":9208},"marketServer":{"url":"","port":9209},"chatServer":{"url":"","port":9210},"mongoServer":{"url":"","port":27017},"redisServer":{"url":"","port":6379}},"testing":{"gameServer":{"url":"http://198.199.65.68","port":9208},"marketServer":{"url":"http://198.199.65.68","port":9209},"chatServer":{"url":"http://198.199.65.68","port":9210},"mongoServer":{"url":"104.248.121.118","port":27017},"redisServer":{"url":"104.248.121.118","port":6379}},"development":{"gameServer":{"url":"http://localhost","port":9208},"marketServer":{"url":"http://localhost","port":9209},"chatServer":{"url":"http://localhost","port":9210},"mongoServer":{"url":"localhost","port":27017},"redisServer":{"url":"localhost","port":6379}}}')},dfb8:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAMAAABF0y+mAAAAzFBMVEUAAAAgv/8wcO8gcO8ov/coj/coaO8su/cobOsmj/kqrfcop/coj/cqbewru/Ynj/gpj+8pbe0qbu8qu/Uoj/cqvPYrvfcqvfcrbe8oj/cqefMrvPcrc/Irbe8rvPgrbu8rvfcppPgol/kokfkokfgrfvArbe8svfYplPkpkfksbe8rvfcruPYqsvcrrvYqrPgqrPcprPgrpPQpofgrmvMol/kolvkokfkrkPIojPgoivcpg/UrgfEqf/Qqe/Mrd/ArcvAqcfErb/Arbe/HERs1AAAAK3RSTlMAEBAQICAgQEBQYGBgYHBwcHB/gICQn5+foK+/v7/Pz9/f39/f39/v7+/v8lWhcAAAANFJREFUeNrF0mkTwTAQBuAUdd/3XbTOVRS1rqLy//+TkaRqtHxi7Ld9n8xmkllC/lPB/CD1EihOkJpQSqth16IDSmmLBU3KKx8QVhdBlhCCB5s3zmyNBcdZ5Y64s8RZhY3SEK3zEoAj4u4k+H61hogGuIju7JwPIlpXzv2RD/LZlzVs/BBxb2+n4MH5iqsJ4EUdFuYHBOiqHNsjHyzINTRhmPY8hSEhcq8kkXco/vYrmFQZliUHYyrDRoh1xbHeiDyvSUY1Oo9Ajr9slZz45c7eALQETUNQ/TQiAAAAAElFTkSuQmCC"},dfbc:function(e,t){e.exports=class{}},ea99:function(e){e.exports=JSON.parse('{"environment":"testing"}')},ee45:function(e){e.exports=JSON.parse('{"warpin":{"path":"LowBassHit2.wav"},"warpout":{"path":"warp/warpout.wav"},"lootitems":{"path":"LootItems.wav"},"hullbreach":{"path":"voice/hullbreach.wav"},"lockingjammed":{"path":"voice/lockingjammed.wav"},"neutralized":{"path":"voice/neutralized.wav"},"outofrange":{"path":"voice/outofrange.wav"},"permissiondenied":{"path":"voice/permissiondenied.wav"},"requestaccepted":{"path":"voice/requestaccepted.wav"},"shieldcoreunstable":{"path":"voice/shieldcoreunstable.wav"},"transmitdockingrequest":{"path":"voice/transmitdockingrequest.wav"},"warpdriveactive":{"path":"voice/warpdriveactive3.wav"},"warpcoreunstable":{"path":"voice/warpcoreunstable.wav"},"locking":{"path":"combat/locking.wav"},"explosion_medium":{"path":"combat/explosion_medium.wav"},"dramatic_laser":{"path":"weapons/DramaticLaser.wav"},"tiny_laser":{"path":"weapons/TinyLaser.wav"},"definite_shot":{"path":"weapons/DefiniteShot.wav"},"impact_shot":{"path":"weapons/ImpactShot.wav"},"rocket_shot":{"path":"weapons/RocketShot.wav"},"hard_shot":{"path":"weapons/HardShot.wav"},"missile_launch":{"path":"weapons/MissileLaunch.wav"},"small_rocket":{"path":"weapons/SmallRocket.wav"},"electric_laser":{"path":"weapons/ElectricLaser.wav"}}')},f9f6:function(e){e.exports=JSON.parse('{"antonopoulos":{"name":"antonopoulos","constellation":"defi","security":9,"systemLocationVector":{"x":44,"y":-8,"z":-54},"celestials":[{"uuid":"02900cd84abaa991","type":"asteroids1","celestialLocationVector":{"x":333,"y":405,"z":111}},{"uuid":"1e5509521deb2000","type":"creepingdronehideout","name":"Creeping Drone Hideout","celestialLocationVector":{"x":-392,"y":-45,"z":111}},{"uuid":"4ac72478d4132000","type":"warpgate1","celestialLocationVector":{"x":-2185,"y":250,"z":799},"jumpDestinationUUID":"bba5a79fc6bc8000","jumpDestinationSystemName":"the circle"},{"uuid":"bc49efd435d62000","type":"warpgate1","celestialLocationVector":{"x":119,"y":-397,"z":1402},"jumpDestinationUUID":"c36655c13529f000","jumpDestinationSystemName":"V-II"},{"uuid":"d1494c57684a8000","type":"warpgate1","celestialLocationVector":{"x":-218,"y":-369,"z":1341},"jumpDestinationUUID":"9e471fe34d410000","jumpDestinationSystemName":"tarcq"},{"uuid":"bcc173121feba000","type":"warpgate1","celestialLocationVector":{"x":-296,"y":49,"z":-2448},"jumpDestinationUUID":"8d9754ffd618d000","jumpDestinationSystemName":"rekkt"}]},"llarval":{"name":"llarval","constellation":"defi","security":8,"systemLocationVector":{"x":-230,"y":11,"z":42},"celestials":[{"uuid":"a2047db60deb000","type":"warpgate1","celestialLocationVector":{"x":1292,"y":-474,"z":2648},"jumpDestinationUUID":"473c4e96b5946000","jumpDestinationSystemName":"the circle"},{"uuid":"94b2f6b43f567000","type":"warpgate4","celestialLocationVector":{"x":704,"y":214,"z":-1893},"jumpDestinationUUID":"c8d0b58428199000","jumpDestinationSystemName":"turbulensa"},{"uuid":"1c323f9cd83ad000","type":"warpgate4","celestialLocationVector":{"x":1821,"y":-149,"z":1633},"jumpDestinationUUID":"6bdf7545c7bc3000","jumpDestinationSystemName":"hal"}]},"rekkt":{"name":"rekkt","constellation":"unikron","security":4,"systemLocationVector":{"x":145,"y":4,"z":55},"celestials":[{"uuid":"8d9754ffd618d000","type":"warpgate1","celestialLocationVector":{"x":-28,"y":427,"z":2213},"jumpDestinationUUID":"bcc173121feba000","jumpDestinationSystemName":"antonopoulos"},{"uuid":"b5bed426b53ca000","type":"warpgate1","celestialLocationVector":{"x":-1389,"y":-390,"z":-2315},"jumpDestinationUUID":"6f96dbec1e9a3000","jumpDestinationSystemName":"majora minor"}]},"the circle":{"name":"the circle","security":9,"constellation":"defi","systemLocationVector":{"x":0,"y":0,"z":0},"celestials":[{"uuid":"86dbca36ab49ae87","type":"stationC","name":"ethereum reach","celestialLocationVector":{"x":57,"y":25,"z":1111}},{"uuid":"3a18a44ca7cc6000","type":"largewaterplanet","name":"alterhaven","celestialLocationVector":{"x":257,"y":225,"z":111}},{"uuid":"98c0a73939c77000","type":"minordronehideout","name":"Minor Drone Hideout","celestialLocationVector":{"x":992,"y":5,"z":1211}},{"uuid":"bba5a79fc6bc8000","type":"warpgate1","celestialLocationVector":{"x":-1883,"y":-367,"z":2641},"jumpDestinationUUID":"4ac72478d4132000","jumpDestinationSystemName":"antonopoulos"},{"uuid":"7a55fd5ea3a3b000","type":"warpgate1","celestialLocationVector":{"x":-1537,"y":-419,"z":-2649},"jumpDestinationUUID":"4ef3b33ef967b000","jumpDestinationSystemName":"hallow"},{"uuid":"473c4e96b5946000","type":"warpgate1","celestialLocationVector":{"x":-718,"y":-210,"z":-1291},"jumpDestinationUUID":"a2047db60deb000","jumpDestinationSystemName":"llarval"}]},"V-II":{"name":"V-II","security":7,"constellation":"defi","systemLocationVector":{"x":45,"y":13,"z":150},"celestials":[{"uuid":"7ddd26899fd19000","type":"waterplanet","name":"Dominara","celestialLocationVector":{"x":657,"y":425,"z":111}},{"uuid":"361c0d2091b08f0c","type":"largemoon","name":"jarren","celestialLocationVector":{"x":257,"y":225,"z":111}},{"uuid":"c36655c13529f000","type":"warpgate1","celestialLocationVector":{"x":2065,"y":-151,"z":-196},"jumpDestinationUUID":"bc49efd435d62000","jumpDestinationSystemName":"antonopoulos"},{"uuid":"d5c0ea888a1f2000","type":"warpgate1","celestialLocationVector":{"x":1315,"y":-149,"z":-2667},"jumpDestinationUUID":"1ebf1323c05c1000","jumpDestinationSystemName":"turbulensa"}]},"cerberus":{"name":"cerberus","security":7,"constellation":"defi","systemLocationVector":{"x":-220,"y":-20,"z":-310},"celestials":[{"uuid":"a2d5decccae22000","type":"brokenplanet","name":"cerberus","celestialLocationVector":{"x":657,"y":425,"z":111}},{"uuid":"125f3033bc975000","type":"warpgate1","celestialLocationVector":{"x":2304,"y":-159,"z":1137},"jumpDestinationUUID":"af62a18b2c7000","jumpDestinationSystemName":"hallow"}]},"hallow":{"name":"hallow","security":7,"constellation":"defi","systemLocationVector":{"x":-270,"y":10,"z":-210},"celestials":[{"uuid":"2d026a083457e000","type":"largemoon","name":"maiden\'s moon","celestialLocationVector":{"x":-457,"y":225,"z":511}},{"uuid":"4ef3b33ef967b000","type":"warpgate1","celestialLocationVector":{"x":-2359,"y":-89,"z":-604},"jumpDestinationUUID":"7a55fd5ea3a3b000","jumpDestinationSystemName":"the circle"},{"uuid":"43607f226e570000","type":"warpgate2","celestialLocationVector":{"x":-1780,"y":362,"z":-1406},"jumpDestinationUUID":"eb9b153130337000","jumpDestinationSystemName":"misery"},{"uuid":"af62a18b2c7000","type":"warpgate1","celestialLocationVector":{"x":1781,"y":259,"z":670},"jumpDestinationUUID":"125f3033bc975000","jumpDestinationSystemName":"cerberus"}]},"the void":{"name":"the void","security":4,"constellation":"defi","systemLocationVector":{"x":-370,"y":40,"z":-160},"celestials":[{"uuid":"54e77e3e457e6000","type":"abandonedwreckage","name":"abandoned wreckage","celestialLocationVector":{"x":257,"y":425,"z":311}},{"uuid":"ca0113dd89880000","type":"warpgate2","celestialLocationVector":{"x":136,"y":-51,"z":-1602},"jumpDestinationUUID":"7446ea99c4a66000","jumpDestinationSystemName":"misery"}]},"misery":{"name":"misery","security":3,"constellation":"defi","systemLocationVector":{"x":-320,"y":20,"z":-260},"celestials":[{"uuid":"6f73899c2577d000","type":"abandonedshipyard","name":"abandoned shipyard","celestialLocationVector":{"x":257,"y":25,"z":-711}},{"uuid":"eb9b153130337000","type":"warpgate2","celestialLocationVector":{"x":583,"y":326,"z":225},"jumpDestinationUUID":"43607f226e570000","jumpDestinationSystemName":"hallow"},{"uuid":"7446ea99c4a66000","type":"warpgate2","celestialLocationVector":{"x":-980,"y":-308,"z":764},"jumpDestinationUUID":"ca0113dd89880000","jumpDestinationSystemName":"the void"}]},"tarcq":{"name":"tarcq","security":8,"constellation":"defi","systemLocationVector":{"x":220,"y":-10,"z":-60},"celestials":[{"uuid":"de67d87c2cc64000","type":"islandplanet","name":"serum","celestialLocationVector":{"x":657,"y":425,"z":111}},{"uuid":"9e471fe34d410000","type":"warpgate1","celestialLocationVector":{"x":-2443,"y":199,"z":-541},"jumpDestinationUUID":"d1494c57684a8000","jumpDestinationSystemName":"antonopoulos"},{"uuid":"82688fd2d5044000","type":"warpgate1","celestialLocationVector":{"x":1679,"y":220,"z":1931},"jumpDestinationUUID":"83bb7ead889b1000","jumpDestinationSystemName":"the fringe"},{"uuid":"c0ccefd6f985000","type":"warpgate1","celestialLocationVector":{"x":2172,"y":-111,"z":-592},"jumpDestinationUUID":"178a33c2ee9c4000","jumpDestinationSystemName":"majora minor"}]},"majora minor":{"name":"majora minor","security":6,"constellation":"defi","systemLocationVector":{"x":410,"y":-10,"z":30},"celestials":[{"uuid":"91029c3f360f9000","type":"barrenplanet","name":"detheroc","celestialLocationVector":{"x":57,"y":425,"z":111}},{"uuid":"178a33c2ee9c4000","type":"warpgate1","celestialLocationVector":{"x":2625,"y":-68,"z":-1303},"jumpDestinationUUID":"c0ccefd6f985000","jumpDestinationSystemName":"tarcq"},{"uuid":"6f96dbec1e9a3000","type":"warpgate1","celestialLocationVector":{"x":2225,"y":-498,"z":1585},"jumpDestinationUUID":"b5bed426b53ca000","jumpDestinationSystemName":"rekkt"},{"uuid":"2b384d2db6eea000","type":"warpgate1","celestialLocationVector":{"x":-1248,"y":-36,"z":-2754},"jumpDestinationUUID":"1db6eee380fc9000","jumpDestinationSystemName":"mikers"}]},"mikers":{"name":"mikers","security":5,"constellation":"defi","systemLocationVector":{"x":610,"y":40,"z":120},"celestials":[{"uuid":"118b15c5aea24000","type":"brokenplanet","name":"southpaux","celestialLocationVector":{"x":657,"y":425,"z":111}},{"uuid":"1db6eee380fc9000","type":"warpgate1","celestialLocationVector":{"x":-461,"y":-450,"z":-1836},"jumpDestinationUUID":"2b384d2db6eea000","jumpDestinationSystemName":"majora minor"},{"uuid":"47c542c2c45f7000","type":"warpgate1","celestialLocationVector":{"x":2202,"y":79,"z":739},"jumpDestinationUUID":"34e44ab6e4db2000","jumpDestinationSystemName":"xel"},{"uuid":"515d6f0cace48000","type":"warpgate1","celestialLocationVector":{"x":1197,"y":331,"z":-356},"jumpDestinationUUID":"b775d34db5991000","jumpDestinationSystemName":"orwyn"}]},"adastar":{"name":"adastar","security":6,"constellation":"defi","systemLocationVector":{"x":510,"y":40,"z":320},"celestials":[{"uuid":"4da2c8ad9b805000","type":"iceplanet","name":"dominara","celestialLocationVector":{"x":657,"y":425,"z":111}},{"uuid":"8ed65e751a2ce000","type":"warpgate1","celestialLocationVector":{"x":427,"y":384,"z":-294},"jumpDestinationUUID":"27a8c7fb30d4d000","jumpDestinationSystemName":"orwyn"}]},"synthesis":{"name":"synthesis","security":8,"constellation":"synthesis","systemLocationVector":{"x":640,"y":20,"z":720},"celestials":[{"uuid":"8239f4c0a4c77000","type":"stationB","name":"starcity velara","celestialLocationVector":{"x":357,"y":-125,"z":411}},{"uuid":"2f5065eac6e8e000","type":"waterplanet","name":"trena","celestialLocationVector":{"x":657,"y":425,"z":111}},{"uuid":"1a1da6f319cda000","type":"warpgate1","celestialLocationVector":{"x":-2606,"y":259,"z":-1189},"jumpDestinationUUID":"351e0e7c1f6c000","jumpDestinationSystemName":"orwyn"}]},"orwyn":{"name":"orwyn","security":8,"constellation":"defi","systemLocationVector":{"x":720,"y":-20,"z":410},"celestials":[{"uuid":"33cc3c1c7585000","type":"islandplanet","name":"vorta v","celestialLocationVector":{"x":157,"y":225,"z":-711}},{"uuid":"b775d34db5991000","type":"warpgate1","celestialLocationVector":{"x":-459,"y":198,"z":2110},"jumpDestinationUUID":"515d6f0cace48000","jumpDestinationSystemName":"mikers"},{"uuid":"27a8c7fb30d4d000","type":"warpgate1","celestialLocationVector":{"x":1609,"y":192,"z":-866},"jumpDestinationUUID":"8ed65e751a2ce000","jumpDestinationSystemName":"adastar"},{"uuid":"351e0e7c1f6c000","type":"warpgate1","celestialLocationVector":{"x":-2197,"y":-305,"z":-1097},"jumpDestinationUUID":"1a1da6f319cda000","jumpDestinationSystemName":"synthesis"}]},"zero-x":{"name":"zero-x","security":8,"constellation":"defi","systemLocationVector":{"x":880,"y":-40,"z":210},"celestials":[{"uuid":"2ee438fa6663000","type":"largewaterplanet","name":"toast prime","celestialLocationVector":{"x":657,"y":425,"z":111}}]},"turbulensa":{"name":"turbulensa","security":8,"constellation":"defi","systemLocationVector":{"x":-480,"y":-40,"z":210},"celestials":[{"uuid":"3b37fb748a968000","type":"barrenplanet","name":"miasma","celestialLocationVector":{"x":657,"y":425,"z":111}},{"uuid":"1ebf1323c05c1000","type":"warpgate1","celestialLocationVector":{"x":958,"y":-437,"z":-2893},"jumpDestinationUUID":"d5c0ea888a1f2000","jumpDestinationSystemName":"V-II"},{"uuid":"c8d0b58428199000","type":"warpgate4","celestialLocationVector":{"x":862,"y":236,"z":1755},"jumpDestinationUUID":"94b2f6b43f567000","jumpDestinationSystemName":"llarval"}]},"szabo":{"name":"szabo","security":6,"constellation":"legacy","systemLocationVector":{"x":-380,"y":-40,"z":910},"celestials":[{"uuid":"92b9566217962000","type":"abandonedshipyard","name":"abandoned shipyard","celestialLocationVector":{"x":657,"y":425,"z":111}},{"uuid":"3b47de5d51d61000","type":"warpgate7","celestialLocationVector":{"x":-1421,"y":-182,"z":-2293},"jumpDestinationUUID":"c4577c1eac072000","jumpDestinationSystemName":"azlehria"}]},"satoshi":{"name":"satoshi","security":8,"constellation":"legacy","systemLocationVector":{"x":-580,"y":-40,"z":740},"celestials":[{"uuid":"f2903ac6b27fa000","type":"ancientrelic","name":"ancient relic","celestialLocationVector":{"x":657,"y":425,"z":111}},{"uuid":"ccbb048ef0d96000","type":"warpgate7","celestialLocationVector":{"x":1241,"y":-490,"z":1240},"jumpDestinationUUID":"7eb6248be756c000","jumpDestinationSystemName":"azlehria"},{"uuid":"b1f3b49420502000","type":"warpgate7","celestialLocationVector":{"x":-1152,"y":156,"z":-2187},"jumpDestinationUUID":"a919f35c9d4c9000","jumpDestinationSystemName":"hal"}]},"hal":{"name":"hal","security":7,"constellation":"legacy","systemLocationVector":{"x":-440,"y":-40,"z":510},"celestials":[{"uuid":"fcce964138e95000","type":"smallmoon","name":"rez","celestialLocationVector":{"x":657,"y":425,"z":111}},{"uuid":"aa8055b19aab6000","type":"barrenplanet","name":"ubiquity","celestialLocationVector":{"x":333,"y":225,"z":-311}},{"uuid":"6bdf7545c7bc3000","type":"warpgate4","celestialLocationVector":{"x":-2334,"y":75,"z":-1975},"jumpDestinationUUID":"1c323f9cd83ad000","jumpDestinationSystemName":"llarval"},{"uuid":"b9aa11f964d7000","type":"warpgate7","celestialLocationVector":{"x":-2091,"y":-415,"z":1180},"jumpDestinationUUID":"db8d2c29ec12d000","jumpDestinationSystemName":"azlehria"},{"uuid":"14d6e7dae22b7000","type":"warpgate7","celestialLocationVector":{"x":-2849,"y":-473,"z":793},"jumpDestinationUUID":"e29e8cdb56146000","jumpDestinationSystemName":"M-VIS"},{"uuid":"a919f35c9d4c9000","type":"warpgate7","celestialLocationVector":{"x":22,"y":-104,"z":-1671},"jumpDestinationUUID":"b1f3b49420502000","jumpDestinationSystemName":"satoshi"}]},"azlehria":{"name":"azlehria","security":7,"constellation":"legacy","systemLocationVector":{"x":-340,"y":-40,"z":810},"celestials":[{"uuid":"6656ab556c40d000","type":"largemoon","name":"heim","celestialLocationVector":{"x":657,"y":425,"z":111}},{"uuid":"db8d2c29ec12d000","type":"warpgate7","celestialLocationVector":{"x":72,"y":-115,"z":861},"jumpDestinationUUID":"b9aa11f964d7000","jumpDestinationSystemName":"hal"},{"uuid":"7eb6248be756c000","type":"warpgate7","celestialLocationVector":{"x":-865,"y":-216,"z":-373},"jumpDestinationUUID":"ccbb048ef0d96000","jumpDestinationSystemName":"satoshi"},{"uuid":"c4577c1eac072000","type":"warpgate7","celestialLocationVector":{"x":-473,"y":145,"z":868},"jumpDestinationUUID":"3b47de5d51d61000","jumpDestinationSystemName":"szabo"},{"uuid":"2e8b672b22db2000","type":"warpgate7","celestialLocationVector":{"x":-2412,"y":-172,"z":1321},"jumpDestinationUUID":"5aeb8ec8361a1000","jumpDestinationSystemName":"M-VIS"}]},"M-VIS":{"name":"M-VIS","security":8,"constellation":"legacy","systemLocationVector":{"x":-140,"y":-40,"z":910},"celestials":[{"uuid":"ab57aa67668a8000","type":"stationD","name":"imperial command","celestialLocationVector":{"x":357,"y":-125,"z":411}},{"uuid":"940ce5d2ef23f000","type":"islandplanet","name":"mantissa","celestialLocationVector":{"x":657,"y":425,"z":111}},{"uuid":"e29e8cdb56146000","type":"warpgate7","celestialLocationVector":{"x":2445,"y":-16,"z":-2116},"jumpDestinationUUID":"14d6e7dae22b7000","jumpDestinationSystemName":"hal"},{"uuid":"5aeb8ec8361a1000","type":"warpgate7","celestialLocationVector":{"x":798,"y":-17,"z":-423},"jumpDestinationUUID":"2e8b672b22db2000","jumpDestinationSystemName":"azlehria"}]},"the fringe":{"name":"the fringe","security":5,"constellation":"defi","systemLocationVector":{"x":170,"y":-40,"z":-610},"celestials":[{"uuid":"f6467db43bd45000","type":"icecomet","name":"alsa comet","celestialLocationVector":{"x":657,"y":425,"z":111}},{"uuid":"83bb7ead889b1000","type":"warpgate1","celestialLocationVector":{"x":2008,"y":-382,"z":-1997},"jumpDestinationUUID":"82688fd2d5044000","jumpDestinationSystemName":"tarcq"}]},"xel":{"name":"xel","security":4,"constellation":"defi","systemLocationVector":{"x":770,"y":-40,"z":-210},"celestials":[{"uuid":"40045275a2847000","type":"largewaterplanet","name":"alterhaven","celestialLocationVector":{"x":657,"y":425,"z":111}},{"uuid":"34e44ab6e4db2000","type":"warpgate1","celestialLocationVector":{"x":-1095,"y":-157,"z":-2719},"jumpDestinationUUID":"47c542c2c45f7000","jumpDestinationSystemName":"mikers"}]}}')},fb2c:function(e){e.exports=JSON.parse('{"warpcore":{"input":[{"internalName":"supercapacitor","quantity":2},{"internalName":"vanadium","quantity":4}],"timeFactor":30},"fluxreactor":{"input":[{"internalName":"tritium","quantity":6},{"internalName":"uranium","quantity":4},{"internalName":"carbonizedmembranes","quantity":2}],"timeFactor":30},"teslacoil":{"input":[{"internalName":"tritium","quantity":4},{"internalName":"nanocrystals","quantity":4},{"internalName":"metalscrap","quantity":6}],"timeFactor":30},"reinforcedarmorplate":{"input":[{"internalName":"metalscrap","quantity":6},{"internalName":"carbonizedmembranes","quantity":4}],"timeFactor":10},"smallcoprocessor":{"input":[{"internalName":"integratedcpu","quantity":1},{"internalName":"tritium","quantity":4},{"internalName":"uranium","quantity":2}],"timeFactor":10},"shieldbattery":{"input":[{"internalName":"nanocrystals","quantity":10},{"internalName":"tritium","quantity":8},{"internalName":"metalscrap","quantity":2}],"timeFactor":10},"energycore":{"input":[{"internalName":"supercapacitor","quantity":6},{"internalName":"uranium","quantity":4}],"timeFactor":10},"supercapacitor":{"input":[{"internalName":"metalscrap","quantity":8},{"internalName":"ionizedfluid","quantity":6}],"timeFactor":10},"heavyarmorplating":{"input":[{"internalName":"reinforcedarmorplate","quantity":4},{"internalName":"vanadium","quantity":2}],"timeFactor":10},"basicarmorplating":{"input":[{"internalName":"reinforcedarmorplate","quantity":2}],"timeFactor":10},"lightrailgun":{"input":[{"internalName":"metalscrap","quantity":4},{"internalName":"teslacoil","quantity":2},{"internalName":"fluxreactor","quantity":1}],"timeFactor":10},"hypercannon":{"input":[{"internalName":"metalscrap","quantity":4},{"internalName":"tritium","quantity":4},{"internalName":"teslacoil","quantity":2},{"internalName":"supercapacitor","quantity":2}],"timeFactor":10},"vectormissilebay":{"input":[{"internalName":"metalscrap","quantity":4},{"internalName":"tritium","quantity":4},{"internalName":"fuelcell","quantity":1}],"timeFactor":10},"rapidrocketlauncher":{"input":[{"internalName":"metalscrap","quantity":4},{"internalName":"vanadium","quantity":4},{"internalName":"fuelcell","quantity":1}],"timeFactor":10},"gatlingcannon":{"input":[{"internalName":"metalscrap","quantity":8},{"internalName":"vanadium","quantity":4},{"internalName":"supercapacitor","quantity":2}],"timeFactor":10},"smallshieldregenerator":{"input":[{"internalName":"metalscrap","quantity":6},{"internalName":"shieldbattery","quantity":2},{"internalName":"supercapacitor","quantity":1}],"timeFactor":10},"smallshieldrecharger":{"input":[{"internalName":"metalscrap","quantity":2},{"internalName":"shieldbattery","quantity":2},{"internalName":"teslacoil","quantity":1}],"timeFactor":10},"smallbatteryrecharger":{"input":[{"internalName":"metalscrap","quantity":4},{"internalName":"fuelcell","quantity":2},{"internalName":"teslacoil","quantity":1}],"timeFactor":10},"smallcapacitorbank":{"input":[{"internalName":"metalscrap","quantity":2},{"internalName":"supercapacitor","quantity":4}],"timeFactor":10},"smallcargoexpansion":{"input":[{"internalName":"metalscrap","quantity":6},{"internalName":"reinforcedarmorplate","quantity":2}],"timeFactor":10},"atomicpropulsor":{"input":[{"internalName":"metalscrap","quantity":6},{"internalName":"fuelcell","quantity":2}],"timeFactor":10},"warpcorejammer":{"input":[{"internalName":"metalscrap","quantity":6},{"internalName":"fluxreactor","quantity":2},{"internalName":"tritium","quantity":4}],"timeFactor":10}}')}});
//# sourceMappingURL=app.144ac255.js.map